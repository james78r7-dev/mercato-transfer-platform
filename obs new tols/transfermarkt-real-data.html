<!DOCTYPE html>
<html dir="rtl" lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ’° Ø£ÙƒØ«Ø± 10 Ø£Ù†Ø¯ÙŠØ© ØµØ±ÙØ§Ù‹ ÙÙŠ Ø³ÙˆÙ‚ Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„Ø§Øª 2025 - Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ©</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', 'Tajawal', sans-serif;
            background: linear-gradient(135deg, #0a0a0f 0%, #1a1a2e 50%, #16213e 100%);
            color: #f8fafc;
            min-height: 100vh;
            overflow-x: hidden;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
        }

        .header {
            text-align: center;
            margin-bottom: 3rem;
        }

        .main-title {
            font-size: 3rem;
            font-weight: 900;
            background: linear-gradient(45deg, #ffd700, #ffed4e);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 1rem;
        }

        .subtitle {
            font-size: 1.2rem;
            color: #94a3b8;
            margin-bottom: 2rem;
        }

        .data-source-info {
            background: rgba(16, 185, 129, 0.2);
            border: 1px solid #10b981;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 2rem;
            text-align: center;
        }

        .update-section {
            display: flex;
            gap: 1rem;
            justify-content: center;
            flex-wrap: wrap;
            margin-bottom: 2rem;
        }

        .update-btn {
            background: linear-gradient(45deg, #ffd700, #ffed4e);
            color: #1a1a2e;
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 16px;
        }

        .update-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 215, 0, 0.4);
        }

        .update-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .progress-section {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 2rem;
            display: none;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 15px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #ffd700, #ffed4e);
            width: 0%;
            transition: width 0.3s ease;
        }

        .progress-text {
            text-align: center;
            color: #ffd700;
            font-weight: bold;
        }

        .clubs-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .club-card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 1.5rem;
            border: 1px solid rgba(255, 215, 0, 0.3);
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .club-card:hover {
            transform: translateY(-5px);
            border-color: #ffd700;
            box-shadow: 0 10px 30px rgba(255, 215, 0, 0.2);
        }

        .club-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #ffd700, #ffed4e);
        }

        .club-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .club-logo {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            object-fit: cover;
            border: 3px solid #ffd700;
            box-shadow: 0 0 15px rgba(255, 215, 0, 0.3);
        }

        .club-info h3 {
            font-size: 1.4rem;
            color: #ffd700;
            margin-bottom: 0.5rem;
        }

        .club-rank {
            background: linear-gradient(45deg, #ffd700, #ffed4e);
            color: #1a1a2e;
            padding: 6px 15px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 0.9rem;
        }

        .club-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            margin-top: 1rem;
        }

        .stat-item {
            text-align: center;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            border: 1px solid rgba(255, 215, 0, 0.2);
        }

        .stat-label {
            font-size: 0.9rem;
            color: #94a3b8;
            margin-bottom: 0.5rem;
        }

        .stat-value {
            font-size: 1.2rem;
            font-weight: bold;
            color: #ffd700;
        }

        .expenditure-highlight {
            font-size: 1.4rem;
            color: #ff6b6b;
            text-shadow: 0 0 10px rgba(255, 107, 107, 0.5);
        }

        .error-message {
            background: rgba(239, 68, 68, 0.2);
            border: 1px solid #ef4444;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            color: #ef4444;
            margin: 2rem 0;
            display: none;
        }

        .success-message {
            background: rgba(16, 185, 129, 0.2);
            border: 1px solid #10b981;
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            color: #10b981;
            margin: 1rem 0;
            display: none;
        }

        .last-updated {
            text-align: center;
            color: #94a3b8;
            font-size: 0.9rem;
            margin-top: 2rem;
            padding: 15px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
        }

        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .loading-content {
            text-align: center;
            color: #ffd700;
        }

        .loading-spinner {
            width: 60px;
            height: 60px;
            border: 6px solid rgba(255, 215, 0, 0.3);
            border-top: 6px solid #ffd700;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .real-data-badge {
            display: inline-flex;
            align-items: center;
            gap: 5px;
            background: rgba(16, 185, 129, 0.2);
            color: #10b981;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: bold;
            border: 1px solid #10b981;
        }

        @media (max-width: 768px) {
            .main-title {
                font-size: 2rem;
            }
            
            .clubs-grid {
                grid-template-columns: 1fr;
            }
            
            .update-section {
                flex-direction: column;
                align-items: center;
            }
        }
    </style>
</head>
<body>
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <h3>Ø¬Ø§Ø±ÙŠ Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ© Ù…Ù† Transfermarkt...</h3>
            <p id="loadingStatus">Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…...</p>
        </div>
    </div>

    <div class="container">
        <div class="header">
            <h1 class="main-title">
                <i class="fas fa-trophy"></i>
                Ø£ÙƒØ«Ø± 10 Ø£Ù†Ø¯ÙŠØ© ØµØ±ÙØ§Ù‹ ÙÙŠ Ø³ÙˆÙ‚ Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„Ø§Øª 2025
            </h1>
            <p class="subtitle">Ø¨ÙŠØ§Ù†Ø§Øª Ø­Ù‚ÙŠÙ‚ÙŠØ© ÙˆÙ…Ø­Ø¯Ø«Ø© Ù…Ù† Transfermarkt Ù…Ø¹ Ø´Ø¹Ø§Ø±Ø§Øª Ø¹Ø§Ù„ÙŠØ© Ø§Ù„Ø¬ÙˆØ¯Ø©</p>
            
            <div class="data-source-info">
                <i class="fas fa-check-circle"></i>
                <strong>Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ© ÙÙ‚Ø·</strong> - Ù…Ø³ØªØ®Ø±Ø¬Ø© Ù…Ø¨Ø§Ø´Ø±Ø© Ù…Ù† Transfermarkt
                <span class="real-data-badge">
                    <i class="fas fa-satellite-dish"></i>
                    Ù…Ø¨Ø§Ø´Ø±
                </span>
            </div>
        </div>

        <div class="update-section">
            <button class="update-btn" onclick="fetchRealTimeData()" id="updateBtn">
                <i class="fas fa-sync-alt"></i>
                ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¢Ù†
            </button>
            <button class="update-btn" onclick="saveCurrentData()" id="saveBtn" style="display: none;">
                <i class="fas fa-save"></i>
                Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©
            </button>
            <button class="update-btn" onclick="loadSavedData()">
                <i class="fas fa-folder-open"></i>
                ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø©
            </button>
            <button class="update-btn" onclick="exportRealData()">
                <i class="fas fa-download"></i>
                ØªØµØ¯ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ©
            </button>
            <button class="update-btn" onclick="openDisplayPage()">
                <i class="fas fa-external-link-alt"></i>
                Ø§Ù„Ø¹Ø±Ø¶ Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠ
            </button>
            <button class="update-btn" onclick="openLogoManager()">
                <i class="fas fa-image"></i>
                Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø´Ø¹Ø§Ø±Ø§Øª
            </button>
        </div>

        <div class="progress-section" id="progressSection">
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <div class="progress-text" id="progressText">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ø¶ÙŠØ±...</div>
        </div>

        <div class="error-message" id="errorMessage">
            <h3><i class="fas fa-exclamation-triangle"></i> Ø®Ø·Ø£ ÙÙŠ Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</h3>
            <p id="errorText">Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù€ Transfermarkt. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.</p>
        </div>

        <div class="success-message" id="successMessage">
            <i class="fas fa-check-circle"></i>
            <span id="successText">ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­!</span>
        </div>

        <div id="clubsGrid" class="clubs-grid">
            <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¡ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ© Ù‡Ù†Ø§ -->
        </div>

        <div id="lastUpdated" class="last-updated">
            <i class="fas fa-clock"></i>
            Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ«: Ù„Ù… ÙŠØªÙ… Ø§Ù„ØªØ­Ø¯ÙŠØ« Ø¨Ø¹Ø¯
            <br>
            <small>Ø§Ø¶ØºØ· "ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¢Ù†" Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø£Ø­Ø¯Ø« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Transfermarkt</small>
        </div>
    </div>

    <!-- ØªØ­Ù…ÙŠÙ„ Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙˆØ§Ù„Ø´Ø¹Ø§Ø±Ø§Øª -->
    <script src="../public/data-manager.js"></script>
    <script src="universal-logo-fix.js"></script>
    <script src="transfermarkt-unified-system.js"></script>
    <script>
        // Ù…ØªØºÙŠØ±Ø§Øª Ø¹Ø§Ù…Ø©
        let dataManager;
        let currentRealData = [];
        let isUpdating = false;

        // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù†Ø¸Ø§Ù…
        document.addEventListener('DOMContentLoaded', async function() {
            console.log('ğŸš€ ØªÙ‡ÙŠØ¦Ø© Ù†Ø¸Ø§Ù… Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ©...');

            try {
                // Ø§Ù†ØªØ¸Ø§Ø± ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù…ÙˆØ­Ø¯ Ù„Ø­Ù„ Ù…Ø´ÙƒÙ„Ø© Ø§Ù„Ø´Ø¹Ø§Ø±Ø§Øª - Ù…Ø­Ø³Ù†
                if (window.universalLogoFix && !window.universalLogoFix.isInitialized) {
                    console.log('ğŸ”„ ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù…ÙˆØ­Ø¯ Ù„Ø­Ù„ Ù…Ø´ÙƒÙ„Ø© Ø§Ù„Ø´Ø¹Ø§Ø±Ø§Øª...');
                    await window.universalLogoFix.init();
                    console.log('âœ… ØªÙ… ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù…ÙˆØ­Ø¯ Ù„Ø­Ù„ Ù…Ø´ÙƒÙ„Ø© Ø§Ù„Ø´Ø¹Ø§Ø±Ø§Øª');
                } else if (window.universalLogoFix && window.universalLogoFix.isInitialized) {
                    console.log('âœ… Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù…ÙˆØ­Ø¯ Ù…ØªÙ‡ÙŠØ£ Ø¨Ø§Ù„ÙØ¹Ù„');
                }

                // Ø§Ù†ØªØ¸Ø§Ø± ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù…ÙˆØ­Ø¯ - Ù…Ø­Ø³Ù†
                if (window.transfermarktSystem && !window.transfermarktSystem.isInitialized) {
                    console.log('ğŸ”„ ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù…ÙˆØ­Ø¯...');
                    await window.transfermarktSystem.init();
                    console.log('âœ… ØªÙ… ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù…ÙˆØ­Ø¯');
                } else if (window.transfermarktSystem && window.transfermarktSystem.isInitialized) {
                    console.log('âœ… Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù…ÙˆØ­Ø¯ Ù…ØªÙ‡ÙŠØ£ Ø¨Ø§Ù„ÙØ¹Ù„');
                }

                // ØªÙ‡ÙŠØ¦Ø© Ù…Ø¯ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª - Ù…Ø­Ø³Ù†
                if (typeof TransfermarktDataManager !== 'undefined' && !dataManager) {
                    console.log('ğŸ”„ ØªÙ‡ÙŠØ¦Ø© Ù…Ø¯ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...');
                    dataManager = new TransfermarktDataManager();
                    await dataManager.ensureDefaultClubs();
                    console.log('âœ… ØªÙ… ØªÙ‡ÙŠØ¦Ø© Ù…Ø¯ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª');
                } else if (dataManager) {
                    console.log('âœ… Ù…Ø¯ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…ØªÙ‡ÙŠØ£ Ø¨Ø§Ù„ÙØ¹Ù„');
                }

                console.log('âœ… ØªÙ… ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù†Ø¸Ø§Ù… Ø¨Ù†Ø¬Ø§Ø­');

                // Ù…Ø­Ø§ÙˆÙ„Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø©
                loadSavedRealData();

            } catch (error) {
                console.error('âŒ Ø®Ø·Ø£ ÙÙŠ ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù†Ø¸Ø§Ù…:', error);
                showError('ÙØ´Ù„ ÙÙŠ ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù†Ø¸Ø§Ù…');
            }
        });

        // Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ© Ù…Ù† Transfermarkt
        async function fetchRealTimeData() {
            if (isUpdating) {
                console.log('âš ï¸ Ø§Ù„ØªØ­Ø¯ÙŠØ« Ù‚ÙŠØ¯ Ø§Ù„ØªÙ†ÙÙŠØ° Ø¨Ø§Ù„ÙØ¹Ù„');
                return;
            }

            isUpdating = true;
            console.log('ğŸš€ Ø¨Ø¯Ø¡ Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ© Ù…Ù† Transfermarkt...');

            // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„ØªØ­Ù…ÙŠÙ„
            showLoading(true);
            updateProgress(0, 'Ø¨Ø¯Ø¡ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù€ Transfermarkt...');

            // ØªØ¹Ø·ÙŠÙ„ Ø§Ù„Ø²Ø±
            const updateBtn = document.getElementById('updateBtn');
            updateBtn.disabled = true;
            updateBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø§Ø³ØªØ®Ø±Ø§Ø¬...';

            try {
                // Ø§Ù„Ø®Ø·ÙˆØ© 1: Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù€ Transfermarkt
                updateProgress(20, 'Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø®Ø§Ø¯Ù… Transfermarkt...');
                const htmlContent = await fetchTransfermarktHTML();

                if (!htmlContent) {
                    throw new Error('ÙØ´Ù„ ÙÙŠ Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Transfermarkt');
                }

                // Ø§Ù„Ø®Ø·ÙˆØ© 2: ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
                updateProgress(50, 'ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø±Ø¬Ø©...');
                const clubsData = await parseTransfermarktData(htmlContent);

                if (!clubsData || clubsData.length === 0) {
                    throw new Error('Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø¨ÙŠØ§Ù†Ø§Øª ØµØ§Ù„Ø­Ø©');
                }

                // Ø§Ù„Ø®Ø·ÙˆØ© 3: Ø±Ø¨Ø· Ø§Ù„Ø´Ø¹Ø§Ø±Ø§Øª
                updateProgress(70, 'Ø±Ø¨Ø· Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„Ø£Ù†Ø¯ÙŠØ©...');
                const enrichedData = window.transfermarktSystem ?
                    window.transfermarktSystem.enrichWithLogos(clubsData) :
                    await enrichWithLogos(clubsData);

                // Ø§Ù„Ø®Ø·ÙˆØ© 4: Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
                updateProgress(90, 'Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...');
                currentRealData = enrichedData;
                saveRealData(enrichedData);

                // Ø§Ù„Ø®Ø·ÙˆØ© 5: Ø¹Ø±Ø¶ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
                updateProgress(100, 'Ø¹Ø±Ø¶ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...');
                displayRealClubs(enrichedData);

                showSuccess(`ØªÙ… Ø§Ø³ØªØ®Ø±Ø§Ø¬ ${enrichedData.length} Ù†Ø§Ø¯ÙŠ Ø¨Ù†Ø¬Ø§Ø­ Ù…Ù† Transfermarkt!`);
                updateLastUpdatedTime();

                // Ø¥Ø¸Ù‡Ø§Ø± Ø²Ø± Ø§Ù„Ø­ÙØ¸
                document.getElementById('saveBtn').style.display = 'inline-flex';

                console.log('âœ… ØªÙ… Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ© Ø¨Ù†Ø¬Ø§Ø­');

            } catch (error) {
                console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:', error);
                showError(`ÙØ´Ù„ ÙÙŠ Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª: ${error.message}`);
            } finally {
                isUpdating = false;
                showLoading(false);

                // Ø¥Ø¹Ø§Ø¯Ø© ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø²Ø±
                updateBtn.disabled = false;
                updateBtn.innerHTML = '<i class="fas fa-sync-alt"></i> ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¢Ù†';
            }
        }

        // Ø¬Ù„Ø¨ HTML Ù…Ù† Transfermarkt - Ù†Ø³Ø®Ø© Ù…Ø­Ø³Ù†Ø© Ù…Ù† Ø§Ù„Ø£Ø¯Ø§Ø© Ø§Ù„Ù†Ø§Ø¬Ø­Ø©
        async function fetchTransfermarktHTML() {
            const TRANSFERMARKT_URL = 'https://www.transfermarkt.com/transfers/einnahmenausgaben/statistik/plus/0?ids=a&sa=&saison_id=2025&saison_id_bis=2025&land_id=&nat=&kontinent_id=&pos=&altersklasse=&w_s=&leihe=&intern=0&plus=0';

            // Ù‚Ø§Ø¦Ù…Ø© Proxies Ù…Ø­Ø¯Ø«Ø© ÙˆÙ…ØªÙ†ÙˆØ¹Ø© - Ù†ÙØ³ Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ù†Ø§Ø¬Ø­Ø©
            const proxies = [
                {
                    url: 'https://api.allorigins.win/get?url=',
                    type: 'allorigins',
                    name: 'AllOrigins'
                },
                {
                    url: 'https://corsproxy.io/?',
                    type: 'direct',
                    name: 'CorsProxy.io'
                },
                {
                    url: 'https://api.codetabs.com/v1/proxy?quest=',
                    type: 'direct',
                    name: 'CodeTabs'
                },
                {
                    url: 'https://cors-anywhere.herokuapp.com/',
                    type: 'direct',
                    name: 'CORS Anywhere'
                }
            ];

            console.log('ğŸ”„ Ø¨Ø¯Ø¡ Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ© Ù…Ù† Transfermarkt...');
            console.log(`ğŸ“Š Ø§Ù„Ø±Ø§Ø¨Ø· Ø§Ù„Ù…Ø³ØªÙ‡Ø¯Ù: ${TRANSFERMARKT_URL}`);

            // Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ø³ØªØ®Ø¯Ø§Ù… ÙƒÙ„ proxy - Ù†ÙØ³ Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ù†Ø§Ø¬Ø­Ø©
            for (let i = 0; i < proxies.length; i++) {
                const proxy = proxies[i];

                try {
                    console.log(`ğŸŒ Ù…Ø­Ø§ÙˆÙ„Ø© ${i + 1}/${proxies.length}: ${proxy.name}`);
                    updateProgress(20 + (i * 15), `Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ù„Ø§ØªØµØ§Ù„ Ø¹Ø¨Ø± ${proxy.name}...`);

                    let requestUrl, options = {
                        method: 'GET',
                        headers: {
                            'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36',
                            'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8',
                            'Accept-Language': 'en-US,en;q=0.5',
                            'Accept-Encoding': 'gzip, deflate',
                            'DNT': '1',
                            'Connection': 'keep-alive',
                            'Upgrade-Insecure-Requests': '1'
                        }
                    };

                    if (proxy.type === 'allorigins') {
                        requestUrl = proxy.url + encodeURIComponent(TRANSFERMARKT_URL);
                    } else {
                        requestUrl = proxy.url + TRANSFERMARKT_URL;
                        options.headers['X-Requested-With'] = 'XMLHttpRequest';
                    }

                    console.log(`ğŸ“¡ Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨ Ø¥Ù„Ù‰: ${proxy.name}`);

                    const response = await fetch(requestUrl, options);

                    if (!response.ok) {
                        throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                    }

                    console.log(`âœ… ØªÙ… Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ø³ØªØ¬Ø§Ø¨Ø© Ù…Ù† ${proxy.name}`);

                    let htmlContent;
                    if (proxy.type === 'allorigins') {
                        const data = await response.json();
                        htmlContent = data.contents;
                    } else {
                        htmlContent = await response.text();
                    }

                    if (!htmlContent || htmlContent.length < 1000) {
                        throw new Error('Ù…Ø­ØªÙˆÙ‰ HTML ÙØ§Ø±Øº Ø£Ùˆ Ù‚ØµÙŠØ± Ø¬Ø¯Ø§Ù‹');
                    }

                    console.log(`ğŸ“„ ØªÙ… Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ HTML Ø¨Ø­Ø¬Ù…: ${htmlContent.length} Ø­Ø±Ù`);
                    return htmlContent;

                } catch (error) {
                    console.log(`âŒ Ø®Ø·Ø£ ÙÙŠ ${proxy.name}:`, error.message);
                    continue;
                }
            }

            // Ø¥Ø°Ø§ ÙØ´Ù„Øª Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª
            console.log('âŒ ÙØ´Ù„ ÙÙŠ Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ© Ù…Ù† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…ØµØ§Ø¯Ø±');
            throw new Error('ÙØ´Ù„ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù€ Transfermarkt - ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª');
        }

        // ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† HTML - Ù†Ø³Ø®Ø© Ù…Ø­Ø³Ù†Ø© Ù…Ù† Ø§Ù„Ø£Ø¯Ø§Ø© Ø§Ù„Ù†Ø§Ø¬Ø­Ø©
        async function parseTransfermarktData(html) {
            try {
                console.log('ğŸ” Ø¨Ø¯Ø¡ ØªØ­Ù„ÙŠÙ„ HTML Ù…Ù† Transfermarkt...');
                console.log(`ğŸ“„ Ø­Ø¬Ù… HTML: ${html.length} Ø­Ø±Ù`);

                const parser = new DOMParser();
                const doc = parser.parseFromString(html, 'text/html');

                // Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø¨Ø·Ø±Ù‚ Ù…ØªØ¹Ø¯Ø¯Ø© ÙˆÙ…ØªÙ‚Ø¯Ù…Ø© - Ù†ÙØ³ Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ù†Ø§Ø¬Ø­Ø©
                let table = null;
                const tableSelectors = [
                    'table.items',
                    '.responsive-table table',
                    'table[class*="items"]',
                    'table tbody',
                    'table',
                    '.tm-table table',
                    '[data-table] table'
                ];

                for (const selector of tableSelectors) {
                    table = doc.querySelector(selector);
                    if (table) {
                        console.log(`âœ… ØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù…: ${selector}`);
                        break;
                    }
                }

                if (!table) {
                    console.log('âŒ Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ø¬Ø¯ÙˆÙ„');
                    // Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø£ÙŠ Ø¬Ø¯ÙˆÙ„ ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø§Ù„ÙŠØ©
                    const allTables = doc.querySelectorAll('table');
                    for (const t of allTables) {
                        if (t.textContent.includes('â‚¬') && t.textContent.includes('m')) {
                            table = t;
                            console.log('âœ… ØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø¬Ø¯ÙˆÙ„ ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø§Ù„ÙŠØ©');
                            break;
                        }
                    }
                }

                if (!table) {
                    console.log('âŒ Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø¬Ø¯ÙˆÙ„ Ù…Ù†Ø§Ø³Ø¨');
                    throw new Error('Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙÙŠ Ø§Ù„ØµÙØ­Ø©');
                }

                // Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„ØµÙÙˆÙ
                const rows = table.querySelectorAll('tbody tr, tr');
                console.log(`ğŸ“Š ØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ ${rows.length} ØµÙ`);

                const clubs = [];
                let validRowCount = 0;

                rows.forEach((row, index) => {
                    if (validRowCount >= 10) return; // Ø£Ø®Ø° Ø£ÙˆÙ„ 10 Ø£Ù†Ø¯ÙŠØ© ÙÙ‚Ø·

                    const cells = row.querySelectorAll('td, th');

                    // ØªØ®Ø·ÙŠ Ø§Ù„ØµÙÙˆÙ Ø§Ù„ØªÙŠ Ù„Ø§ ØªØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø¨ÙŠØ§Ù†Ø§Øª ÙƒØ§ÙÙŠØ©
                    if (cells.length < 4) return;

                    try {
                        const clubData = extractAdvancedClubData(cells, validRowCount + 1);
                        if (clubData) {
                            validRowCount++;
                            clubs.push(clubData);
                            console.log(`âœ… ${validRowCount}. ${clubData.englishName} - ${clubData.expenditure}`);
                        }
                    } catch (cellError) {
                        console.log(`âŒ Ø®Ø·Ø£ ÙÙŠ Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„ØµÙ ${index}:`, cellError.message);
                    }
                });

                console.log(`ğŸ‰ ØªÙ… Ø§Ø³ØªØ®Ø±Ø§Ø¬ ${clubs.length} Ù†Ø§Ø¯ÙŠ Ø¨Ù†Ø¬Ø§Ø­ Ù…Ù† Transfermarkt`);

                if (clubs.length === 0) {
                    console.log('âŒ Ù„Ù… ÙŠØªÙ… Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø£ÙŠ Ø¨ÙŠØ§Ù†Ø§Øª ØµØ§Ù„Ø­Ø©');
                    throw new Error('Ù„Ù… ÙŠØªÙ… Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø£ÙŠ Ø¨ÙŠØ§Ù†Ø§Øª ØµØ§Ù„Ø­Ø© Ù…Ù† Ø§Ù„ØµÙØ­Ø©');
                }

                return clubs;

            } catch (error) {
                console.error('âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù„ÙŠÙ„ HTML:', error);
                throw error;
            }
        }

        // Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù†Ø§Ø¯ÙŠ Ù…Ù† ØµÙ Ø§Ù„Ø¬Ø¯ÙˆÙ„ - Ù†Ø³Ø®Ø© Ù…Ø­Ø³Ù†Ø© Ù…Ù† Ø§Ù„Ø£Ø¯Ø§Ø© Ø§Ù„Ù†Ø§Ø¬Ø­Ø©
        function extractAdvancedClubData(cells, rank) {
            try {
                // Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ø³Ù… Ø§Ù„Ù†Ø§Ø¯ÙŠ Ø¨Ø·Ø±Ù‚ Ù…ØªØ¹Ø¯Ø¯Ø© - Ù†ÙØ³ Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ù†Ø§Ø¬Ø­Ø©
                let clubName = '';
                let clubLogo = '';

                // Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ø®Ù„Ø§ÙŠØ§ Ø§Ù„Ù…Ø®ØªÙ„ÙØ©
                for (let i = 0; i < Math.min(3, cells.length); i++) {
                    const cell = cells[i];

                    // Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø±Ø§Ø¨Ø· Ø§Ù„Ù†Ø§Ø¯ÙŠ
                    const nameLink = cell.querySelector('a[href*="/verein/"]') ||
                                   cell.querySelector('a[title]') ||
                                   cell.querySelector('a');

                    if (nameLink && nameLink.textContent.trim().length > 2) {
                        clubName = nameLink.textContent.trim();
                        break;
                    }

                    // Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† ØµÙˆØ±Ø© Ø§Ù„Ø´Ø¹Ø§Ø±
                    const logoImg = cell.querySelector('img[alt]');
                    if (logoImg && logoImg.alt.trim().length > 2) {
                        if (!clubName) clubName = logoImg.alt.trim();
                        clubLogo = logoImg.src;
                    }

                    // Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ù†Øµ Ø§Ù„Ù…Ø¨Ø§Ø´Ø±
                    const cellText = cell.textContent.trim();
                    if (!clubName && cellText.length > 2 && !cellText.includes('â‚¬') && !cellText.match(/^\d+$/)) {
                        clubName = cellText;
                    }
                }

                // ØªÙ†Ø¸ÙŠÙ Ø§Ø³Ù… Ø§Ù„Ù†Ø§Ø¯ÙŠ
                clubName = clubName.replace(/^\d+\.?\s*/, '').trim(); // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ø£Ø±Ù‚Ø§Ù… Ù…Ù† Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©

                if (!clubName || clubName.length < 2) {
                    console.log(`âš ï¸ ØªØ®Ø·ÙŠ Ø§Ù„ØµÙ ${rank}: Ø§Ø³Ù… Ø§Ù„Ù†Ø§Ø¯ÙŠ ØºÙŠØ± ØµØ§Ù„Ø­`);
                    return null;
                }

                // Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø§Ù„ÙŠØ© - Ù†ÙØ³ Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ù†Ø§Ø¬Ø­Ø©
                let expenditure = 'â‚¬0.00m';
                let arrivals = '0';
                let income = 'â‚¬0.00m';
                let departures = '0';
                let balance = 'â‚¬0.00m';

                // Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø§Ù„ÙŠØ© ÙÙŠ Ø§Ù„Ø®Ù„Ø§ÙŠØ§
                for (let i = 1; i < cells.length; i++) {
                    const cellText = cells[i].textContent.trim();

                    if (cellText.includes('â‚¬') && cellText.includes('m')) {
                        if (expenditure === 'â‚¬0.00m') {
                            expenditure = cellText;
                        } else if (income === 'â‚¬0.00m') {
                            income = cellText;
                        } else if (balance === 'â‚¬0.00m') {
                            balance = cellText;
                        }
                    } else if (cellText.match(/^\d+$/)) {
                        if (arrivals === '0') {
                            arrivals = cellText;
                        } else if (departures === '0') {
                            departures = cellText;
                        }
                    }
                }

                // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
                if (!expenditure.includes('â‚¬') || expenditure === 'â‚¬0.00m') {
                    console.log(`âš ï¸ ØªØ®Ø·ÙŠ ${clubName}: Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø§Ù„ÙŠØ© ØºÙŠØ± ØµØ§Ù„Ø­Ø©`);
                    return null;
                }

                // ØªØ±Ø¬Ù…Ø© Ø§Ø³Ù… Ø§Ù„Ù†Ø§Ø¯ÙŠ
                const arabicName = translateClubName(clubName);

                return {
                    rank: rank,
                    englishName: clubName,
                    arabicName: arabicName,
                    expenditure: expenditure,
                    arrivals: parseInt(arrivals.replace(/\D/g, '')) || 0,
                    income: income,
                    departures: parseInt(departures.replace(/\D/g, '')) || 0,
                    balance: balance,
                    league: getClubLeague(clubName),
                    logoUrl: null, // Ø³ÙŠØªÙ… Ù…Ù„Ø¤Ù‡ Ù„Ø§Ø­Ù‚Ø§Ù‹
                    lastUpdated: new Date().toISOString(),
                    dataSource: 'transfermarkt-real-time'
                };

            } catch (error) {
                console.error('Ø®Ø·Ø£ ÙÙŠ Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù†Ø§Ø¯ÙŠ:', error);
                return null;
            }
        }

        // ØªØ±Ø¬Ù…Ø© Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ø£Ù†Ø¯ÙŠØ©
        function translateClubName(englishName) {
            const translations = {
                'Liverpool FC': 'Ù„ÙŠÙØ±Ø¨ÙˆÙ„',
                'Chelsea FC': 'ØªØ´ÙŠÙ„Ø³ÙŠ',
                'Real Madrid': 'Ø±ÙŠØ§Ù„ Ù…Ø¯Ø±ÙŠØ¯',
                'Manchester United': 'Ù…Ø§Ù†Ø´Ø³ØªØ± ÙŠÙˆÙ†Ø§ÙŠØªØ¯',
                'Manchester City': 'Ù…Ø§Ù†Ø´Ø³ØªØ± Ø³ÙŠØªÙŠ',
                'Arsenal FC': 'Ø¢Ø±Ø³Ù†Ø§Ù„',
                'Tottenham Hotspur': 'ØªÙˆØªÙ†Ù‡Ø§Ù…',
                'FC Barcelona': 'Ø¨Ø±Ø´Ù„ÙˆÙ†Ø©',
                'Atletico Madrid': 'Ø£ØªÙ„ØªÙŠÙƒÙˆ Ù…Ø¯Ø±ÙŠØ¯',
                'Paris Saint-Germain': 'Ø¨Ø§Ø±ÙŠØ³ Ø³Ø§Ù† Ø¬ÙŠØ±Ù…Ø§Ù†',
                'Bayern Munich': 'Ø¨Ø§ÙŠØ±Ù† Ù…ÙŠÙˆÙ†Ø®',
                'Borussia Dortmund': 'Ø¨ÙˆØ±ÙˆØ³ÙŠØ§ Ø¯ÙˆØ±ØªÙ…ÙˆÙ†Ø¯',
                'Juventus': 'ÙŠÙˆÙÙ†ØªÙˆØ³',
                'AC Milan': 'Ù…ÙŠÙ„Ø§Ù†',
                'Inter Milan': 'Ø¥Ù†ØªØ± Ù…ÙŠÙ„Ø§Ù†',
                'AS Roma': 'Ø±ÙˆÙ…Ø§',
                'Napoli': 'Ù†Ø§Ø¨ÙˆÙ„ÙŠ',
                'Sevilla FC': 'Ø¥Ø´Ø¨ÙŠÙ„ÙŠØ©',
                'Valencia CF': 'ÙØ§Ù„Ù†Ø³ÙŠØ§',
                'Villarreal CF': 'ÙÙŠØ§Ø±ÙŠØ§Ù„'
            };

            return translations[englishName] || englishName;
        }

        // ØªØ­Ø¯ÙŠØ¯ Ø¯ÙˆØ±ÙŠ Ø§Ù„Ù†Ø§Ø¯ÙŠ
        function getClubLeague(clubName) {
            const leagues = {
                'Liverpool FC': 'Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ Ø§Ù„Ù…Ù…ØªØ§Ø²',
                'Chelsea FC': 'Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ Ø§Ù„Ù…Ù…ØªØ§Ø²',
                'Manchester United': 'Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ Ø§Ù„Ù…Ù…ØªØ§Ø²',
                'Manchester City': 'Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ Ø§Ù„Ù…Ù…ØªØ§Ø²',
                'Arsenal FC': 'Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ Ø§Ù„Ù…Ù…ØªØ§Ø²',
                'Tottenham Hotspur': 'Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ Ø§Ù„Ù…Ù…ØªØ§Ø²',
                'Real Madrid': 'Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ø¥Ø³Ø¨Ø§Ù†ÙŠ',
                'FC Barcelona': 'Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ø¥Ø³Ø¨Ø§Ù†ÙŠ',
                'Atletico Madrid': 'Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ø¥Ø³Ø¨Ø§Ù†ÙŠ',
                'Sevilla FC': 'Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ø¥Ø³Ø¨Ø§Ù†ÙŠ',
                'Valencia CF': 'Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ø¥Ø³Ø¨Ø§Ù†ÙŠ',
                'Villarreal CF': 'Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ø¥Ø³Ø¨Ø§Ù†ÙŠ',
                'Paris Saint-Germain': 'Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„ÙØ±Ù†Ø³ÙŠ',
                'Bayern Munich': 'Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ø£Ù„Ù…Ø§Ù†ÙŠ',
                'Borussia Dortmund': 'Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ø£Ù„Ù…Ø§Ù†ÙŠ',
                'Juventus': 'Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ø¥ÙŠØ·Ø§Ù„ÙŠ',
                'AC Milan': 'Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ø¥ÙŠØ·Ø§Ù„ÙŠ',
                'Inter Milan': 'Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ø¥ÙŠØ·Ø§Ù„ÙŠ',
                'AS Roma': 'Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ø¥ÙŠØ·Ø§Ù„ÙŠ',
                'Napoli': 'Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ø¥ÙŠØ·Ø§Ù„ÙŠ'
            };

            return leagues[clubName] || 'Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ø£ÙˆØ±ÙˆØ¨ÙŠ';
        }

        // Ø±Ø¨Ø· Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ø§Ù„Ø´Ø¹Ø§Ø±Ø§Øª - Ù…Ø­Ø³Ù† Ù„Ù„Ø¹Ù…Ù„ Ù…Ø¹ club-logo-manager
        async function enrichWithLogos(clubsData) {
            console.log('ğŸ¨ Ø¨Ø¯Ø¡ Ø±Ø¨Ø· Ø§Ù„Ø´Ø¹Ø§Ø±Ø§Øª Ù…Ø¹ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø´Ø§Ù…Ù„Ø©...');

            // Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù…ÙˆØ­Ø¯ Ø¥Ø°Ø§ ÙƒØ§Ù† Ù…ØªØ§Ø­Ø§Ù‹ - Ù…Ø­Ø³Ù†
            if (window.universalLogoFix) {
                console.log('ğŸ”„ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù…ÙˆØ­Ø¯ Ù„Ø­Ù„ Ù…Ø´ÙƒÙ„Ø© Ø§Ù„Ø´Ø¹Ø§Ø±Ø§Øª...');
                return window.universalLogoFix.enrichWithLogos(clubsData);
            }

            // Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„ØªÙ‚Ù„ÙŠØ¯ÙŠØ© ÙƒØ§Ø­ØªÙŠØ§Ø·ÙŠ - Ù…Ø­Ø³Ù†
            console.log('ğŸ”„ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„ØªÙ‚Ù„ÙŠØ¯ÙŠØ© Ù„Ø±Ø¨Ø· Ø§Ù„Ø´Ø¹Ø§Ø±Ø§Øª...');
            
            // ØªØ­Ù…ÙŠÙ„ Ù‚Ø§Ø¹Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø´Ø¹Ø§Ø±Ø§Øª Ù…Ù† club-logo-manager
            const logoDatabase = await loadLogoDatabase();

            const enrichedClubs = [];

            for (const club of clubsData) {
                try {
                    // Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø´Ø§Ù…Ù„Ø©
                    let logoUrl = findClubLogo(club.englishName, logoDatabase);

                    // Ø¥Ø°Ø§ Ù„Ù… Ù†Ø¬Ø¯ Ø¨Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØŒ Ø¬Ø±Ø¨ Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø¹Ø±Ø¨ÙŠ
                    if (!logoUrl && club.arabicName) {
                        logoUrl = findClubLogo(club.arabicName, logoDatabase);
                    }

                    // Ø¥Ø°Ø§ Ù„Ù… Ù†Ø¬Ø¯ØŒ Ø¬Ø±Ø¨ Ø§Ù„Ø¨Ø­Ø« Ø§Ù„Ø°ÙƒÙŠ
                    if (!logoUrl) {
                        logoUrl = smartLogoSearch(club.englishName, logoDatabase);
                    }

                    // Ø¥Ø°Ø§ Ù„Ù… Ù†Ø¬Ø¯ØŒ Ø¬Ø±Ø¨ Ø§Ù„Ø¨Ø­Ø« Ø¨Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…ÙØªØ§Ø­ÙŠØ©
                    if (!logoUrl) {
                        logoUrl = keywordLogoSearch(club.englishName, logoDatabase);
                    }

                    // Ø¥Ø°Ø§ Ù„Ù… Ù†Ø¬Ø¯ØŒ Ø§Ø³ØªØ®Ø¯Ù… Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
                    if (!logoUrl && dataManager) {
                        logoUrl = dataManager.getClubLogo(club.englishName) ||
                                 dataManager.getClubLogo(club.arabicName);
                    }

                    // Ø¥Ø°Ø§ Ù„Ù… Ù†Ø¬Ø¯ØŒ Ø¬Ø±Ø¨ Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø©
                    if (!logoUrl) {
                        logoUrl = searchInSavedData(club.englishName);
                    }

                    const enrichedClub = {
                        ...club,
                        logoUrl: logoUrl || generateFallbackLogo(club.englishName)
                    };

                    enrichedClubs.push(enrichedClub);

                } catch (error) {
                    console.warn(`âš ï¸ Ø®Ø·Ø£ ÙÙŠ Ø±Ø¨Ø· Ø´Ø¹Ø§Ø± ${club.englishName}:`, error);

                    // Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø´Ø¹Ø§Ø± Ø§Ø­ØªÙŠØ§Ø·ÙŠ
                    enrichedClubs.push({
                        ...club,
                        logoUrl: generateFallbackLogo(club.englishName)
                    });
                }
            }

            console.log(`âœ… ØªÙ… Ø±Ø¨Ø· ${enrichedClubs.length} Ø´Ø¹Ø§Ø± Ù…Ù† Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø´Ø§Ù…Ù„Ø©`);
            return enrichedClubs;
        }

        // ØªØ­Ù…ÙŠÙ„ Ù‚Ø§Ø¹Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø´Ø¹Ø§Ø±Ø§Øª Ù…Ù† club-logo-manager - Ù…Ø­Ø³Ù†
        async function loadLogoDatabase() {
            try {
                console.log('ğŸ“Š ØªØ­Ù…ÙŠÙ„ Ù‚Ø§Ø¹Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø´Ø¹Ø§Ø±Ø§Øª...');

                // Ù…Ø­Ø§ÙˆÙ„Ø© ØªØ­Ù…ÙŠÙ„ Ù…Ù† localStorage Ø£ÙˆÙ„Ø§Ù‹
                const clubManagerData = localStorage.getItem('clubManagerData');
                const verifiedClubs = localStorage.getItem('verifiedClubs');
                const transfermarktData = localStorage.getItem('transfermarktData');

                let logoDatabase = [];

                if (clubManagerData) {
                    try {
                        const data = JSON.parse(clubManagerData);
                        logoDatabase = logoDatabase.concat(data);
                        console.log(`ğŸ“¥ ØªÙ… ØªØ­Ù…ÙŠÙ„ ${data.length} Ù†Ø§Ø¯ÙŠ Ù…Ù† clubManagerData`);
                    } catch (e) {
                        console.warn('âš ï¸ Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ clubManagerData:', e);
                    }
                }

                if (verifiedClubs) {
                    try {
                        const data = JSON.parse(verifiedClubs);
                        logoDatabase = logoDatabase.concat(data);
                        console.log(`ğŸ“¥ ØªÙ… ØªØ­Ù…ÙŠÙ„ ${data.length} Ù†Ø§Ø¯ÙŠ Ù…Ù† verifiedClubs`);
                    } catch (e) {
                        console.warn('âš ï¸ Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ verifiedClubs:', e);
                    }
                }

                // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† transfermarktData Ø¥Ø°Ø§ ÙƒØ§Ù†Øª ØªØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø´Ø¹Ø§Ø±Ø§Øª
                if (transfermarktData) {
                    try {
                        const data = JSON.parse(transfermarktData);
                        if (Array.isArray(data)) {
                            const clubsWithLogos = data.filter(club => club.logoUrl);
                            logoDatabase = logoDatabase.concat(clubsWithLogos);
                            console.log(`ğŸ“¥ ØªÙ… ØªØ­Ù…ÙŠÙ„ ${clubsWithLogos.length} Ù†Ø§Ø¯ÙŠ Ù…Ù† transfermarktData`);
                        }
                    } catch (e) {
                        console.warn('âš ï¸ Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ transfermarktData:', e);
                    }
                }

                // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„ØªÙƒØ±Ø§Ø±Ø§Øª
                const uniqueClubs = logoDatabase.filter((club, index, self) =>
                    index === self.findIndex(c =>
                        c.englishName === club.englishName ||
                        c.arabicName === club.arabicName ||
                        c.name === club.name
                    )
                );

                console.log(`âœ… Ù‚Ø§Ø¹Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø´Ø¹Ø§Ø±Ø§Øª Ø¬Ø§Ù‡Ø²Ø©: ${uniqueClubs.length} Ù†Ø§Ø¯ÙŠ`);
                return uniqueClubs;

            } catch (error) {
                console.error('âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ù‚Ø§Ø¹Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø´Ø¹Ø§Ø±Ø§Øª:', error);
                return [];
            }
        }

        // Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø´Ø¹Ø§Ø± Ø§Ù„Ù†Ø§Ø¯ÙŠ ÙÙŠ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª - Ù…Ø­Ø³Ù†
        function findClubLogo(clubName, logoDatabase) {
            if (!clubName || !logoDatabase) return null;

            // Ø§Ù„Ø¨Ø­Ø« Ø§Ù„Ù…Ø¨Ø§Ø´Ø±
            const club = logoDatabase.find(c =>
                c.englishName === clubName ||
                c.arabicName === clubName ||
                c.name === clubName
            );

            if (club && club.logoUrl) {
                return club.logoUrl;
            }

            // Ø§Ù„Ø¨Ø­Ø« Ø¨Ø¯ÙˆÙ† FC
            const cleanName = clubName.replace(/\s+FC$/, '').replace(/\s+Football Club$/, '');
            const clubWithoutFC = logoDatabase.find(c => {
                const cleanEnglish = (c.englishName || '').replace(/\s+FC$/, '').replace(/\s+Football Club$/, '');
                const cleanArabic = (c.arabicName || '').replace(/\s+FC$/, '').replace(/\s+Football Club$/, '');
                return cleanEnglish === cleanName || cleanArabic === cleanName;
            });

            return clubWithoutFC ? clubWithoutFC.logoUrl : null;
        }

        // Ø§Ù„Ø¨Ø­Ø« Ø§Ù„Ø°ÙƒÙŠ Ù„Ù„Ø´Ø¹Ø§Ø± - Ù…Ø­Ø³Ù†
        function smartLogoSearch(clubName, logoDatabase) {
            if (!clubName || !logoDatabase) return null;

            const searchName = clubName.toLowerCase();

            // Ø§Ù„Ø¨Ø­Ø« Ø¨Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…ÙØªØ§Ø­ÙŠØ©
            const club = logoDatabase.find(c => {
                const englishName = (c.englishName || '').toLowerCase();
                const arabicName = (c.arabicName || '').toLowerCase();
                const name = (c.name || '').toLowerCase();

                return englishName.includes(searchName) ||
                       searchName.includes(englishName) ||
                       arabicName.includes(searchName) ||
                       name.includes(searchName);
            });

            return club ? club.logoUrl : null;
        }

        // Ø§Ù„Ø¨Ø­Ø« Ø¨Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…ÙØªØ§Ø­ÙŠØ© - Ø¬Ø¯ÙŠØ¯
        function keywordLogoSearch(clubName, logoDatabase) {
            if (!clubName || !logoDatabase) return null;

            const keywords = clubName.toLowerCase().split(' ').filter(word => word.length > 2);
            
            for (const keyword of keywords) {
                const club = logoDatabase.find(c => {
                    const englishName = (c.englishName || '').toLowerCase();
                    const arabicName = (c.arabicName || '').toLowerCase();
                    const name = (c.name || '').toLowerCase();

                    return englishName.includes(keyword) ||
                           arabicName.includes(keyword) ||
                           name.includes(keyword);
                });

                if (club && club.logoUrl) {
                    return club.logoUrl;
                }
            }

            return null;
        }

        // Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø© - Ø¬Ø¯ÙŠØ¯
        function searchInSavedData(clubName) {
            try {
                // Ø§Ù„Ø¨Ø­Ø« ÙÙŠ transfermarktRealData
                const realData = localStorage.getItem('transfermarktRealData');
                if (realData) {
                    const data = JSON.parse(realData);
                    if (data.clubs && Array.isArray(data.clubs)) {
                        const club = data.clubs.find(c => 
                            c.englishName === clubName || 
                            c.arabicName === clubName
                        );
                        if (club && club.logoUrl) {
                            return club.logoUrl;
                        }
                    }
                }

                // Ø§Ù„Ø¨Ø­Ø« ÙÙŠ transfermarktData
                const savedData = localStorage.getItem('transfermarktData');
                if (savedData) {
                    const data = JSON.parse(savedData);
                    if (Array.isArray(data)) {
                        const club = data.find(c => 
                            c.englishName === clubName || 
                            c.arabicName === clubName ||
                            c.name === clubName
                        );
                        if (club && club.logoUrl) {
                            return club.logoUrl;
                        }
                    }
                }

                return null;
            } catch (error) {
                console.warn('âš ï¸ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø©:', error);
                return null;
            }
        }

        // Ø¥Ù†Ø´Ø§Ø¡ Ø´Ø¹Ø§Ø± Ø§Ø­ØªÙŠØ§Ø·ÙŠ
        function generateFallbackLogo(clubName) {
            const initials = clubName.split(' ')
                .map(word => word.charAt(0))
                .join('')
                .substring(0, 2)
                .toUpperCase();

            return `https://ui-avatars.com/api/?name=${encodeURIComponent(initials)}&size=400&background=1a1a2e&color=ffd700&bold=true&format=png&rounded=true&font-size=0.6`;
        }

        // Ø¹Ø±Ø¶ Ø§Ù„Ø£Ù†Ø¯ÙŠØ© Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ©
        function displayRealClubs(clubs) {
            const grid = document.getElementById('clubsGrid');
            grid.innerHTML = '';

            clubs.forEach(club => {
                const clubCard = createRealClubCard(club);
                grid.appendChild(clubCard);
            });

            console.log(`âœ… ØªÙ… Ø¹Ø±Ø¶ ${clubs.length} Ù†Ø§Ø¯ÙŠ`);
        }

        // Ø¥Ù†Ø´Ø§Ø¡ Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ù†Ø§Ø¯ÙŠ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ©
        function createRealClubCard(club) {
            const card = document.createElement('div');
            card.className = 'club-card';

            card.innerHTML = `
                <div class="club-header">
                    <img src="${club.logoUrl}" alt="${club.arabicName}" class="club-logo"
                         onerror="this.src='${generateFallbackLogo(club.englishName)}'">
                    <div class="club-info">
                        <h3>${club.arabicName}</h3>
                        <div class="club-rank">Ø§Ù„Ù…Ø±ÙƒØ² ${club.rank}</div>
                    </div>
                </div>
                <div class="club-stats">
                    <div class="stat-item">
                        <div class="stat-label">Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª</div>
                        <div class="stat-value expenditure-highlight">${club.expenditure}</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª</div>
                        <div class="stat-value">${club.income}</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ©</div>
                        <div class="stat-value">${club.balance}</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">Ø§Ù„Ø¯ÙˆØ±ÙŠ</div>
                        <div class="stat-value">${club.league}</div>
                    </div>
                </div>
                <div style="margin-top: 10px; text-align: center;">
                    <span class="real-data-badge">
                        <i class="fas fa-satellite-dish"></i>
                        Ø¨ÙŠØ§Ù†Ø§Øª Ø­Ù‚ÙŠÙ‚ÙŠØ©
                    </span>
                </div>
            `;

            return card;
        }

        // Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ©
        function saveRealData(clubs) {
            try {
                const dataToSave = {
                    clubs: clubs,
                    lastUpdate: new Date().toISOString(),
                    source: 'transfermarkt-real-time',
                    version: '2025.1.0'
                };

                localStorage.setItem('transfermarktRealData', JSON.stringify(dataToSave));
                localStorage.setItem('transfermarktData', JSON.stringify(clubs)); // Ù„Ù„ØªÙˆØ§ÙÙ‚ Ù…Ø¹ Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù‚Ø¯ÙŠÙ…
                localStorage.setItem('transfermarktLastUpdate', new Date().toISOString());

                // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙÙˆØ±Ø§Ù‹ Ù„Ø£ÙŠ ØµÙØ­Ø© Ù…Ø³ØªÙ‚Ø¨ÙÙ„Ø© (Ù…Ø«Ù„ ØµÙØ­Ø© OBS)
                try {
                    window.postMessage({
                        type: 'REAL_DATA_UPDATED',
                        source: 'transfermarkt-real-data',
                        payload: dataToSave
                    }, '*');
                } catch (e) {
                    console.warn('âš ï¸ ØªØ¹Ø°Ø± Ø¥Ø±Ø³Ø§Ù„ REAL_DATA_UPDATED:', e);
                }

                console.log('ğŸ’¾ ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ©');
            } catch (error) {
                console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:', error);
            }
        }

        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø© Ø¹Ù†Ø¯ Ø¨Ø¯Ø¡ Ø§Ù„ØµÙØ­Ø©
        function loadSavedRealData() {
            try {
                const savedData = localStorage.getItem('transfermarktRealData');

                if (savedData) {
                    const data = JSON.parse(savedData);

                    if (data.clubs && Array.isArray(data.clubs) && data.clubs.length > 0) {
                        currentRealData = data.clubs;
                        displayRealClubs(data.clubs);
                        updateLastUpdatedTime(data.lastUpdate);

                        // Ø¥Ø¸Ù‡Ø§Ø± Ø²Ø± Ø§Ù„Ø­ÙØ¸ Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ù‡Ù†Ø§Ùƒ Ø¨ÙŠØ§Ù†Ø§Øª
                        document.getElementById('saveBtn').style.display = 'inline-flex';

                        console.log(`âœ… ØªÙ… ØªØ­Ù…ÙŠÙ„ ${data.clubs.length} Ù†Ø§Ø¯ÙŠ Ù…Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø©`);
                        showSuccess(`ØªÙ… ØªØ­Ù…ÙŠÙ„ ${data.clubs.length} Ù†Ø§Ø¯ÙŠ Ù…Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø©`);

                        // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø¹Ù…Ø± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
                        const lastUpdate = new Date(data.lastUpdate);
                        const now = new Date();
                        const diffHours = Math.floor((now - lastUpdate) / (1000 * 60 * 60));

                        if (diffHours > 24) {
                            showSuccess('Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù‚Ø¯ÙŠÙ…Ø© - ÙŠÙÙ†ØµØ­ Ø¨Ø§Ù„ØªØ­Ø¯ÙŠØ«', 'warning');
                        }

                        return;
                    }
                }

                // Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø­ÙÙˆØ¸Ø©
                document.getElementById('clubsGrid').innerHTML = `
                    <div style="grid-column: 1 / -1; text-align: center; padding: 3rem; color: #94a3b8;">
                        <i class="fas fa-database" style="font-size: 3rem; margin-bottom: 1rem; color: #ffd700;"></i>
                        <h3>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø­ÙÙˆØ¸Ø©</h3>
                        <p>Ø§Ø¶ØºØ· "ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¢Ù†" Ù„Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø£Ø­Ø¯Ø« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Transfermarkt</p>
                        <p><small>Ø£Ùˆ Ø§Ø¶ØºØ· "ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø©" Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ù„Ø¯ÙŠÙƒ Ø¨ÙŠØ§Ù†Ø§Øª Ø³Ø§Ø¨Ù‚Ø©</small></p>
                    </div>
                `;

            } catch (error) {
                console.error('âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø©:', error);
                document.getElementById('clubsGrid').innerHTML = `
                    <div style="grid-column: 1 / -1; text-align: center; padding: 3rem; color: #ef4444;">
                        <i class="fas fa-exclamation-triangle" style="font-size: 3rem; margin-bottom: 1rem;"></i>
                        <h3>Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</h3>
                        <p>Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø©</p>
                    </div>
                `;
            }
        }

        // ØªØµØ¯ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ©
        function exportRealData() {
            try {
                if (!currentRealData || currentRealData.length === 0) {
                    showError('Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù„ØªØµØ¯ÙŠØ±. ÙŠØ±Ø¬Ù‰ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø£ÙˆÙ„Ø§Ù‹.');
                    return;
                }

                const exportData = {
                    title: 'Ø£ÙƒØ«Ø± 10 Ø£Ù†Ø¯ÙŠØ© ØµØ±ÙØ§Ù‹ ÙÙŠ Ø³ÙˆÙ‚ Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„Ø§Øª 2025',
                    source: 'Transfermarkt',
                    extractedAt: new Date().toISOString(),
                    clubs: currentRealData,
                    totalClubs: currentRealData.length
                };

                const blob = new Blob([JSON.stringify(exportData, null, 2)], {
                    type: 'application/json'
                });

                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `transfermarkt-real-data-${new Date().toISOString().split('T')[0]}.json`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);

                showSuccess('ØªÙ… ØªØµØ¯ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ© Ø¨Ù†Ø¬Ø§Ø­!');

            } catch (error) {
                console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØµØ¯ÙŠØ±:', error);
                showError('ÙØ´Ù„ ÙÙŠ ØªØµØ¯ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª');
            }
        }

        // Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ© ÙŠØ¯ÙˆÙŠØ§Ù‹
        function saveCurrentData() {
            try {
                if (!currentRealData || currentRealData.length === 0) {
                    showError('Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù„Ø­ÙØ¸. ÙŠØ±Ø¬Ù‰ Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø£ÙˆÙ„Ø§Ù‹.');
                    return;
                }

                // Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù…ÙˆØ­Ø¯ Ù„Ù„Ø­ÙØ¸
                if (window.transfermarktSystem) {
                    const success = window.transfermarktSystem.saveData(currentRealData, 'manual-save');

                    if (success) {
                        showSuccess(`ØªÙ… Ø­ÙØ¸ ${currentRealData.length} Ù†Ø§Ø¯ÙŠ Ø¨Ù†Ø¬Ø§Ø­!`);

                        // Ø¥Ø®ÙØ§Ø¡ Ø²Ø± Ø§Ù„Ø­ÙØ¸
                        document.getElementById('saveBtn').style.display = 'none';

                        console.log('ğŸ’¾ ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙŠØ¯ÙˆÙŠØ§Ù‹ Ø¹Ø¨Ø± Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù…ÙˆØ­Ø¯');
                    } else {
                        throw new Error('ÙØ´Ù„ ÙÙŠ Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¹Ø¨Ø± Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù…ÙˆØ­Ø¯');
                    }
                } else {
                    // Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„ØªÙ‚Ù„ÙŠØ¯ÙŠØ© Ù„Ù„Ø­ÙØ¸
                    const dataToSave = {
                        clubs: currentRealData,
                        lastUpdate: new Date().toISOString(),
                        source: 'manual-save',
                        version: '2025.2.0',
                        savedAt: new Date().toISOString()
                    };

                    localStorage.setItem('transfermarktRealData', JSON.stringify(dataToSave));
                    localStorage.setItem('transfermarktData', JSON.stringify(currentRealData));
                    localStorage.setItem('transfermarktLastUpdate', new Date().toISOString());

                    // Ø¥Ø±Ø³Ø§Ù„ Ø¥Ø´Ø¹Ø§Ø± Ù„Ù„ØµÙØ­Ø§Øª Ø§Ù„Ø£Ø®Ø±Ù‰
                    if ('BroadcastChannel' in window) {
                        const channel = new BroadcastChannel('transfermarkt-updates');
                        channel.postMessage({
                            type: 'data-saved',
                            timestamp: new Date().toISOString(),
                            clubsCount: currentRealData.length
                        });
                        channel.close();
                    }

                    showSuccess(`ØªÙ… Ø­ÙØ¸ ${currentRealData.length} Ù†Ø§Ø¯ÙŠ Ø¨Ù†Ø¬Ø§Ø­!`);

                    // Ø¥Ø®ÙØ§Ø¡ Ø²Ø± Ø§Ù„Ø­ÙØ¸
                    document.getElementById('saveBtn').style.display = 'none';

                    console.log('ğŸ’¾ ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙŠØ¯ÙˆÙŠØ§Ù‹');
                }

            } catch (error) {
                console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:', error);
                showError('ÙØ´Ù„ ÙÙŠ Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª');
            }
        }

        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø©
        function loadSavedData() {
            try {
                const savedData = localStorage.getItem('transfermarktRealData');

                if (!savedData) {
                    showError('Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø­ÙÙˆØ¸Ø©');
                    return;
                }

                const data = JSON.parse(savedData);

                if (!data.clubs || !Array.isArray(data.clubs) || data.clubs.length === 0) {
                    showError('Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø© ØªØ§Ù„ÙØ© Ø£Ùˆ ÙØ§Ø±ØºØ©');
                    return;
                }

                currentRealData = data.clubs;
                displayRealClubs(data.clubs);
                updateLastUpdatedTime(data.lastUpdate);

                showSuccess(`ØªÙ… ØªØ­Ù…ÙŠÙ„ ${data.clubs.length} Ù†Ø§Ø¯ÙŠ Ù…Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø©`);

                // Ø¥Ø¸Ù‡Ø§Ø± Ø²Ø± Ø§Ù„Ø­ÙØ¸
                document.getElementById('saveBtn').style.display = 'inline-flex';

                console.log(`âœ… ØªÙ… ØªØ­Ù…ÙŠÙ„ ${data.clubs.length} Ù†Ø§Ø¯ÙŠ Ù…Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø©`);

            } catch (error) {
                console.error('âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:', error);
                showError('ÙØ´Ù„ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø©');
            }
        }

        // ÙØªØ­ ØµÙØ­Ø© Ø§Ù„Ø¹Ø±Ø¶
        function openDisplayPage() {
            window.open('/obs-new-tols/transfermarkt-ultimate-display-fixed.html', '_blank');
        }

        // ÙØªØ­ Ù…Ø¯ÙŠØ± Ø§Ù„Ø´Ø¹Ø§Ø±Ø§Øª
        function openLogoManager() {
            window.open('/club-logo-manager.html', '_blank');
        }

        // ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø©
        function showLoading(show) {
            const overlay = document.getElementById('loadingOverlay');
            const progressSection = document.getElementById('progressSection');

            overlay.style.display = show ? 'flex' : 'none';
            progressSection.style.display = show ? 'block' : 'none';
        }

        function updateProgress(percent, text) {
            const progressFill = document.getElementById('progressFill');
            const progressText = document.getElementById('progressText');
            const loadingStatus = document.getElementById('loadingStatus');

            progressFill.style.width = percent + '%';
            progressText.textContent = text;
            if (loadingStatus) loadingStatus.textContent = text;
        }

        function showError(message) {
            const errorDiv = document.getElementById('errorMessage');
            const errorText = document.getElementById('errorText');
            const successDiv = document.getElementById('successMessage');

            errorText.textContent = message;
            errorDiv.style.display = 'block';
            successDiv.style.display = 'none';

            setTimeout(() => {
                errorDiv.style.display = 'none';
            }, 5000);
        }

        function showSuccess(message) {
            const successDiv = document.getElementById('successMessage');
            const successText = document.getElementById('successText');
            const errorDiv = document.getElementById('errorMessage');

            successText.textContent = message;
            successDiv.style.display = 'block';
            errorDiv.style.display = 'none';

            setTimeout(() => {
                successDiv.style.display = 'none';
            }, 3000);
        }

        function updateLastUpdatedTime(customTime) {
            const lastUpdatedDiv = document.getElementById('lastUpdated');
            const time = customTime ? new Date(customTime) : new Date();

            lastUpdatedDiv.innerHTML = `
                <i class="fas fa-clock"></i>
                Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ«: ${time.toLocaleString('ar-SA')}
                <br>
                <small>Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø³ØªØ®Ø±Ø¬Ø© Ù…Ø¨Ø§Ø´Ø±Ø© Ù…Ù† Transfermarkt</small>
            `;
        }

        // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ Ø§Ù„Ø¹Ø§Ù…Ø©
        window.addEventListener('error', function(event) {
            console.error('Ø®Ø·Ø£ JavaScript:', event.error);
        });

        console.log('âœ… ØªÙ… ØªØ­Ù…ÙŠÙ„ Ù†Ø¸Ø§Ù… Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ© Ø¨Ù†Ø¬Ø§Ø­');
    </script>
  <script>
    // Ù…Ø³ØªÙ„Ù… Ø·Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† ØµÙØ­Ø§Øª Ø£Ø®Ø±Ù‰ (Ù…Ø«Ù„ OBS Bridge/Ultimate)
    window.addEventListener('message', function(event) {
      try {
        const data = event.data;
        if (!data || typeof data !== 'object') return;
        if (data.type === 'REQUEST_REAL_DATA') {
          // Ø­Ø§ÙˆÙ„ Ø¥Ø±Ø³Ø§Ù„ currentRealData Ø¥Ù† ÙƒØ§Ù†Øª Ù…ØªÙˆÙØ±Ø©ØŒ ÙˆØ¥Ù„Ø§ Ù…Ù† localStorage
          let toSend = null;
          try {
            if (typeof currentRealData !== 'undefined' && Array.isArray(currentRealData) && currentRealData.length > 0) {
              toSend = { clubs: currentRealData, lastUpdate: new Date().toISOString(), source: 'real-page-memory' };
            }
          } catch {}
          if (!toSend) {
            try {
              const raw = localStorage.getItem('transfermarktRealData');
              if (raw) {
                const parsed = JSON.parse(raw);
                if (parsed && parsed.clubs && parsed.clubs.length > 0) {
                  toSend = parsed;
                }
              }
            } catch {}
          }
          if (toSend) {
            try {
              window.postMessage({ type: 'REAL_DATA_UPDATED', source: 'transfermarkt-real-data', payload: toSend }, '*');
              console.log('ğŸ“¨ ØªÙ… Ø¥Ø±Ø³Ø§Ù„ REAL_DATA_UPDATED ÙƒØ±Ø¯ Ø¹Ù„Ù‰ REQUEST_REAL_DATA');
            } catch (e) { console.warn('âš ï¸ ØªØ¹Ø°Ø± Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø¯:', e); }
          } else {
            console.warn('âš ï¸ Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ø­Ù‚ÙŠÙ‚ÙŠØ© Ù„Ø¥Ø±Ø³Ø§Ù„Ù‡Ø§ Ø­Ø§Ù„ÙŠØ§Ù‹');
          }
        }
      } catch (e) {
        console.warn('âš ï¸ Ø®Ø·Ø£ ÙÙŠ Ù…Ø³ØªÙ„Ù… Ø§Ù„Ø±Ø³Ø§Ø¦Ù„:', e);
      }
    });
  </script>
</body>
</html>
