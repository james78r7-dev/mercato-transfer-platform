<!DOCTYPE html>
<html dir="rtl" lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ” Ø£Ø¯Ø§Ø© ØªØ´Ø®ÙŠØµ Ù…Ø´ÙƒÙ„Ø© Ø§Ù„Ø´Ø¹Ø§Ø±Ø§Øª</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: #1a1a2e;
            color: #fff;
            padding: 20px;
            line-height: 1.6;
        }
        .debug-section {
            background: #2d2d2d;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            border: 1px solid #444;
        }
        .debug-title {
            color: #ffd700;
            font-size: 1.2em;
            margin-bottom: 15px;
            border-bottom: 2px solid #ffd700;
            padding-bottom: 5px;
        }
        .debug-content {
            background: #1a1a1a;
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
            font-family: monospace;
            white-space: pre-wrap;
            max-height: 300px;
            overflow-y: auto;
        }
        .error {
            color: #ff6b6b;
        }
        .success {
            color: #51cf66;
        }
        .warning {
            color: #ffd43b;
        }
        .info {
            color: #74c0fc;
        }
        .logo-preview {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            object-fit: cover;
            border: 2px solid #ffd700;
            margin: 5px;
        }
        .club-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px;
            background: #333;
            margin: 5px 0;
            border-radius: 5px;
        }
        .btn {
            background: #ffd700;
            color: #1a1a2e;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
            font-weight: bold;
        }
        .btn:hover {
            background: #ffed4e;
        }
    </style>
</head>
<body>
    <h1>ğŸ” Ø£Ø¯Ø§Ø© ØªØ´Ø®ÙŠØµ Ù…Ø´ÙƒÙ„Ø© Ø§Ù„Ø´Ø¹Ø§Ø±Ø§Øª</h1>
    
    <div class="debug-section">
        <div class="debug-title">ğŸ“Š ÙØ­Øµ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø©</div>
        <button class="btn" onclick="checkAllData()">ÙØ­Øµ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</button>
        <button class="btn" onclick="fixLogoData()">Ø¥ØµÙ„Ø§Ø­ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø´Ø¹Ø§Ø±Ø§Øª</button>
        <button class="btn" onclick="syncWithClubManager()">Ù…Ø²Ø§Ù…Ù†Ø© Ù…Ø¹ Ù…Ø¯ÙŠØ± Ø§Ù„Ø´Ø¹Ø§Ø±Ø§Øª</button>
        <div id="dataCheckResult"></div>
    </div>

    <div class="debug-section">
        <div class="debug-title">ğŸ¨ ÙØ­Øµ Ù‚Ø§Ø¹Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø´Ø¹Ø§Ø±Ø§Øª</div>
        <div id="logoDatabaseResult"></div>
    </div>

    <div class="debug-section">
        <div class="debug-title">ğŸ” Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ø´Ø¹Ø§Ø±Ø§Øª</div>
        <input type="text" id="testClubName" placeholder="Ø§Ø³Ù… Ø§Ù„Ù†Ø§Ø¯ÙŠ Ù„Ù„Ø§Ø®ØªØ¨Ø§Ø±" style="padding: 10px; margin: 10px; width: 300px; background: #333; color: #fff; border: 1px solid #555; border-radius: 5px;">
        <button class="btn" onclick="testLogoSearch()">Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø¨Ø­Ø«</button>
        <div id="testResult"></div>
    </div>

    <div class="debug-section">
        <div class="debug-title">ğŸ“‹ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø£Ù†Ø¯ÙŠØ© Ù…Ø¹ Ø§Ù„Ø´Ø¹Ø§Ø±Ø§Øª</div>
        <div id="clubsList"></div>
    </div>

    <script>
        // ÙØ­Øµ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø©
        function checkAllData() {
            const resultDiv = document.getElementById('dataCheckResult');
            let result = '';

            // ÙØ­Øµ clubManagerData
            const clubManagerData = localStorage.getItem('clubManagerData');
            if (clubManagerData) {
                try {
                    const data = JSON.parse(clubManagerData);
                    result += `âœ… clubManagerData Ù…ÙˆØ¬ÙˆØ¯: ${data.length} Ù†Ø§Ø¯ÙŠ\n`;
                    
                    const clubsWithLogos = data.filter(club => club.logoUrl);
                    result += `   - ${clubsWithLogos.length} Ù†Ø§Ø¯ÙŠ Ù…Ø¹ Ø´Ø¹Ø§Ø±Ø§Øª\n`;
                    result += `   - ${data.length - clubsWithLogos.length} Ù†Ø§Ø¯ÙŠ Ø¨Ø¯ÙˆÙ† Ø´Ø¹Ø§Ø±Ø§Øª\n`;
                    
                    // Ø¹Ø±Ø¶ Ø£ÙˆÙ„ 3 Ø£Ù†Ø¯ÙŠØ©
                    result += '\nØ£Ù…Ø«Ù„Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù†Ø¯ÙŠØ©:\n';
                    data.slice(0, 3).forEach((club, index) => {
                        result += `   ${index + 1}. ${club.arabicName || club.englishName} - ${club.logoUrl ? 'âœ…' : 'âŒ'}\n`;
                    });
                } catch (e) {
                    result += `âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù„ÙŠÙ„ clubManagerData: ${e.message}\n`;
                }
            } else {
                result += `âŒ clubManagerData ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯\n`;
            }

            // ÙØ­Øµ verifiedClubs
            const verifiedClubs = localStorage.getItem('verifiedClubs');
            if (verifiedClubs) {
                try {
                    const data = JSON.parse(verifiedClubs);
                    result += `\nâœ… verifiedClubs Ù…ÙˆØ¬ÙˆØ¯: ${data.length} Ù†Ø§Ø¯ÙŠ\n`;
                    
                    const clubsWithLogos = data.filter(club => club.logoUrl);
                    result += `   - ${clubsWithLogos.length} Ù†Ø§Ø¯ÙŠ Ù…Ø¹ Ø´Ø¹Ø§Ø±Ø§Øª\n`;
                    result += `   - ${data.length - clubsWithLogos.length} Ù†Ø§Ø¯ÙŠ Ø¨Ø¯ÙˆÙ† Ø´Ø¹Ø§Ø±Ø§Øª\n`;
                } catch (e) {
                    result += `\nâŒ Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù„ÙŠÙ„ verifiedClubs: ${e.message}\n`;
                }
            } else {
                result += `\nâŒ verifiedClubs ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯\n`;
            }

            // ÙØ­Øµ transfermarktData
            const transfermarktData = localStorage.getItem('transfermarktData');
            if (transfermarktData) {
                try {
                    const data = JSON.parse(transfermarktData);
                    result += `\nâœ… transfermarktData Ù…ÙˆØ¬ÙˆØ¯: ${data.length} Ù†Ø§Ø¯ÙŠ\n`;
                    
                    const clubsWithLogos = data.filter(club => club.logoUrl);
                    result += `   - ${clubsWithLogos.length} Ù†Ø§Ø¯ÙŠ Ù…Ø¹ Ø´Ø¹Ø§Ø±Ø§Øª\n`;
                    result += `   - ${data.length - clubsWithLogos.length} Ù†Ø§Ø¯ÙŠ Ø¨Ø¯ÙˆÙ† Ø´Ø¹Ø§Ø±Ø§Øª\n`;
                } catch (e) {
                    result += `\nâŒ Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù„ÙŠÙ„ transfermarktData: ${e.message}\n`;
                }
            } else {
                result += `\nâŒ transfermarktData ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯\n`;
            }

            // ÙØ­Øµ transfermarktRealData
            const transfermarktRealData = localStorage.getItem('transfermarktRealData');
            if (transfermarktRealData) {
                try {
                    const data = JSON.parse(transfermarktRealData);
                    result += `\nâœ… transfermarktRealData Ù…ÙˆØ¬ÙˆØ¯: ${data.clubs ? data.clubs.length : 0} Ù†Ø§Ø¯ÙŠ\n`;
                    
                    if (data.clubs) {
                        const clubsWithLogos = data.clubs.filter(club => club.logoUrl);
                        result += `   - ${clubsWithLogos.length} Ù†Ø§Ø¯ÙŠ Ù…Ø¹ Ø´Ø¹Ø§Ø±Ø§Øª\n`;
                        result += `   - ${data.clubs.length - clubsWithLogos.length} Ù†Ø§Ø¯ÙŠ Ø¨Ø¯ÙˆÙ† Ø´Ø¹Ø§Ø±Ø§Øª\n`;
                    }
                } catch (e) {
                    result += `\nâŒ Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù„ÙŠÙ„ transfermarktRealData: ${e.message}\n`;
                }
            } else {
                result += `\nâŒ transfermarktRealData ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯\n`;
            }

            resultDiv.innerHTML = `<div class="debug-content">${result}</div>`;
        }

        // Ø¥ØµÙ„Ø§Ø­ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø´Ø¹Ø§Ø±Ø§Øª
        function fixLogoData() {
            const resultDiv = document.getElementById('dataCheckResult');
            let result = '';

            try {
                // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† clubManagerData
                const clubManagerData = localStorage.getItem('clubManagerData');
                if (clubManagerData) {
                    const data = JSON.parse(clubManagerData);
                    const clubsWithLogos = data.filter(club => club.logoUrl);
                    
                    // Ù†Ø³Ø® Ø§Ù„Ø´Ø¹Ø§Ø±Ø§Øª Ø¥Ù„Ù‰ transfermarktData
                    const transfermarktData = localStorage.getItem('transfermarktData');
                    if (transfermarktData) {
                        const tmData = JSON.parse(transfermarktData);
                        let updated = false;
                        
                        tmData.forEach(tmClub => {
                            const matchingClub = clubsWithLogos.find(cmClub => 
                                cmClub.englishName === tmClub.englishName ||
                                cmClub.arabicName === tmClub.arabicName ||
                                cmClub.arabicName === tmClub.name
                            );
                            
                            if (matchingClub && matchingClub.logoUrl && !tmClub.logoUrl) {
                                tmClub.logoUrl = matchingClub.logoUrl;
                                updated = true;
                                result += `âœ… ØªÙ… Ø±Ø¨Ø· Ø´Ø¹Ø§Ø± ${tmClub.englishName || tmClub.arabicName}\n`;
                            }
                        });
                        
                        if (updated) {
                            localStorage.setItem('transfermarktData', JSON.stringify(tmData));
                            result += `\nâœ… ØªÙ… ØªØ­Ø¯ÙŠØ« transfermarktData\n`;
                        }
                    }

                    // Ù†Ø³Ø® Ø§Ù„Ø´Ø¹Ø§Ø±Ø§Øª Ø¥Ù„Ù‰ transfermarktRealData
                    const transfermarktRealData = localStorage.getItem('transfermarktRealData');
                    if (transfermarktRealData) {
                        const tmRealData = JSON.parse(transfermarktRealData);
                        if (tmRealData.clubs) {
                            let updated = false;
                            
                            tmRealData.clubs.forEach(tmClub => {
                                const matchingClub = clubsWithLogos.find(cmClub => 
                                    cmClub.englishName === tmClub.englishName ||
                                    cmClub.arabicName === tmClub.arabicName
                                );
                                
                                if (matchingClub && matchingClub.logoUrl && !tmClub.logoUrl) {
                                    tmClub.logoUrl = matchingClub.logoUrl;
                                    updated = true;
                                    result += `âœ… ØªÙ… Ø±Ø¨Ø· Ø´Ø¹Ø§Ø± ${tmClub.englishName || tmClub.arabicName}\n`;
                                }
                            });
                            
                            if (updated) {
                                localStorage.setItem('transfermarktRealData', JSON.stringify(tmRealData));
                                result += `\nâœ… ØªÙ… ØªØ­Ø¯ÙŠØ« transfermarktRealData\n`;
                            }
                        }
                    }
                }

                result += `\nâœ… ØªÙ… Ø¥ØµÙ„Ø§Ø­ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø´Ø¹Ø§Ø±Ø§Øª Ø¨Ù†Ø¬Ø§Ø­!`;
                
            } catch (error) {
                result += `\nâŒ Ø®Ø·Ø£ ÙÙŠ Ø¥ØµÙ„Ø§Ø­ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª: ${error.message}`;
            }

            resultDiv.innerHTML = `<div class="debug-content">${result}</div>`;
        }

        // Ù…Ø²Ø§Ù…Ù†Ø© Ù…Ø¹ Ù…Ø¯ÙŠØ± Ø§Ù„Ø´Ø¹Ø§Ø±Ø§Øª
        function syncWithClubManager() {
            const resultDiv = document.getElementById('dataCheckResult');
            let result = '';

            try {
                // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† clubManagerData
                const clubManagerData = localStorage.getItem('clubManagerData');
                if (clubManagerData) {
                    const data = JSON.parse(clubManagerData);
                    
                    // Ø­ÙØ¸ ÙÙŠ verifiedClubs Ø£ÙŠØ¶Ø§Ù‹
                    localStorage.setItem('verifiedClubs', JSON.stringify(data));
                    result += `âœ… ØªÙ… Ù…Ø²Ø§Ù…Ù†Ø© ${data.length} Ù†Ø§Ø¯ÙŠ Ù…Ø¹ verifiedClubs\n`;
                    
                    // Ø¥Ù†Ø´Ø§Ø¡ Ù‚Ø§Ø¹Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ù…ÙˆØ­Ø¯Ø©
                    const unifiedData = {
                        clubs: data,
                        lastUpdate: new Date().toISOString(),
                        source: 'club-manager-sync',
                        version: '2025.1.0'
                    };
                    
                    localStorage.setItem('unifiedLogoDatabase', JSON.stringify(unifiedData));
                    result += `âœ… ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ù‚Ø§Ø¹Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ù…ÙˆØ­Ø¯Ø©\n`;
                    
                    result += `\nâœ… ØªÙ…Øª Ø§Ù„Ù…Ø²Ø§Ù…Ù†Ø© Ø¨Ù†Ø¬Ø§Ø­!`;
                } else {
                    result += `âŒ Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª ÙÙŠ clubManagerData`;
                }
                
            } catch (error) {
                result += `\nâŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ù…Ø²Ø§Ù…Ù†Ø©: ${error.message}`;
            }

            resultDiv.innerHTML = `<div class="debug-content">${result}</div>`;
        }

        // Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ø´Ø¹Ø§Ø±Ø§Øª
        function testLogoSearch() {
            const clubName = document.getElementById('testClubName').value;
            const resultDiv = document.getElementById('testResult');
            
            if (!clubName) {
                resultDiv.innerHTML = '<div class="debug-content error">ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø§Ù„Ù†Ø§Ø¯ÙŠ</div>';
                return;
            }

            let result = `ğŸ” Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø¨Ø­Ø« Ø¹Ù†: ${clubName}\n\n`;

            // Ø§Ù„Ø¨Ø­Ø« ÙÙŠ clubManagerData
            const clubManagerData = localStorage.getItem('clubManagerData');
            if (clubManagerData) {
                try {
                    const data = JSON.parse(clubManagerData);
                    const club = data.find(c => 
                        c.englishName === clubName ||
                        c.arabicName === clubName ||
                        c.name === clubName
                    );
                    
                    if (club) {
                        result += `âœ… ØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± ÙÙŠ clubManagerData:\n`;
                        result += `   Ø§Ù„Ø§Ø³Ù…: ${club.arabicName || club.englishName}\n`;
                        result += `   Ø§Ù„Ø´Ø¹Ø§Ø±: ${club.logoUrl ? 'âœ… Ù…ÙˆØ¬ÙˆØ¯' : 'âŒ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯'}\n`;
                        if (club.logoUrl) {
                            result += `   Ø§Ù„Ø±Ø§Ø¨Ø·: ${club.logoUrl}\n`;
                        }
                    } else {
                        result += `âŒ Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± ÙÙŠ clubManagerData\n`;
                    }
                } catch (e) {
                    result += `âŒ Ø®Ø·Ø£ ÙÙŠ clubManagerData: ${e.message}\n`;
                }
            }

            // Ø§Ù„Ø¨Ø­Ø« ÙÙŠ transfermarktData
            const transfermarktData = localStorage.getItem('transfermarktData');
            if (transfermarktData) {
                try {
                    const data = JSON.parse(transfermarktData);
                    const club = data.find(c => 
                        c.englishName === clubName ||
                        c.arabicName === clubName ||
                        c.name === clubName
                    );
                    
                    if (club) {
                        result += `\nâœ… ØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± ÙÙŠ transfermarktData:\n`;
                        result += `   Ø§Ù„Ø§Ø³Ù…: ${club.arabicName || club.englishName}\n`;
                        result += `   Ø§Ù„Ø´Ø¹Ø§Ø±: ${club.logoUrl ? 'âœ… Ù…ÙˆØ¬ÙˆØ¯' : 'âŒ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯'}\n`;
                        if (club.logoUrl) {
                            result += `   Ø§Ù„Ø±Ø§Ø¨Ø·: ${club.logoUrl}\n`;
                        }
                    } else {
                        result += `\nâŒ Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± ÙÙŠ transfermarktData\n`;
                    }
                } catch (e) {
                    result += `\nâŒ Ø®Ø·Ø£ ÙÙŠ transfermarktData: ${e.message}\n`;
                }
            }

            resultDiv.innerHTML = `<div class="debug-content">${result}</div>`;
        }

        // Ø¹Ø±Ø¶ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø£Ù†Ø¯ÙŠØ© Ù…Ø¹ Ø§Ù„Ø´Ø¹Ø§Ø±Ø§Øª
        function displayClubsList() {
            const resultDiv = document.getElementById('clubsList');
            let result = '';

            const clubManagerData = localStorage.getItem('clubManagerData');
            if (clubManagerData) {
                try {
                    const data = JSON.parse(clubManagerData);
                    const clubsWithLogos = data.filter(club => club.logoUrl);
                    
                    result += `<h3>Ø§Ù„Ø£Ù†Ø¯ÙŠØ© Ù…Ø¹ Ø§Ù„Ø´Ø¹Ø§Ø±Ø§Øª (${clubsWithLogos.length})</h3>`;
                    
                    clubsWithLogos.forEach(club => {
                        result += `
                            <div class="club-item">
                                <img src="${club.logoUrl}" alt="${club.arabicName || club.englishName}" class="logo-preview" onerror="this.style.display='none'">
                                <div>
                                    <strong>${club.arabicName || club.englishName}</strong><br>
                                    <small>${club.englishName || ''}</small><br>
                                    <small class="info">${club.logoUrl}</small>
                                </div>
                            </div>
                        `;
                    });
                    
                } catch (e) {
                    result += `<div class="error">Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª: ${e.message}</div>`;
                }
            } else {
                result += `<div class="error">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª ÙÙŠ clubManagerData</div>`;
            }

            resultDiv.innerHTML = result;
        }

        // ØªØ´ØºÙŠÙ„ Ø§Ù„ÙØ­Øµ Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
        window.onload = function() {
            checkAllData();
            displayClubsList();
        };
    </script>
</body>
</html> 