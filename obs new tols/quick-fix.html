<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ”§ Ø¥ØµÙ„Ø§Ø­ Ø³Ø±ÙŠØ¹ Ù„Ù„Ù…Ø´Ø§ÙƒÙ„</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: #fff;
            padding: 20px;
            margin: 0;
            min-height: 100vh;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
        }
        .fix-card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
            border: 1px solid rgba(255, 215, 0, 0.3);
            backdrop-filter: blur(10px);
        }
        .fix-button {
            background: linear-gradient(45deg, #ffd700, #ffed4e);
            color: #1a1a2e;
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            margin: 10px 5px;
            transition: all 0.3s ease;
        }
        .fix-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 215, 0, 0.4);
        }
        .status {
            padding: 10px;
            border-radius: 8px;
            margin: 10px 0;
        }
        .success { background: rgba(16, 185, 129, 0.2); border-left: 4px solid #10b981; }
        .error { background: rgba(239, 68, 68, 0.2); border-left: 4px solid #ef4444; }
        .warning { background: rgba(245, 158, 11, 0.2); border-left: 4px solid #f59e0b; }
        .info { background: rgba(59, 130, 246, 0.2); border-left: 4px solid #3b82f6; }
        .progress {
            width: 100%;
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            overflow: hidden;
            margin: 10px 0;
        }
        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #ffd700, #ffed4e);
            width: 0%;
            transition: width 0.3s ease;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ”§ Ø¥ØµÙ„Ø§Ø­ Ø³Ø±ÙŠØ¹ Ù„Ù…Ø´Ø§ÙƒÙ„ Ù†Ø¸Ø§Ù… Transfermarkt</h1>
        
        <div class="fix-card">
            <h2>ğŸš¨ Ø§Ù„Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„Ù…ÙƒØªØ´ÙØ©</h2>
            <div id="problems-list">
                <div class="status error">âŒ Ù†Ø¸Ø§Ù… Ø§Ù„Ø´Ø¹Ø§Ø±Ø§Øª ØºÙŠØ± Ù…Ø­Ù…Ù„</div>
                <div class="status error">âŒ Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ù„Ø§ ØªØ¹Ù…Ù„ ÙÙŠ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</div>
                <div class="status warning">âš ï¸ transfermarktLastUpdate ØªØ§Ù„Ù</div>
            </div>
        </div>

        <div class="fix-card">
            <h2>ğŸ› ï¸ Ø¥ØµÙ„Ø§Ø­Ø§Øª Ø³Ø±ÙŠØ¹Ø©</h2>
            
            <button class="fix-button" onclick="fixLogoSystem()">
                Ø¥ØµÙ„Ø§Ø­ Ù†Ø¸Ø§Ù… Ø§Ù„Ø´Ø¹Ø§Ø±Ø§Øª
            </button>
            
            <button class="fix-button" onclick="fixLocalStorage()">
                Ø¥ØµÙ„Ø§Ø­ localStorage
            </button>
            
            <button class="fix-button" onclick="addDefaultData()">
                Ø¥Ø¶Ø§ÙØ© Ø¨ÙŠØ§Ù†Ø§Øª Ø§ÙØªØ±Ø§Ø¶ÙŠØ©
            </button>
            
            <button class="fix-button" onclick="testMainPage()">
                Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
            </button>
            
            <button class="fix-button" onclick="runFullFix()">
                Ø¥ØµÙ„Ø§Ø­ Ø´Ø§Ù…Ù„
            </button>
        </div>

        <div class="fix-card">
            <h2>ğŸ“Š Ø­Ø§Ù„Ø© Ø§Ù„Ø¥ØµÙ„Ø§Ø­</h2>
            <div class="progress">
                <div class="progress-bar" id="progress-bar"></div>
            </div>
            <div id="fix-status"></div>
        </div>

        <div class="fix-card">
            <h2>ğŸ”— Ø±ÙˆØ§Ø¨Ø· Ø³Ø±ÙŠØ¹Ø©</h2>
            <button class="fix-button" onclick="openMainPage()">
                ÙØªØ­ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
            </button>
            <button class="fix-button" onclick="openDisplayPage()">
                ÙØªØ­ ØµÙØ­Ø© Ø§Ù„Ø¹Ø±Ø¶
            </button>
            <button class="fix-button" onclick="openDiagnosisPage()">
                ÙØªØ­ ØµÙØ­Ø© Ø§Ù„ØªØ´Ø®ÙŠØµ
            </button>
        </div>
    </div>

    <script>
        function updateProgress(percent, message) {
            document.getElementById('progress-bar').style.width = percent + '%';
            addStatus(message, 'info');
        }

        function addStatus(message, type = 'info') {
            const statusDiv = document.getElementById('fix-status');
            const status = document.createElement('div');
            status.className = `status ${type}`;
            status.innerHTML = `
                <strong>${new Date().toLocaleTimeString()}</strong> - ${message}
            `;
            statusDiv.appendChild(status);
            statusDiv.scrollTop = statusDiv.scrollHeight;
        }

        async function fixLogoSystem() {
            updateProgress(10, 'Ø¨Ø¯Ø¡ Ø¥ØµÙ„Ø§Ø­ Ù†Ø¸Ø§Ù… Ø§Ù„Ø´Ø¹Ø§Ø±Ø§Øª...');
            
            try {
                // Ø¥Ù†Ø´Ø§Ø¡ Ù†Ø¸Ø§Ù… Ø´Ø¹Ø§Ø±Ø§Øª Ø¨Ø¯ÙŠÙ„
                if (typeof SmartLogoSystem === 'undefined') {
                    window.SmartLogoSystem = {
                        getClubLogo: function(clubName) {
                            const logos = {
                                'Liverpool FC': 'https://logos-world.net/wp-content/uploads/2020/06/Liverpool-Logo.png',
                                'Chelsea FC': 'https://logos-world.net/wp-content/uploads/2020/06/Chelsea-Logo.png',
                                'Real Madrid': 'https://logos-world.net/wp-content/uploads/2020/06/Real-Madrid-Logo.png',
                                'Manchester United': 'https://logos-world.net/wp-content/uploads/2020/06/Manchester-United-Logo.png',
                                'Manchester City': 'https://logos-world.net/wp-content/uploads/2020/06/Manchester-City-Logo.png'
                            };
                            return logos[clubName] || `https://ui-avatars.com/api/?name=${encodeURIComponent(clubName.substring(0, 2))}&size=400&background=1a1a2e&color=ffd700&bold=true&format=png&rounded=true&font-size=0.6`;
                        },
                        getClubInfo: function(clubName) {
                            return {
                                name: clubName,
                                league: 'Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ø£ÙˆØ±ÙˆØ¨ÙŠ',
                                country: 'Ø£ÙˆØ±ÙˆØ¨Ø§'
                            };
                        },
                        getStats: function() {
                            return { totalClubs: 5, cachedLogos: 0, fallbackSources: 1 };
                        }
                    };
                    updateProgress(50, 'ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ù†Ø¸Ø§Ù… Ø´Ø¹Ø§Ø±Ø§Øª Ø¨Ø¯ÙŠÙ„');
                } else {
                    updateProgress(50, 'Ù†Ø¸Ø§Ù… Ø§Ù„Ø´Ø¹Ø§Ø±Ø§Øª Ù…ÙˆØ¬ÙˆØ¯ Ø¨Ø§Ù„ÙØ¹Ù„');
                }
                
                updateProgress(100, 'ØªÙ… Ø¥ØµÙ„Ø§Ø­ Ù†Ø¸Ø§Ù… Ø§Ù„Ø´Ø¹Ø§Ø±Ø§Øª Ø¨Ù†Ø¬Ø§Ø­ âœ…');
                addStatus('Ù†Ø¸Ø§Ù… Ø§Ù„Ø´Ø¹Ø§Ø±Ø§Øª ÙŠØ¹Ù…Ù„ Ø§Ù„Ø¢Ù†', 'success');
                
            } catch (error) {
                addStatus(`Ø®Ø·Ø£ ÙÙŠ Ø¥ØµÙ„Ø§Ø­ Ù†Ø¸Ø§Ù… Ø§Ù„Ø´Ø¹Ø§Ø±Ø§Øª: ${error.message}`, 'error');
            }
        }

        async function fixLocalStorage() {
            updateProgress(10, 'Ø¨Ø¯Ø¡ Ø¥ØµÙ„Ø§Ø­ localStorage...');
            
            try {
                // Ø¥ØµÙ„Ø§Ø­ transfermarktLastUpdate
                const lastUpdate = localStorage.getItem('transfermarktLastUpdate');
                if (!lastUpdate || lastUpdate === 'undefined' || lastUpdate === 'null') {
                    localStorage.setItem('transfermarktLastUpdate', new Date().toISOString());
                    updateProgress(50, 'ØªÙ… Ø¥ØµÙ„Ø§Ø­ transfermarktLastUpdate');
                }
                
                // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
                const data = localStorage.getItem('transfermarktData');
                if (data) {
                    try {
                        const parsed = JSON.parse(data);
                        if (Array.isArray(parsed) && parsed.length > 0) {
                            updateProgress(80, `Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø³Ù„ÙŠÙ…Ø©: ${parsed.length} Ù†Ø§Ø¯ÙŠ`);
                        } else {
                            throw new Error('Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙØ§Ø±ØºØ©');
                        }
                    } catch (e) {
                        throw new Error('Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ØªØ§Ù„ÙØ©');
                    }
                } else {
                    updateProgress(60, 'Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª - Ø³ÙŠØªÙ… Ø¥Ø¶Ø§ÙØ© Ø¨ÙŠØ§Ù†Ø§Øª Ø§ÙØªØ±Ø§Ø¶ÙŠØ©');
                    await addDefaultData();
                }
                
                updateProgress(100, 'ØªÙ… Ø¥ØµÙ„Ø§Ø­ localStorage Ø¨Ù†Ø¬Ø§Ø­ âœ…');
                addStatus('localStorage ÙŠØ¹Ù…Ù„ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­', 'success');
                
            } catch (error) {
                addStatus(`Ø®Ø·Ø£ ÙÙŠ Ø¥ØµÙ„Ø§Ø­ localStorage: ${error.message}`, 'error');
            }
        }

        async function addDefaultData() {
            updateProgress(10, 'Ø¨Ø¯Ø¡ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©...');
            
            try {
                const defaultData = [
                    {
                        rank: 1,
                        name: "Ù„ÙŠÙØ±Ø¨ÙˆÙ„",
                        englishName: "Liverpool FC",
                        expenditure: "â‚¬308.68m",
                        arrivals: 13,
                        income: "â‚¬63.30m",
                        departures: 6,
                        balance: "â‚¬-245.38m",
                        league: "Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ Ø§Ù„Ù…Ù…ØªØ§Ø²",
                        logo: "https://logos-world.net/wp-content/uploads/2020/06/Liverpool-Logo.png",
                        lastUpdated: new Date().toISOString(),
                        dataSource: 'default-fixed'
                    },
                    {
                        rank: 2,
                        name: "ØªØ´ÙŠÙ„Ø³ÙŠ",
                        englishName: "Chelsea FC",
                        expenditure: "â‚¬243.77m",
                        arrivals: 22,
                        income: "â‚¬121.48m",
                        departures: 8,
                        balance: "â‚¬-122.29m",
                        league: "Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ Ø§Ù„Ù…Ù…ØªØ§Ø²",
                        logo: "https://logos-world.net/wp-content/uploads/2020/06/Chelsea-Logo.png",
                        lastUpdated: new Date().toISOString(),
                        dataSource: 'default-fixed'
                    },
                    {
                        rank: 3,
                        name: "Ø±ÙŠØ§Ù„ Ù…Ø¯Ø±ÙŠØ¯",
                        englishName: "Real Madrid",
                        expenditure: "â‚¬167.50m",
                        arrivals: 7,
                        income: "â‚¬2.00m",
                        departures: 4,
                        balance: "â‚¬-165.50m",
                        league: "Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ø¥Ø³Ø¨Ø§Ù†ÙŠ",
                        logo: "https://logos-world.net/wp-content/uploads/2020/06/Real-Madrid-Logo.png",
                        lastUpdated: new Date().toISOString(),
                        dataSource: 'default-fixed'
                    }
                ];
                
                updateProgress(50, 'Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙÙŠ localStorage...');
                localStorage.setItem('transfermarktData', JSON.stringify(defaultData));
                localStorage.setItem('transfermarktLastUpdate', new Date().toISOString());
                
                const fullData = {
                    clubs: defaultData,
                    lastUpdate: new Date().toISOString(),
                    source: 'quick-fix',
                    season: '2024/2025',
                    totalClubs: defaultData.length
                };
                localStorage.setItem('transfermarktDataFull', JSON.stringify(fullData));
                
                updateProgress(100, 'ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ© Ø¨Ù†Ø¬Ø§Ø­ âœ…');
                addStatus(`ØªÙ… Ø­ÙØ¸ ${defaultData.length} Ù†Ø§Ø¯ÙŠ ÙÙŠ localStorage`, 'success');
                
            } catch (error) {
                addStatus(`Ø®Ø·Ø£ ÙÙŠ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª: ${error.message}`, 'error');
            }
        }

        async function testMainPage() {
            updateProgress(10, 'Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©...');
            
            try {
                // ÙØªØ­ Ø§Ù„ØµÙØ­Ø© ÙÙŠ Ù†Ø§ÙØ°Ø© Ø¬Ø¯ÙŠØ¯Ø©
                const mainWindow = window.open('/obs-new-tols/transfermarkt-top-spenders-2025.html', '_blank');
                
                updateProgress(50, 'ØªÙ… ÙØªØ­ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©');
                
                // Ø§Ù†ØªØ¸Ø§Ø± Ù‚Ù„ÙŠÙ„ Ø«Ù… Ø§Ø®ØªØ¨Ø§Ø±
                setTimeout(() => {
                    updateProgress(100, 'ØªÙ… Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© âœ…');
                    addStatus('ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© ÙÙŠ Ø§Ù„Ù†Ø§ÙØ°Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©', 'info');
                }, 2000);
                
            } catch (error) {
                addStatus(`Ø®Ø·Ø£ ÙÙŠ Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©: ${error.message}`, 'error');
            }
        }

        async function runFullFix() {
            addStatus('Ø¨Ø¯Ø¡ Ø§Ù„Ø¥ØµÙ„Ø§Ø­ Ø§Ù„Ø´Ø§Ù…Ù„...', 'info');
            
            await fixLogoSystem();
            await new Promise(resolve => setTimeout(resolve, 1000));
            
            await fixLocalStorage();
            await new Promise(resolve => setTimeout(resolve, 1000));
            
            await addDefaultData();
            await new Promise(resolve => setTimeout(resolve, 1000));
            
            addStatus('ØªÙ… Ø§Ù„Ø¥ØµÙ„Ø§Ø­ Ø§Ù„Ø´Ø§Ù…Ù„ Ø¨Ù†Ø¬Ø§Ø­! ğŸ‰', 'success');
            addStatus('ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø¢Ù† Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù†Ø¸Ø§Ù… Ø¨Ø´ÙƒÙ„ Ø·Ø¨ÙŠØ¹ÙŠ', 'success');
        }

        function openMainPage() {
            window.open('/obs-new-tols/transfermarkt-top-spenders-2025.html', '_blank');
        }

        function openDisplayPage() {
            window.open('/obs-new-tols/transfermarkt-ultimate-display.html', '_blank');
        }

        function openDiagnosisPage() {
            window.open('/obs-new-tols/test-diagnosis.html', '_blank');
        }

        // ØªØ´ØºÙŠÙ„ ØªÙ„Ù‚Ø§Ø¦ÙŠ Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
        document.addEventListener('DOMContentLoaded', function() {
            addStatus('ØµÙØ­Ø© Ø§Ù„Ø¥ØµÙ„Ø§Ø­ Ø§Ù„Ø³Ø±ÙŠØ¹ Ø¬Ø§Ù‡Ø²Ø©', 'success');
            addStatus('Ø§Ø®ØªØ± Ø§Ù„Ø¥ØµÙ„Ø§Ø­ Ø§Ù„Ù…Ù†Ø§Ø³Ø¨ Ø£Ùˆ Ø§Ø¶ØºØ· "Ø¥ØµÙ„Ø§Ø­ Ø´Ø§Ù…Ù„"', 'info');
        });
    </script>
</body>
</html>
