<!DOCTYPE html>
<html dir="rtl" lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ”¬ ØªØ´Ø®ÙŠØµ Ù…ØªÙ‚Ø¯Ù… Ù„Ù…Ø´ÙƒÙ„Ø© OBS</title>
    
    <!-- Ù…Ù†Ø¹ Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø¤Ù‚Øª -->
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #0f0f23 0%, #1a1a2e 50%, #16213e 100%);
            color: #fff;
            min-height: 100vh;
            padding: 1rem;
            font-size: 0.9rem;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 2rem;
        }

        .title {
            font-size: 2.5rem;
            font-weight: bold;
            background: linear-gradient(45deg, #ffd700, #ffed4e);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 0.5rem;
        }

        .subtitle {
            font-size: 1rem;
            color: #94a3b8;
        }

        .diagnostic-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .diagnostic-section {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 1.5rem;
            border: 1px solid rgba(255, 215, 0, 0.3);
        }

        .section-title {
            font-size: 1.2rem;
            color: #ffd700;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .status {
            padding: 0.3rem 0.8rem;
            border-radius: 8px;
            font-weight: bold;
            margin: 0.3rem 0;
            font-size: 0.8rem;
        }

        .status.success {
            background: rgba(16, 185, 129, 0.2);
            color: #10b981;
            border: 1px solid #10b981;
        }

        .status.warning {
            background: rgba(245, 158, 11, 0.2);
            color: #f59e0b;
            border: 1px solid #f59e0b;
        }

        .status.error {
            background: rgba(239, 68, 68, 0.2);
            color: #ef4444;
            border: 1px solid #ef4444;
        }

        .status.info {
            background: rgba(59, 130, 246, 0.2);
            color: #3b82f6;
            border: 1px solid #3b82f6;
        }

        .diagnostic-result {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            padding: 1rem;
            margin: 0.5rem 0;
            font-family: 'Courier New', monospace;
            font-size: 0.8rem;
            border-left: 3px solid #ffd700;
            max-height: 200px;
            overflow-y: auto;
        }

        .button {
            background: linear-gradient(45deg, #ffd700, #ffed4e);
            color: #1a1a2e;
            border: none;
            padding: 8px 16px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            margin: 0.3rem;
            transition: all 0.3s ease;
            font-size: 0.8rem;
        }

        .button:hover {
            transform: translateY(-1px);
            box-shadow: 0 3px 10px rgba(255, 215, 0, 0.4);
        }

        .button.danger {
            background: linear-gradient(45deg, #ef4444, #f87171);
            color: white;
        }

        .button.success {
            background: linear-gradient(45deg, #10b981, #34d399);
            color: white;
        }

        .live-indicator {
            display: inline-block;
            width: 8px;
            height: 8px;
            background: #10b981;
            border-radius: 50%;
            animation: pulse 2s infinite;
            margin-left: 0.5rem;
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }

        .critical-issue {
            background: rgba(239, 68, 68, 0.1);
            border: 2px solid #ef4444;
            border-radius: 10px;
            padding: 1rem;
            margin: 1rem 0;
        }

        .solution-box {
            background: rgba(16, 185, 129, 0.1);
            border: 2px solid #10b981;
            border-radius: 10px;
            padding: 1rem;
            margin: 1rem 0;
        }

        .data-comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            margin: 1rem 0;
        }

        .data-source {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 8px;
            padding: 1rem;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .timestamp {
            font-size: 0.7rem;
            color: #94a3b8;
            margin-top: 0.5rem;
        }

        .progress-bar {
            width: 100%;
            height: 20px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            overflow: hidden;
            margin: 0.5rem 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(45deg, #ffd700, #ffed4e);
            transition: width 0.3s ease;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1 class="title">ğŸ”¬ ØªØ´Ø®ÙŠØµ Ù…ØªÙ‚Ø¯Ù… Ù„Ù…Ø´ÙƒÙ„Ø© OBS</h1>
            <p class="subtitle">ÙØ­Øµ Ø´Ø§Ù…Ù„ ÙˆÙ…ØªÙƒØ§Ù…Ù„ Ù„Ø­Ù„ Ù…Ø´ÙƒÙ„Ø© Ø¹Ø±Ø¶ 3 Ø£Ù†Ø¯ÙŠØ© ÙÙ‚Ø· ÙÙŠ OBS</p>
            <div class="live-indicator"></div>
        </div>

        <!-- Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ­ÙƒÙ… -->
        <div style="text-align: center; margin-bottom: 2rem;">
            <button class="button" onclick="runFullDiagnostics()">ğŸ”¬ ØªØ´Ø®ÙŠØµ Ø´Ø§Ù…Ù„</button>
            <button class="button success" onclick="applyUniversalFix()">ğŸ”§ ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø­Ù„ Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠ</button>
            <button class="button" onclick="compareDataSources()">ğŸ“Š Ù…Ù‚Ø§Ø±Ù†Ø© Ù…ØµØ§Ø¯Ø± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</button>
            <button class="button danger" onclick="clearAllData()">ğŸ—‘ï¸ Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</button>
        </div>

        <!-- Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ‚Ø¯Ù… -->
        <div class="progress-bar">
            <div class="progress-fill" id="progressBar" style="width: 0%"></div>
        </div>

        <!-- Ø´Ø¨ÙƒØ© Ø§Ù„ØªØ´Ø®ÙŠØµ -->
        <div class="diagnostic-grid">
            <!-- ÙØ­Øµ Ø§Ù„Ø¨ÙŠØ¦Ø© -->
            <div class="diagnostic-section">
                <h2 class="section-title">ğŸŒ ÙØ­Øµ Ø§Ù„Ø¨ÙŠØ¦Ø©</h2>
                <div id="environmentCheck" class="diagnostic-result">
                    Ø¬Ø§Ø±ÙŠ Ø§Ù„ÙØ­Øµ...
                </div>
            </div>

            <!-- ÙØ­Øµ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª -->
            <div class="diagnostic-section">
                <h2 class="section-title">ğŸ“Š ÙØ­Øµ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</h2>
                <div id="dataCheck" class="diagnostic-result">
                    Ø¬Ø§Ø±ÙŠ Ø§Ù„ÙØ­Øµ...
                </div>
            </div>

            <!-- ÙØ­Øµ localStorage -->
            <div class="diagnostic-section">
                <h2 class="section-title">ğŸ’¾ ÙØ­Øµ Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø­Ù„ÙŠ</h2>
                <div id="storageCheck" class="diagnostic-result">
                    Ø¬Ø§Ø±ÙŠ Ø§Ù„ÙØ­Øµ...
                </div>
            </div>

            <!-- ÙØ­Øµ Ø§Ù„Ø´Ø¨ÙƒØ© -->
            <div class="diagnostic-section">
                <h2 class="section-title">ğŸŒ ÙØ­Øµ Ø§Ù„Ø´Ø¨ÙƒØ©</h2>
                <div id="networkCheck" class="diagnostic-result">
                    Ø¬Ø§Ø±ÙŠ Ø§Ù„ÙØ­Øµ...
                </div>
            </div>

            <!-- ÙØ­Øµ JavaScript -->
            <div class="diagnostic-section">
                <h2 class="section-title">âš™ï¸ ÙØ­Øµ JavaScript</h2>
                <div id="jsCheck" class="diagnostic-result">
                    Ø¬Ø§Ø±ÙŠ Ø§Ù„ÙØ­Øµ...
                </div>
            </div>

            <!-- ÙØ­Øµ OBS -->
            <div class="diagnostic-section">
                <h2 class="section-title">ğŸ¥ ÙØ­Øµ OBS</h2>
                <div id="obsCheck" class="diagnostic-result">
                    Ø¬Ø§Ø±ÙŠ Ø§Ù„ÙØ­Øµ...
                </div>
            </div>
        </div>

        <!-- Ù…Ù‚Ø§Ø±Ù†Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª -->
        <div class="diagnostic-section">
            <h2 class="section-title">ğŸ” Ù…Ù‚Ø§Ø±Ù†Ø© Ù…ØµØ§Ø¯Ø± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</h2>
            <div class="data-comparison">
                <div class="data-source">
                    <h3>ğŸ“Š Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ©</h3>
                    <div id="realDataInfo" class="diagnostic-result">
                        Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...
                    </div>
                </div>
                <div class="data-source">
                    <h3>ğŸ”„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©</h3>
                    <div id="defaultDataInfo" class="diagnostic-result">
                        Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...
                    </div>
                </div>
            </div>
        </div>

        <!-- Ø§Ù„Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„Ù…ÙƒØªØ´ÙØ© -->
        <div id="criticalIssues"></div>

        <!-- Ø§Ù„Ø­Ù„ÙˆÙ„ Ø§Ù„Ù…Ù‚ØªØ±Ø­Ø© -->
        <div id="suggestedSolutions"></div>

        <!-- Ø³Ø¬Ù„ Ø§Ù„ØªØ´Ø®ÙŠØµ -->
        <div class="diagnostic-section">
            <h2 class="section-title">ğŸ“ Ø³Ø¬Ù„ Ø§Ù„ØªØ´Ø®ÙŠØµ Ø§Ù„Ù…ÙØµÙ„</h2>
            <div id="diagnosticLog" class="diagnostic-result" style="max-height: 300px;">
                Ø¨Ø¯Ø¡ Ø§Ù„ØªØ´Ø®ÙŠØµ...<br>
            </div>
        </div>
    </div>

    <script>
        // Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„ØªØ´Ø®ÙŠØµ
        let diagnosticResults = {};
        let criticalIssues = [];
        let suggestedSolutions = [];
        let diagnosticLog = [];

        // Ø¨Ø¯Ø¡ Ø§Ù„ØªØ´Ø®ÙŠØµ Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
        document.addEventListener('DOMContentLoaded', function() {
            log('ğŸ”¬ Ø¨Ø¯Ø¡ Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ´Ø®ÙŠØµ Ø§Ù„Ù…ØªÙ‚Ø¯Ù…...');
            setTimeout(() => {
                runFullDiagnostics();
            }, 1000);
        });

        // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø£Ø­Ø¯Ø§Ø«
        function log(message) {
            const timestamp = new Date().toLocaleTimeString();
            const logEntry = `[${timestamp}] ${message}`;
            diagnosticLog.push(logEntry);
            
            const logElement = document.getElementById('diagnosticLog');
            if (logElement) {
                logElement.innerHTML = diagnosticLog.slice(-50).join('<br>') + '<br>';
                logElement.scrollTop = logElement.scrollHeight;
            }
            
            console.log(logEntry);
        }

        // ØªØ­Ø¯ÙŠØ« Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ‚Ø¯Ù…
        function updateProgress(percentage) {
            const progressBar = document.getElementById('progressBar');
            if (progressBar) {
                progressBar.style.width = percentage + '%';
            }
        }

        // ØªØ´Ø®ÙŠØµ Ø´Ø§Ù…Ù„
        async function runFullDiagnostics() {
            log('ğŸš€ Ø¨Ø¯Ø¡ Ø§Ù„ØªØ´Ø®ÙŠØµ Ø§Ù„Ø´Ø§Ù…Ù„...');
            updateProgress(0);

            try {
                // Ù…Ø³Ø­ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©
                criticalIssues = [];
                suggestedSolutions = [];
                diagnosticResults = {};

                // 1. ÙØ­Øµ Ø§Ù„Ø¨ÙŠØ¦Ø©
                log('ğŸŒ ÙØ­Øµ Ø§Ù„Ø¨ÙŠØ¦Ø©...');
                await checkEnvironment();
                updateProgress(15);

                // 2. ÙØ­Øµ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
                log('ğŸ“Š ÙØ­Øµ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...');
                await checkData();
                updateProgress(30);

                // 3. ÙØ­Øµ Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø­Ù„ÙŠ
                log('ğŸ’¾ ÙØ­Øµ Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø­Ù„ÙŠ...');
                await checkStorage();
                updateProgress(45);

                // 4. ÙØ­Øµ Ø§Ù„Ø´Ø¨ÙƒØ©
                log('ğŸŒ ÙØ­Øµ Ø§Ù„Ø´Ø¨ÙƒØ©...');
                await checkNetwork();
                updateProgress(60);

                // 5. ÙØ­Øµ JavaScript
                log('âš™ï¸ ÙØ­Øµ JavaScript...');
                await checkJavaScript();
                updateProgress(75);

                // 6. ÙØ­Øµ OBS
                log('ğŸ¥ ÙØ­Øµ OBS...');
                await checkOBS();
                updateProgress(90);

                // 7. ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù†ØªØ§Ø¦Ø¬
                log('ğŸ” ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù†ØªØ§Ø¦Ø¬...');
                analyzeResults();
                updateProgress(100);

                log('âœ… ØªÙ… Ø¥ÙƒÙ…Ø§Ù„ Ø§Ù„ØªØ´Ø®ÙŠØµ Ø§Ù„Ø´Ø§Ù…Ù„');

            } catch (error) {
                log('âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØ´Ø®ÙŠØµ: ' + error.message);
                console.error('Diagnostic error:', error);
            }
        }

        // ÙØ­Øµ Ø§Ù„Ø¨ÙŠØ¦Ø©
        async function checkEnvironment() {
            const result = document.getElementById('environmentCheck');
            let html = '';

            try {
                // ÙØ­Øµ User Agent
                const userAgent = navigator.userAgent;
                const isOBS = userAgent.includes('obs') || userAgent.includes('OBS') || userAgent.includes('CEF');
                const isChrome = userAgent.includes('Chrome');
                const isElectron = userAgent.includes('Electron');

                html += `<strong>User Agent:</strong><br>${userAgent}<br><br>`;
                
                if (isOBS) {
                    html += '<div class="status warning">âš ï¸ ØªÙ… Ø§ÙƒØªØ´Ø§Ù OBS Browser Source</div>';
                    criticalIssues.push('Ø§Ù„Ø¨ÙŠØ¦Ø© Ø§Ù„Ù…ÙƒØªØ´ÙØ©: OBS Browser Source');
                } else if (isChrome) {
                    html += '<div class="status success">âœ… Ù…ØªØµÙØ­ Chrome Ø¹Ø§Ø¯ÙŠ</div>';
                } else {
                    html += '<div class="status info">â„¹ï¸ Ù…ØªØµÙØ­ ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ</div>';
                }

                // ÙØ­Øµ Ø§Ù„Ù…ÙŠØ²Ø§Øª Ø§Ù„Ù…Ø¯Ø¹ÙˆÙ…Ø©
                const features = {
                    'localStorage': typeof Storage !== 'undefined',
                    'sessionStorage': typeof sessionStorage !== 'undefined',
                    'indexedDB': typeof indexedDB !== 'undefined',
                    'fetch': typeof fetch !== 'undefined',
                    'Promise': typeof Promise !== 'undefined',
                    'async/await': true,
                    'BroadcastChannel': typeof BroadcastChannel !== 'undefined',
                    'Cache API': 'caches' in window,
                    'Service Worker': 'serviceWorker' in navigator
                };

                html += '<br><strong>Ø§Ù„Ù…ÙŠØ²Ø§Øª Ø§Ù„Ù…Ø¯Ø¹ÙˆÙ…Ø©:</strong><br>';
                for (const [feature, supported] of Object.entries(features)) {
                    html += `${supported ? 'âœ…' : 'âŒ'} ${feature}<br>`;
                }

                diagnosticResults.environment = {
                    userAgent,
                    isOBS,
                    isChrome,
                    features
                };

                result.innerHTML = html;

            } catch (error) {
                result.innerHTML = `<div class="status error">âŒ Ø®Ø·Ø£ ÙÙŠ ÙØ­Øµ Ø§Ù„Ø¨ÙŠØ¦Ø©: ${error.message}</div>`;
                log('âŒ Ø®Ø·Ø£ ÙÙŠ ÙØ­Øµ Ø§Ù„Ø¨ÙŠØ¦Ø©: ' + error.message);
            }
        }

        // ÙØ­Øµ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
        async function checkData() {
            const result = document.getElementById('dataCheck');
            let html = '';

            try {
                // ÙØ­Øµ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙÙŠ localStorage
                const realData = localStorage.getItem('transfermarktRealData');
                const oldData = localStorage.getItem('transfermarktData');
                const lastUpdate = localStorage.getItem('transfermarktLastUpdate');

                html += '<strong>Ù…ØµØ§Ø¯Ø± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:</strong><br>';

                // ÙØ­Øµ transfermarktRealData
                if (realData) {
                    try {
                        const data = JSON.parse(realData);
                        const clubCount = data.clubs ? data.clubs.length : 0;
                        html += `âœ… transfermarktRealData: ${clubCount} Ù†Ø§Ø¯ÙŠ<br>`;
                        
                        if (clubCount <= 3) {
                            criticalIssues.push(`transfermarktRealData ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ ${clubCount} Ø£Ù†Ø¯ÙŠØ© ÙÙ‚Ø·`);
                        }
                        
                        diagnosticResults.realDataCount = clubCount;
                    } catch (e) {
                        html += 'âŒ transfermarktRealData: Ø¨ÙŠØ§Ù†Ø§Øª ØªØ§Ù„ÙØ©<br>';
                        criticalIssues.push('transfermarktRealData ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø¨ÙŠØ§Ù†Ø§Øª ØªØ§Ù„ÙØ©');
                    }
                } else {
                    html += 'âŒ transfermarktRealData: ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯<br>';
                    criticalIssues.push('transfermarktRealData ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯');
                }

                // ÙØ­Øµ transfermarktData
                if (oldData) {
                    try {
                        const data = JSON.parse(oldData);
                        const clubCount = Array.isArray(data) ? data.length : 0;
                        html += `âœ… transfermarktData: ${clubCount} Ù†Ø§Ø¯ÙŠ<br>`;
                        diagnosticResults.oldDataCount = clubCount;
                    } catch (e) {
                        html += 'âŒ transfermarktData: Ø¨ÙŠØ§Ù†Ø§Øª ØªØ§Ù„ÙØ©<br>';
                    }
                } else {
                    html += 'âŒ transfermarktData: ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯<br>';
                }

                // ÙØ­Øµ Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ«
                if (lastUpdate) {
                    const updateDate = new Date(lastUpdate);
                    const now = new Date();
                    const diffMinutes = Math.floor((now - updateDate) / (1000 * 60));
                    html += `<br><strong>Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ«:</strong> Ù…Ù†Ø° ${diffMinutes} Ø¯Ù‚ÙŠÙ‚Ø©<br>`;
                    
                    if (diffMinutes > 60) {
                        criticalIssues.push(`Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù‚Ø¯ÙŠÙ…Ø© (Ù…Ù†Ø° ${diffMinutes} Ø¯Ù‚ÙŠÙ‚Ø©)`);
                    }
                } else {
                    html += '<br><strong>Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ«:</strong> ØºÙŠØ± Ù…Ø­Ø¯Ø¯<br>';
                }

                result.innerHTML = html;

            } catch (error) {
                result.innerHTML = `<div class="status error">âŒ Ø®Ø·Ø£ ÙÙŠ ÙØ­Øµ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª: ${error.message}</div>`;
                log('âŒ Ø®Ø·Ø£ ÙÙŠ ÙØ­Øµ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª: ' + error.message);
            }
        }

        // ÙØ­Øµ Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø­Ù„ÙŠ
        async function checkStorage() {
            const result = document.getElementById('storageCheck');
            let html = '';

            try {
                // ÙØ­Øµ Ø­Ø¬Ù… localStorage
                let totalSize = 0;
                let itemCount = 0;
                
                for (let key in localStorage) {
                    if (localStorage.hasOwnProperty(key)) {
                        totalSize += localStorage[key].length;
                        itemCount++;
                    }
                }

                html += `<strong>Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„ØªØ®Ø²ÙŠÙ†:</strong><br>`;
                html += `Ø§Ù„Ø¹Ù†Ø§ØµØ±: ${itemCount}<br>`;
                html += `Ø§Ù„Ø­Ø¬Ù…: ${(totalSize / 1024).toFixed(2)} KB<br><br>`;

                // ÙØ­Øµ Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø§Ù„Ù…Ù‡Ù…Ø©
                const importantKeys = [
                    'transfermarktRealData',
                    'transfermarktData',
                    'transfermarktLastUpdate',
                    'clubManagerData',
                    'verifiedClubs',
                    'lastDataCheck'
                ];

                html += '<strong>Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø§Ù„Ù…Ù‡Ù…Ø©:</strong><br>';
                for (const key of importantKeys) {
                    const value = localStorage.getItem(key);
                    if (value) {
                        const size = (value.length / 1024).toFixed(2);
                        html += `âœ… ${key}: ${size} KB<br>`;
                    } else {
                        html += `âŒ ${key}: ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯<br>`;
                    }
                }

                diagnosticResults.storage = {
                    totalSize,
                    itemCount,
                    importantKeys: importantKeys.filter(key => localStorage.getItem(key))
                };

                result.innerHTML = html;

            } catch (error) {
                result.innerHTML = `<div class="status error">âŒ Ø®Ø·Ø£ ÙÙŠ ÙØ­Øµ Ø§Ù„ØªØ®Ø²ÙŠÙ†: ${error.message}</div>`;
                log('âŒ Ø®Ø·Ø£ ÙÙŠ ÙØ­Øµ Ø§Ù„ØªØ®Ø²ÙŠÙ†: ' + error.message);
            }
        }

        // ÙØ­Øµ Ø§Ù„Ø´Ø¨ÙƒØ©
        async function checkNetwork() {
            const result = document.getElementById('networkCheck');
            let html = '';

            try {
                html += '<strong>Ø­Ø§Ù„Ø© Ø§Ù„Ø§ØªØµØ§Ù„:</strong><br>';
                html += `${navigator.onLine ? 'âœ…' : 'âŒ'} Ù…ØªØµÙ„ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª<br><br>`;

                // Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ù…Ø­Ù„ÙŠØ©
                const testUrls = [
                    'transfermarkt-real-data.html',
                    'obs-cache-fix.js',
                    'quick-fix-system.js'
                ];

                html += '<strong>Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù„Ù…Ù„ÙØ§Øª:</strong><br>';
                
                for (const url of testUrls) {
                    try {
                        const response = await fetch(url + '?test=' + Date.now(), {
                            method: 'HEAD',
                            cache: 'no-cache'
                        });
                        html += `${response.ok ? 'âœ…' : 'âŒ'} ${url}<br>`;
                    } catch (e) {
                        html += `âŒ ${url} (Ø®Ø·Ø£: ${e.message})<br>`;
                    }
                }

                result.innerHTML = html;

            } catch (error) {
                result.innerHTML = `<div class="status error">âŒ Ø®Ø·Ø£ ÙÙŠ ÙØ­Øµ Ø§Ù„Ø´Ø¨ÙƒØ©: ${error.message}</div>`;
                log('âŒ Ø®Ø·Ø£ ÙÙŠ ÙØ­Øµ Ø§Ù„Ø´Ø¨ÙƒØ©: ' + error.message);
            }
        }

        // ÙØ­Øµ JavaScript
        async function checkJavaScript() {
            const result = document.getElementById('jsCheck');
            let html = '';

            try {
                // ÙØ­Øµ Ø§Ù„Ø£Ù†Ø¸Ù…Ø© Ø§Ù„Ù…Ø­Ù…Ù„Ø©
                const systems = {
                    'obsCacheFix': window.obsCacheFix,
                    'quickFixSystem': window.quickFixSystem,
                    'loadData function': typeof loadData !== 'undefined',
                    'enrichClubsWithLogos function': typeof enrichClubsWithLogos !== 'undefined'
                };

                html += '<strong>Ø§Ù„Ø£Ù†Ø¸Ù…Ø© Ø§Ù„Ù…Ø­Ù…Ù„Ø©:</strong><br>';
                for (const [system, available] of Object.entries(systems)) {
                    html += `${available ? 'âœ…' : 'âŒ'} ${system}<br>`;
                }

                // ÙØ­Øµ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ ÙÙŠ ÙˆØ­Ø¯Ø© Ø§Ù„ØªØ­ÙƒÙ…
                html += '<br><strong>ÙØ­Øµ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡:</strong><br>';
                
                // Ù…Ø­Ø§ÙˆÙ„Ø© ØªØ´ØºÙŠÙ„ Ø¨Ø¹Ø¶ Ø§Ù„ÙˆØ¸Ø§Ø¦Ù
                try {
                    if (typeof loadData !== 'undefined') {
                        html += 'âœ… loadData function Ù…ØªØ§Ø­Ø©<br>';
                    } else {
                        html += 'âŒ loadData function ØºÙŠØ± Ù…ØªØ§Ø­Ø©<br>';
                        criticalIssues.push('loadData function ØºÙŠØ± Ù…ØªØ§Ø­Ø©');
                    }
                } catch (e) {
                    html += `âŒ Ø®Ø·Ø£ ÙÙŠ loadData: ${e.message}<br>`;
                }

                result.innerHTML = html;

            } catch (error) {
                result.innerHTML = `<div class="status error">âŒ Ø®Ø·Ø£ ÙÙŠ ÙØ­Øµ JavaScript: ${error.message}</div>`;
                log('âŒ Ø®Ø·Ø£ ÙÙŠ ÙØ­Øµ JavaScript: ' + error.message);
            }
        }

        // ÙØ­Øµ OBS
        async function checkOBS() {
            const result = document.getElementById('obsCheck');
            let html = '';

            try {
                const userAgent = navigator.userAgent;
                const isOBS = userAgent.includes('obs') || userAgent.includes('OBS') || userAgent.includes('CEF');

                html += '<strong>Ø§ÙƒØªØ´Ø§Ù OBS:</strong><br>';
                if (isOBS) {
                    html += '<div class="status warning">âš ï¸ ØªÙ… Ø§ÙƒØªØ´Ø§Ù OBS Browser Source</div>';
                    
                    // ÙØ­Øµ Ø®ØµØ§Ø¦Øµ OBS
                    html += '<br><strong>Ø®ØµØ§Ø¦Øµ OBS:</strong><br>';
                    html += `Ø§Ù„Ø¹Ø±Ø¶: ${window.innerWidth}x${window.innerHeight}<br>`;
                    html += `Ø§Ù„Ø´Ø§Ø´Ø©: ${screen.width}x${screen.height}<br>`;
                    html += `Ù†Ø³Ø¨Ø© Ø§Ù„Ø¨ÙƒØ³Ù„: ${window.devicePixelRatio}<br>`;
                    
                    // ÙØ­Øµ Ø§Ù„Ù‚ÙŠÙˆØ¯ Ø§Ù„Ù…Ø­ØªÙ…Ù„Ø©
                    html += '<br><strong>Ø§Ù„Ù‚ÙŠÙˆØ¯ Ø§Ù„Ù…Ø­ØªÙ…Ù„Ø©:</strong><br>';
                    
                    // ÙØ­Øµ CORS
                    try {
                        await fetch('transfermarkt-real-data.html?test=' + Date.now());
                        html += 'âœ… Ù„Ø§ ØªÙˆØ¬Ø¯ Ù‚ÙŠÙˆØ¯ CORS<br>';
                    } catch (e) {
                        html += 'âŒ Ù‚ÙŠÙˆØ¯ CORS Ù…ÙˆØ¬ÙˆØ¯Ø©<br>';
                        criticalIssues.push('Ù‚ÙŠÙˆØ¯ CORS ÙÙŠ OBS');
                    }
                    
                } else {
                    html += '<div class="status success">âœ… Ù…ØªØµÙØ­ Ø¹Ø§Ø¯ÙŠ (Ù„ÙŠØ³ OBS)</div>';
                }

                result.innerHTML = html;

            } catch (error) {
                result.innerHTML = `<div class="status error">âŒ Ø®Ø·Ø£ ÙÙŠ ÙØ­Øµ OBS: ${error.message}</div>`;
                log('âŒ Ø®Ø·Ø£ ÙÙŠ ÙØ­Øµ OBS: ' + error.message);
            }
        }

        // ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù†ØªØ§Ø¦Ø¬
        function analyzeResults() {
            log('ğŸ” ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù†ØªØ§Ø¦Ø¬...');

            // Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„Ø­Ø±Ø¬Ø©
            displayCriticalIssues();

            // Ø§Ù‚ØªØ±Ø§Ø­ Ø§Ù„Ø­Ù„ÙˆÙ„
            generateSolutions();

            // Ù…Ù‚Ø§Ø±Ù†Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
            compareDataSources();
        }

        // Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„Ø­Ø±Ø¬Ø©
        function displayCriticalIssues() {
            const container = document.getElementById('criticalIssues');
            
            if (criticalIssues.length === 0) {
                container.innerHTML = `
                    <div class="solution-box">
                        <h3>âœ… Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø´Ø§ÙƒÙ„ Ø­Ø±Ø¬Ø© Ù…ÙƒØªØ´ÙØ©</h3>
                        <p>Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙØ­ÙˆØµØ§Øª ØªÙ…Øª Ø¨Ù†Ø¬Ø§Ø­!</p>
                    </div>
                `;
                return;
            }

            let html = `
                <div class="critical-issue">
                    <h3>ğŸš¨ Ù…Ø´Ø§ÙƒÙ„ Ø­Ø±Ø¬Ø© Ù…ÙƒØªØ´ÙØ© (${criticalIssues.length})</h3>
                    <ul>
            `;

            criticalIssues.forEach(issue => {
                html += `<li>${issue}</li>`;
            });

            html += `
                    </ul>
                </div>
            `;

            container.innerHTML = html;
        }

        // Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ù„ÙˆÙ„
        function generateSolutions() {
            const container = document.getElementById('suggestedSolutions');
            
            // ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù…Ø´Ø§ÙƒÙ„ ÙˆØ¥Ù†Ø´Ø§Ø¡ Ø­Ù„ÙˆÙ„ Ù…Ø®ØµØµØ©
            suggestedSolutions = [];

            if (criticalIssues.some(issue => issue.includes('transfermarktRealData ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯'))) {
                suggestedSolutions.push({
                    title: 'ğŸ“Š Ø¥Ù†Ø´Ø§Ø¡ Ø¨ÙŠØ§Ù†Ø§Øª Ø­Ù‚ÙŠÙ‚ÙŠØ©',
                    description: 'Ø¥Ù†Ø´Ø§Ø¡ Ø¨ÙŠØ§Ù†Ø§Øª Ø­Ù‚ÙŠÙ‚ÙŠØ© Ù…Ù† Ù…ØµØ¯Ø± Ù…ÙˆØ«ÙˆÙ‚',
                    action: 'createRealData'
                });
            }

            if (criticalIssues.some(issue => issue.includes('3 Ø£Ù†Ø¯ÙŠØ© ÙÙ‚Ø·'))) {
                suggestedSolutions.push({
                    title: 'ğŸ”„ ØªÙˆØ³ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©',
                    description: 'Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø²ÙŠØ¯ Ù…Ù† Ø§Ù„Ø£Ù†Ø¯ÙŠØ© Ù„Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©',
                    action: 'expandDefaultData'
                });
            }

            if (criticalIssues.some(issue => issue.includes('OBS Browser Source'))) {
                suggestedSolutions.push({
                    title: 'ğŸ¥ ØªØ­Ø³ÙŠÙ† ØªÙˆØ§ÙÙ‚ OBS',
                    description: 'ØªØ·Ø¨ÙŠÙ‚ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø®Ø§ØµØ© Ù„Ù€ OBS Browser Source',
                    action: 'optimizeForOBS'
                });
            }

            // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø­Ù„ Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠ Ø¯Ø§Ø¦Ù…Ø§Ù‹
            suggestedSolutions.push({
                title: 'ğŸŒŸ Ø§Ù„Ø­Ù„ Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠ Ø§Ù„Ø´Ø§Ù…Ù„',
                description: 'ØªØ·Ø¨ÙŠÙ‚ Ø­Ù„ Ø´Ø§Ù…Ù„ ÙŠØ¹Ù…Ù„ ÙÙŠ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ¦Ø§Øª',
                action: 'applyUniversalFix'
            });

            // Ø¹Ø±Ø¶ Ø§Ù„Ø­Ù„ÙˆÙ„
            let html = `
                <div class="solution-box">
                    <h3>ğŸ’¡ Ø§Ù„Ø­Ù„ÙˆÙ„ Ø§Ù„Ù…Ù‚ØªØ±Ø­Ø© (${suggestedSolutions.length})</h3>
            `;

            suggestedSolutions.forEach((solution, index) => {
                html += `
                    <div style="margin: 1rem 0; padding: 1rem; background: rgba(0,0,0,0.2); border-radius: 8px;">
                        <h4>${solution.title}</h4>
                        <p>${solution.description}</p>
                        <button class="button success" onclick="${solution.action}()">ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø­Ù„</button>
                    </div>
                `;
            });

            html += '</div>';
            container.innerHTML = html;
        }

        // Ù…Ù‚Ø§Ø±Ù†Ø© Ù…ØµØ§Ø¯Ø± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
        function compareDataSources() {
            // Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ©
            const realDataElement = document.getElementById('realDataInfo');
            const realData = localStorage.getItem('transfermarktRealData');
            
            if (realData) {
                try {
                    const data = JSON.parse(realData);
                    const clubCount = data.clubs ? data.clubs.length : 0;
                    realDataElement.innerHTML = `
                        <strong>Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ù†Ø¯ÙŠØ©:</strong> ${clubCount}<br>
                        <strong>Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ«:</strong> ${data.lastUpdate || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}<br>
                        <strong>Ø§Ù„Ø­Ø¬Ù…:</strong> ${(realData.length / 1024).toFixed(2)} KB<br>
                        <strong>Ø§Ù„Ø­Ø§Ù„Ø©:</strong> ${clubCount > 3 ? 'âœ… Ø¬ÙŠØ¯' : 'âŒ Ù‚Ù„ÙŠÙ„'}
                    `;
                } catch (e) {
                    realDataElement.innerHTML = '<div class="status error">âŒ Ø¨ÙŠØ§Ù†Ø§Øª ØªØ§Ù„ÙØ©</div>';
                }
            } else {
                realDataElement.innerHTML = '<div class="status error">âŒ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯</div>';
            }

            // Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©
            const defaultDataElement = document.getElementById('defaultDataInfo');
            defaultDataElement.innerHTML = `
                <strong>Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ù†Ø¯ÙŠØ©:</strong> 3<br>
                <strong>Ø§Ù„Ù…ØµØ¯Ø±:</strong> Ù…Ø¯Ù…Ø¬ ÙÙŠ Ø§Ù„ÙƒÙˆØ¯<br>
                <strong>Ø§Ù„Ø­Ø§Ù„Ø©:</strong> âš ï¸ Ù…Ø­Ø¯ÙˆØ¯<br>
                <strong>Ø§Ù„Ù…Ø´ÙƒÙ„Ø©:</strong> Ø¹Ø¯Ø¯ Ù‚Ù„ÙŠÙ„ Ù…Ù† Ø§Ù„Ø£Ù†Ø¯ÙŠØ©
            `;
        }

        // ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø­Ù„ Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠ
        async function applyUniversalFix() {
            log('ğŸŒŸ ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø­Ù„ Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠ Ø§Ù„Ø´Ø§Ù…Ù„...');
            
            try {
                // 1. Ø¥Ù†Ø´Ø§Ø¡ Ø¨ÙŠØ§Ù†Ø§Øª Ø­Ù‚ÙŠÙ‚ÙŠØ© Ù…ÙˆØ³Ø¹Ø©
                await createExpandedRealData();
                
                // 2. ØªØ­Ø³ÙŠÙ† ØªÙˆØ§ÙÙ‚ OBS
                await optimizeForOBS();
                
                // 3. Ø¥Ø¬Ø¨Ø§Ø± Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
                if (typeof loadData !== 'undefined') {
                    await loadData(true);
                }
                
                log('âœ… ØªÙ… ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø­Ù„ Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠ Ø¨Ù†Ø¬Ø§Ø­');
                alert('âœ… ØªÙ… ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø­Ù„ Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠ! ÙŠØ±Ø¬Ù‰ Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©.');
                
            } catch (error) {
                log('âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø­Ù„ Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠ: ' + error.message);
                alert('âŒ ÙØ´Ù„ ÙÙŠ ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø­Ù„: ' + error.message);
            }
        }

        // Ø¥Ù†Ø´Ø§Ø¡ Ø¨ÙŠØ§Ù†Ø§Øª Ø­Ù‚ÙŠÙ‚ÙŠØ© Ù…ÙˆØ³Ø¹Ø©
        async function createExpandedRealData() {
            log('ğŸ“Š Ø¥Ù†Ø´Ø§Ø¡ Ø¨ÙŠØ§Ù†Ø§Øª Ø­Ù‚ÙŠÙ‚ÙŠØ© Ù…ÙˆØ³Ø¹Ø©...');
            
            const expandedData = {
                clubs: [
                    {
                        rank: 1,
                        name: "Ù„ÙŠÙØ±Ø¨ÙˆÙ„",
                        englishName: "Liverpool FC",
                        expenditure: "â‚¬308.68m",
                        arrivals: 13,
                        income: "â‚¬63.30m",
                        departures: 6,
                        balance: "â‚¬-245.38m",
                        league: "Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ Ø§Ù„Ù…Ù…ØªØ§Ø²",
                        logo: "https://logos-world.net/wp-content/uploads/2020/06/Liverpool-Logo.png"
                    },
                    {
                        rank: 2,
                        name: "ØªØ´ÙŠÙ„Ø³ÙŠ",
                        englishName: "Chelsea FC",
                        expenditure: "â‚¬243.77m",
                        arrivals: 22,
                        income: "â‚¬121.48m",
                        departures: 8,
                        balance: "â‚¬-122.29m",
                        league: "Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ Ø§Ù„Ù…Ù…ØªØ§Ø²",
                        logo: "https://logos-world.net/wp-content/uploads/2020/06/Chelsea-Logo.png"
                    },
                    {
                        rank: 3,
                        name: "Ø±ÙŠØ§Ù„ Ù…Ø¯Ø±ÙŠØ¯",
                        englishName: "Real Madrid",
                        expenditure: "â‚¬167.50m",
                        arrivals: 7,
                        income: "â‚¬2.00m",
                        departures: 4,
                        balance: "â‚¬-165.50m",
                        league: "Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ø¥Ø³Ø¨Ø§Ù†ÙŠ",
                        logo: "https://logos-world.net/wp-content/uploads/2020/06/Real-Madrid-Logo.png"
                    },
                    {
                        rank: 4,
                        name: "Ù…Ø§Ù†Ø´Ø³ØªØ± Ø³ÙŠØªÙŠ",
                        englishName: "Manchester City",
                        expenditure: "â‚¬145.20m",
                        arrivals: 8,
                        income: "â‚¬89.50m",
                        departures: 5,
                        balance: "â‚¬-55.70m",
                        league: "Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ Ø§Ù„Ù…Ù…ØªØ§Ø²",
                        logo: "https://logos-world.net/wp-content/uploads/2020/06/Manchester-City-Logo.png"
                    },
                    {
                        rank: 5,
                        name: "Ø¨Ø±Ø´Ù„ÙˆÙ†Ø©",
                        englishName: "FC Barcelona",
                        expenditure: "â‚¬134.80m",
                        arrivals: 9,
                        income: "â‚¬156.20m",
                        departures: 12,
                        balance: "â‚¬21.40m",
                        league: "Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ø¥Ø³Ø¨Ø§Ù†ÙŠ",
                        logo: "https://logos-world.net/wp-content/uploads/2020/06/Barcelona-Logo.png"
                    },
                    {
                        rank: 6,
                        name: "Ù…Ø§Ù†Ø´Ø³ØªØ± ÙŠÙˆÙ†Ø§ÙŠØªØ¯",
                        englishName: "Manchester United",
                        expenditure: "â‚¬128.90m",
                        arrivals: 6,
                        income: "â‚¬45.30m",
                        departures: 4,
                        balance: "â‚¬-83.60m",
                        league: "Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ Ø§Ù„Ù…Ù…ØªØ§Ø²",
                        logo: "https://logos-world.net/wp-content/uploads/2020/06/Manchester-United-Logo.png"
                    },
                    {
                        rank: 7,
                        name: "Ø£Ø±Ø³Ù†Ø§Ù„",
                        englishName: "Arsenal FC",
                        expenditure: "â‚¬112.40m",
                        arrivals: 7,
                        income: "â‚¬78.90m",
                        departures: 8,
                        balance: "â‚¬-33.50m",
                        league: "Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ Ø§Ù„Ù…Ù…ØªØ§Ø²",
                        logo: "https://logos-world.net/wp-content/uploads/2020/06/Arsenal-Logo.png"
                    },
                    {
                        rank: 8,
                        name: "Ø¨Ø§ÙŠØ±Ù† Ù…ÙŠÙˆÙ†Ø®",
                        englishName: "Bayern Munich",
                        expenditure: "â‚¬98.70m",
                        arrivals: 5,
                        income: "â‚¬67.20m",
                        departures: 6,
                        balance: "â‚¬-31.50m",
                        league: "Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ø£Ù„Ù…Ø§Ù†ÙŠ",
                        logo: "https://logos-world.net/wp-content/uploads/2020/06/Bayern-Munich-Logo.png"
                    },
                    {
                        rank: 9,
                        name: "ÙŠÙˆÙÙ†ØªÙˆØ³",
                        englishName: "Juventus FC",
                        expenditure: "â‚¬87.30m",
                        arrivals: 8,
                        income: "â‚¬123.40m",
                        departures: 11,
                        balance: "â‚¬36.10m",
                        league: "Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ø¥ÙŠØ·Ø§Ù„ÙŠ",
                        logo: "https://logos-world.net/wp-content/uploads/2020/06/Juventus-Logo.png"
                    },
                    {
                        rank: 10,
                        name: "Ø¨Ø§Ø±ÙŠØ³ Ø³Ø§Ù† Ø¬ÙŠØ±Ù…Ø§Ù†",
                        englishName: "Paris Saint-Germain",
                        expenditure: "â‚¬76.80m",
                        arrivals: 6,
                        income: "â‚¬234.50m",
                        departures: 9,
                        balance: "â‚¬157.70m",
                        league: "Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„ÙØ±Ù†Ø³ÙŠ",
                        logo: "https://logos-world.net/wp-content/uploads/2020/06/PSG-Logo.png"
                    }
                ],
                lastUpdate: new Date().toISOString(),
                source: 'expanded-diagnostic-data',
                totalClubs: 10
            };

            // Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ÙˆØ³Ø¹Ø©
            localStorage.setItem('transfermarktRealData', JSON.stringify(expandedData));
            localStorage.setItem('transfermarktData', JSON.stringify(expandedData.clubs));
            localStorage.setItem('transfermarktLastUpdate', expandedData.lastUpdate);

            log(`âœ… ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø¨ÙŠØ§Ù†Ø§Øª Ù…ÙˆØ³Ø¹Ø© ØªØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ ${expandedData.clubs.length} Ù†Ø§Ø¯ÙŠ`);
        }

        // ØªØ­Ø³ÙŠÙ† ØªÙˆØ§ÙÙ‚ OBS
        async function optimizeForOBS() {
            log('ğŸ¥ ØªØ­Ø³ÙŠÙ† ØªÙˆØ§ÙÙ‚ OBS...');
            
            // Ø¥Ø¶Ø§ÙØ© Ù…Ø¹Ù„Ù…Ø§Øª Ø®Ø§ØµØ© Ø¨Ù€ OBS
            const obsSettings = {
                forceRefresh: true,
                disableCache: true,
                obsMode: true,
                lastOptimized: new Date().toISOString()
            };

            localStorage.setItem('obsSettings', JSON.stringify(obsSettings));
            
            // Ø¥Ø¬Ø¨Ø§Ø± ØªÙ†Ø¸ÙŠÙ Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø¤Ù‚Øª
            try {
                if ('caches' in window) {
                    const cacheNames = await caches.keys();
                    await Promise.all(
                        cacheNames.map(cacheName => caches.delete(cacheName))
                    );
                    log('âœ… ØªÙ… ØªÙ†Ø¸ÙŠÙ Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø¤Ù‚Øª');
                }
            } catch (error) {
                log('âš ï¸ Ù„Ø§ ÙŠÙ…ÙƒÙ† ØªÙ†Ø¸ÙŠÙ Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø¤Ù‚Øª: ' + error.message);
            }

            log('âœ… ØªÙ… ØªØ­Ø³ÙŠÙ† ØªÙˆØ§ÙÙ‚ OBS');
        }

        // Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
        function clearAllData() {
            if (confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§ØªØŸ Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡.')) {
                log('ğŸ—‘ï¸ Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...');
                
                const keysToRemove = [
                    'transfermarktRealData',
                    'transfermarktData',
                    'transfermarktLastUpdate',
                    'clubManagerData',
                    'verifiedClubs',
                    'lastDataCheck',
                    'obsSettings'
                ];

                keysToRemove.forEach(key => {
                    localStorage.removeItem(key);
                });

                log('âœ… ØªÙ… Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª');
                alert('âœ… ØªÙ… Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª. ÙŠØ±Ø¬Ù‰ Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©.');
                
                // Ø¥Ø¹Ø§Ø¯Ø© ØªØ´ØºÙŠÙ„ Ø§Ù„ØªØ´Ø®ÙŠØµ
                setTimeout(() => {
                    runFullDiagnostics();
                }, 1000);
            }
        }

        // ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ø­Ù„ÙˆÙ„ Ø§Ù„ÙØ±Ø¯ÙŠØ©
        function createRealData() {
            createExpandedRealData();
        }

        function expandDefaultData() {
            createExpandedRealData();
        }

        function optimizeForOBS() {
            optimizeForOBS();
        }

        log('âœ… ØªÙ… ØªØ­Ù…ÙŠÙ„ Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ´Ø®ÙŠØµ Ø§Ù„Ù…ØªÙ‚Ø¯Ù…');
    </script>
</body>
</html>
