<!DOCTYPE html>
<html dir="rtl" lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üí∞ ÿ£ŸÉÿ´ÿ± 10 ÿ£ŸÜÿØŸäÿ© ÿµÿ±ŸÅÿßŸã ŸÅŸä ÿ≥ŸàŸÇ ÿßŸÑÿßŸÜÿ™ŸÇÿßŸÑÿßÿ™ 2025</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="smart-logo-system.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', 'Tajawal', sans-serif;
            background: linear-gradient(135deg, #0a0a0f 0%, #1a1a2e 50%, #16213e 100%);
            color: #f8fafc;
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        /* ÿ™ÿ£ÿ´Ÿäÿ±ÿßÿ™ ÿßŸÑÿÆŸÑŸÅŸäÿ© ÿßŸÑŸÖÿ™ÿ≠ÿ±ŸÉÿ© ÿßŸÑŸÖÿ≠ÿ≥ŸÜÿ© */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background:
                radial-gradient(circle at 20% 80%, rgba(59, 130, 246, 0.08) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(16, 185, 129, 0.06) 0%, transparent 50%),
                radial-gradient(circle at 40% 40%, rgba(139, 92, 246, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 60% 70%, rgba(245, 158, 11, 0.04) 0%, transparent 50%);
            z-index: -2;
            animation: backgroundFlow 25s ease-in-out infinite;
        }

        /* ÿ¥ÿ®ŸÉÿ© ŸÖÿ™ÿ≠ÿ±ŸÉÿ© ŸáÿßÿØÿ¶ÿ© */
        body::after {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image:
                linear-gradient(rgba(59, 130, 246, 0.02) 1px, transparent 1px),
                linear-gradient(90deg, rgba(16, 185, 129, 0.015) 1px, transparent 1px);
            background-size: 80px 80px;
            animation: gridMove 40s linear infinite;
            z-index: -1;
        }

        @keyframes backgroundFlow {
            0%, 100% {
                transform: scale(1) rotate(0deg);
                opacity: 1;
            }
            50% {
                transform: scale(1.02) rotate(0.5deg);
                opacity: 0.9;
            }
        }

        @keyframes gridMove {
            0% { transform: translate(0, 0); }
            100% { transform: translate(80px, 80px); }
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
        }

        .header {
            text-align: center;
            margin-bottom: 3rem;
            position: relative;
        }

        .main-title {
            font-size: 3rem;
            font-weight: 900;
            background: linear-gradient(45deg, #ffd700, #ffed4e, #ffd700);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 1rem;
            text-shadow: 0 0 30px rgba(255, 215, 0, 0.3);
        }

        .subtitle {
            font-size: 1.3rem;
            color: #94a3b8;
            margin-bottom: 2rem;
        }

        .update-section {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-bottom: 3rem;
            flex-wrap: wrap;
        }

        .update-btn {
            background: linear-gradient(45deg, #10b981, #059669);
            border: none;
            color: white;
            padding: 1rem 2rem;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.75rem;
            box-shadow: 0 8px 25px rgba(16, 185, 129, 0.3);
        }

        .update-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 35px rgba(16, 185, 129, 0.4);
        }

        .update-btn:active {
            transform: translateY(-1px);
        }

        .loading {
            text-align: center;
            padding: 3rem;
            color: #94a3b8;
            position: relative;
        }

        .loading-spinner {
            width: 60px;
            height: 60px;
            border: 4px solid rgba(255, 215, 0, 0.1);
            border-top: 4px solid #ffd700;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 1rem;
            position: relative;
        }

        .loading-spinner::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 30px;
            height: 30px;
            border: 2px solid rgba(59, 130, 246, 0.2);
            border-top: 2px solid #3b82f6;
            border-radius: 50%;
            animation: spin 0.8s linear infinite reverse;
            transform: translate(-50%, -50%);
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* ŸÖÿ§ÿ¥ÿ± ÿßŸÑÿ™ŸÇÿØŸÖ ÿßŸÑŸÖÿ™ŸÇÿØŸÖ */
        .progress-container {
            width: 100%;
            max-width: 400px;
            margin: 1rem auto;
            background: rgba(26, 26, 46, 0.5);
            border-radius: 25px;
            padding: 0.5rem;
            border: 2px solid rgba(255, 215, 0, 0.2);
        }

        .progress-bar {
            height: 8px;
            background: linear-gradient(90deg, #ffd700, #ffed4e, #3b82f6);
            border-radius: 20px;
            width: 0%;
            transition: width 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .progress-bar::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            animation: shimmer 2s infinite;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        .progress-text {
            text-align: center;
            margin-top: 0.5rem;
            font-size: 0.9rem;
            color: #94a3b8;
            font-weight: 600;
        }

        .clubs-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 2rem;
            margin-bottom: 3rem;
        }

        .club-card {
            background: rgba(26, 26, 46, 0.9);
            border: 2px solid transparent;
            border-radius: 20px;
            padding: 2rem;
            position: relative;
            overflow: hidden;
            transition: all 0.4s ease;
            backdrop-filter: blur(10px);
        }

        .club-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, rgba(255, 215, 0, 0.1), rgba(255, 237, 78, 0.05));
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .club-card:hover {
            transform: translateY(-8px);
            border-color: #ffd700;
            box-shadow: 0 20px 50px rgba(255, 215, 0, 0.2);
        }

        .club-card:hover::before {
            opacity: 1;
        }

        .club-rank {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: linear-gradient(45deg, #ffd700, #ffed4e);
            color: #0a0a0f;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: 900;
            box-shadow: 0 4px 15px rgba(255, 215, 0, 0.4);
        }

        .club-header {
            display: flex;
            align-items: center;
            gap: 1.5rem;
            margin-bottom: 1.5rem;
            position: relative;
            z-index: 2;
        }

        .club-logo {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            border: 3px solid rgba(255, 215, 0, 0.3);
            transition: all 0.3s ease;
            object-fit: cover;
            object-position: center;
            background: linear-gradient(135deg, #1a1a2e, #16213e);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }

        .club-card:hover .club-logo {
            border-color: #ffd700;
            transform: scale(1.1);
        }

        .club-info {
            flex: 1;
        }

        .club-name {
            font-size: 1.5rem;
            font-weight: 700;
            color: #f8fafc;
            margin-bottom: 0.5rem;
        }

        .club-league {
            color: #94a3b8;
            font-size: 1rem;
        }

        .expenditure-section {
            position: relative;
            z-index: 2;
        }

        .expenditure-label {
            color: #94a3b8;
            font-size: 0.9rem;
            margin-bottom: 0.5rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .expenditure-amount {
            font-size: 2.5rem;
            font-weight: 900;
            background: linear-gradient(45deg, #ef4444, #dc2626);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 1rem;
        }

        .stats-row {
            display: flex;
            justify-content: space-between;
            gap: 1rem;
            margin-top: 1rem;
        }

        .stat-item {
            text-align: center;
            flex: 1;
        }

        .stat-value {
            font-size: 1.2rem;
            font-weight: 700;
            color: #3b82f6;
        }

        .stat-label {
            font-size: 0.8rem;
            color: #94a3b8;
            margin-top: 0.25rem;
        }

        .last-updated {
            text-align: center;
            color: #94a3b8;
            font-size: 0.9rem;
            margin-top: 2rem;
            padding: 1rem;
            background: rgba(26, 26, 46, 0.5);
            border-radius: 12px;
        }

        /* ŸÇÿ≥ŸÖ ÿßŸÑÿ•ÿ¨ŸÖÿßŸÑŸäÿßÿ™ */
        .totals-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin: 2rem 0;
            padding: 2rem;
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.1), rgba(59, 130, 246, 0.1));
            border-radius: 16px;
            border: 1px solid rgba(16, 185, 129, 0.2);
            backdrop-filter: blur(10px);
        }

        .total-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 1.5rem;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .total-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, transparent 30%, rgba(255, 255, 255, 0.05) 50%, transparent 70%);
            transform: translateX(-100%);
            transition: transform 0.6s ease;
        }

        .total-card:hover::before {
            transform: translateX(100%);
        }

        .total-card:hover {
            transform: translateY(-5px);
            border-color: rgba(255, 215, 0, 0.3);
            box-shadow: 0 10px 30px rgba(255, 215, 0, 0.2);
        }

        .total-icon {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            background: linear-gradient(45deg, #ffd700, #ffed4e);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .total-value {
            font-size: 2rem;
            font-weight: 900;
            color: #ffd700;
            margin-bottom: 0.5rem;
            text-shadow: 0 2px 10px rgba(255, 215, 0, 0.3);
        }

        .total-label {
            font-size: 1rem;
            color: #94a3b8;
            font-weight: 600;
        }

        .error-message {
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid #ef4444;
            border-radius: 12px;
            padding: 1.5rem;
            text-align: center;
            color: #ef4444;
            margin: 2rem 0;
        }

        @media (max-width: 768px) {
            .container {
                padding: 1rem;
            }
            
            .main-title {
                font-size: 2rem;
            }
            
            .clubs-grid {
                grid-template-columns: 1fr;
                gap: 1.5rem;
            }
            
            .club-card {
                padding: 1.5rem;
            }
            
            .expenditure-amount {
                font-size: 2rem;
            }
        }

        .pulse {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        /* ŸÜÿßŸÅÿ∞ÿ© ÿßŸÑÿ¨ÿØŸàŸÑÿ© */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            border-radius: 20px;
            width: 90%;
            max-width: 500px;
            max-height: 80vh;
            overflow-y: auto;
            border: 2px solid rgba(255, 215, 0, 0.3);
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
        }

        .modal-header {
            padding: 2rem 2rem 1rem;
            border-bottom: 1px solid rgba(255, 215, 0, 0.2);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-header h3 {
            color: #ffd700;
            font-size: 1.5rem;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .close-btn {
            background: none;
            border: none;
            color: #94a3b8;
            font-size: 2rem;
            cursor: pointer;
            transition: color 0.3s ease;
            padding: 0.5rem;
            border-radius: 50%;
        }

        .close-btn:hover {
            color: #ef4444;
            background: rgba(239, 68, 68, 0.1);
        }

        .modal-body {
            padding: 2rem;
        }

        .schedule-option {
            margin-bottom: 2rem;
            padding: 1.5rem;
            background: rgba(26, 26, 46, 0.5);
            border-radius: 12px;
            border: 1px solid rgba(255, 215, 0, 0.1);
        }

        .schedule-option label {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            color: #f8fafc;
            font-weight: 600;
            cursor: pointer;
            margin-bottom: 1rem;
        }

        .schedule-option input[type="radio"],
        .schedule-option input[type="checkbox"] {
            width: 20px;
            height: 20px;
            accent-color: #ffd700;
        }

        .interval-options,
        .specific-times {
            margin-top: 1rem;
            padding-left: 2rem;
        }

        .interval-options select,
        .specific-times input {
            background: rgba(26, 26, 46, 0.8);
            border: 2px solid rgba(255, 215, 0, 0.3);
            border-radius: 8px;
            padding: 0.75rem;
            color: #f8fafc;
            font-size: 1rem;
            margin-right: 0.5rem;
        }

        .interval-options select:focus,
        .specific-times input:focus {
            outline: none;
            border-color: #ffd700;
            box-shadow: 0 0 0 3px rgba(255, 215, 0, 0.1);
        }

        .modal-footer {
            padding: 1rem 2rem 2rem;
            display: flex;
            gap: 1rem;
            justify-content: flex-end;
        }

        .modal-btn {
            padding: 0.75rem 2rem;
            border: none;
            border-radius: 12px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
        }

        .modal-btn.cancel {
            background: rgba(148, 163, 184, 0.2);
            color: #94a3b8;
            border: 2px solid rgba(148, 163, 184, 0.3);
        }

        .modal-btn.cancel:hover {
            background: rgba(148, 163, 184, 0.3);
            color: #f8fafc;
        }

        .modal-btn.confirm {
            background: linear-gradient(45deg, #10b981, #059669);
            color: white;
            box-shadow: 0 4px 15px rgba(16, 185, 129, 0.3);
        }

        .modal-btn.confirm:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(16, 185, 129, 0.4);
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1 class="main-title">üí∞ ÿ£ŸÉÿ´ÿ± 10 ÿ£ŸÜÿØŸäÿ© ÿµÿ±ŸÅÿßŸã ŸÅŸä ÿ≥ŸàŸÇ ÿßŸÑÿßŸÜÿ™ŸÇÿßŸÑÿßÿ™ 2025</h1>
            <p class="subtitle">ÿ®ŸäÿßŸÜÿßÿ™ ÿ≠ŸÇŸäŸÇŸäÿ© ŸÖÿ®ÿßÿ¥ÿ±ÿ© ŸÖŸÜ Transfermarkt</p>
        </div>

        <div class="update-section">
            <button class="update-btn" onclick="fetchLatestData()">
                <i class="fas fa-sync-alt"></i>
                ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿ¢ŸÜ
            </button>
            <button class="update-btn" onclick="toggleAutoUpdate()" id="autoUpdateBtn" style="background: linear-gradient(45deg, #3b82f6, #2563eb);">
                <i class="fas fa-clock"></i>
                ÿ™ŸÅÿπŸäŸÑ ÿßŸÑÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ™ŸÑŸÇÿßÿ¶Ÿä
            </button>
            <button class="update-btn" onclick="showScheduleModal()" style="background: linear-gradient(45deg, #6366f1, #4f46e5);">
                <i class="fas fa-calendar-alt"></i>
                ÿ¨ÿØŸàŸÑÿ© ÿßŸÑÿ™ÿ≠ÿØŸäÿ´
            </button>
            <button class="update-btn" onclick="exportData()" style="background: linear-gradient(45deg, #8b5cf6, #7c3aed);">
                <i class="fas fa-download"></i>
                ÿ™ÿµÿØŸäÿ± ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™
            </button>
            <button class="update-btn" onclick="openDisplayPage()" style="background: linear-gradient(45deg, #f59e0b, #d97706);">
                <i class="fas fa-external-link-alt"></i>
                ÿßŸÑÿπÿ±ÿ∂ ÿßŸÑÿßÿ≠ÿ™ÿ±ÿßŸÅŸä
            </button>
            <button class="update-btn" onclick="showHelpModal()" style="background: linear-gradient(45deg, #64748b, #475569);">
                <i class="fas fa-question-circle"></i>
                ÿßŸÑŸÖÿ≥ÿßÿπÿØÿ©
            </button>
            <button class="update-btn" onclick="showLogoStats()" style="background: linear-gradient(45deg, #10b981, #059669);">
                <i class="fas fa-images"></i>
                ÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™ ÿßŸÑÿ¥ÿπÿßÿ±ÿßÿ™
            </button>
            <button class="update-btn" onclick="diagnoseLinkingIssues()" style="background: linear-gradient(45deg, #e74c3c, #c0392b);">
                <i class="fas fa-stethoscope"></i>
                ÿ™ÿ¥ÿÆŸäÿµ ÿßŸÑÿ±ÿ®ÿ∑
            </button>
        </div>

        <div id="loadingSection" class="loading" style="display: none;">
            <div class="loading-spinner"></div>
            <p id="loadingText">ÿ¨ÿßÿ±Ÿä ÿßÿ≥ÿ™ÿÆÿ±ÿßÿ¨ ÿ£ÿ≠ÿØÿ´ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ŸÖŸÜ Transfermarkt...</p>
            <div class="progress-container">
                <div class="progress-bar" id="progressBar"></div>
                <div class="progress-text" id="progressText">0%</div>
            </div>
        </div>

        <div id="errorSection" class="error-message" style="display: none;">
            <i class="fas fa-exclamation-triangle"></i>
            <p>ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ ŸÅŸä ÿßÿ≥ÿ™ÿÆÿ±ÿßÿ¨ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™. Ÿäÿ±ÿ¨Ÿâ ÿßŸÑŸÖÿ≠ÿßŸàŸÑÿ© ŸÖÿ±ÿ© ÿ£ÿÆÿ±Ÿâ.</p>
        </div>

        <!-- ŸÇÿ≥ŸÖ ÿßŸÑÿ•ÿ¨ŸÖÿßŸÑŸäÿßÿ™ ÿßŸÑŸÖÿ≠ÿ≥ŸÜ - ÿ•Ÿäÿ±ÿßÿØÿßÿ™ ŸàŸÖÿµÿ±ŸàŸÅÿßÿ™ ŸÅŸÇÿ∑ -->
        <div id="totalsSection" class="totals-section" style="display: none;">
            <div class="total-card">
                <div class="total-icon">
                    <i class="fas fa-euro-sign"></i>
                </div>
                <div class="total-value" id="totalExpenditure">‚Ç¨0.00m</div>
                <div class="total-label">ÿ•ÿ¨ŸÖÿßŸÑŸä ÿßŸÑÿ•ŸÜŸÅÿßŸÇ</div>
            </div>

            <div class="total-card">
                <div class="total-icon">
                    <i class="fas fa-chart-line"></i>
                </div>
                <div class="total-value" id="totalIncome">‚Ç¨0.00m</div>
                <div class="total-label">ÿ•ÿ¨ŸÖÿßŸÑŸä ÿßŸÑÿ•Ÿäÿ±ÿßÿØÿßÿ™</div>
            </div>

            <div class="total-card">
                <div class="total-icon">
                    <i class="fas fa-balance-scale"></i>
                </div>
                <div class="total-value" id="totalBalance">‚Ç¨0.00m</div>
                <div class="total-label">ÿµÿßŸÅŸä ÿßŸÑŸÖŸäÿ≤ÿßŸÜŸäÿ©</div>
            </div>

            <div class="total-card">
                <div class="total-icon">
                    <i class="fas fa-trophy"></i>
                </div>
                <div class="total-value" id="totalClubs">10</div>
                <div class="total-label">ÿπÿØÿØ ÿßŸÑÿ£ŸÜÿØŸäÿ©</div>
            </div>
        </div>

        <div id="clubsGrid" class="clubs-grid">
            <!-- ÿ≥Ÿäÿ™ŸÖ ŸÖŸÑÿ° ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ŸáŸÜÿß -->
        </div>

        <div id="lastUpdated" class="last-updated">
            ÿ¢ÿÆÿ± ÿ™ÿ≠ÿØŸäÿ´: ŸÑŸÖ Ÿäÿ™ŸÖ ÿßŸÑÿ™ÿ≠ÿØŸäÿ´ ÿ®ÿπÿØ
        </div>
    </div>

    <!-- ŸÜÿßŸÅÿ∞ÿ© ÿ¨ÿØŸàŸÑÿ© ÿßŸÑÿ™ÿ≠ÿØŸäÿ´ -->
    <div id="scheduleModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-calendar-alt"></i> ÿ¨ÿØŸàŸÑÿ© ÿßŸÑÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ∞ŸÉŸä</h3>
                <button class="close-btn" onclick="closeScheduleModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="schedule-option">
                    <label>
                        <input type="radio" name="scheduleType" value="interval" checked>
                        <span>ÿ™ÿ≠ÿØŸäÿ´ ÿØŸàÿ±Ÿä</span>
                    </label>
                    <div class="interval-options">
                        <select id="intervalSelect">
                            <option value="1">ŸÉŸÑ ÿØŸÇŸäŸÇÿ©</option>
                            <option value="5" selected>ŸÉŸÑ 5 ÿØŸÇÿßÿ¶ŸÇ</option>
                            <option value="10">ŸÉŸÑ 10 ÿØŸÇÿßÿ¶ŸÇ</option>
                            <option value="15">ŸÉŸÑ 15 ÿØŸÇŸäŸÇÿ©</option>
                            <option value="30">ŸÉŸÑ 30 ÿØŸÇŸäŸÇÿ©</option>
                            <option value="60">ŸÉŸÑ ÿ≥ÿßÿπÿ©</option>
                        </select>
                    </div>
                </div>

                <div class="schedule-option">
                    <label>
                        <input type="radio" name="scheduleType" value="specific">
                        <span>ÿ£ŸàŸÇÿßÿ™ ŸÖÿ≠ÿØÿØÿ©</span>
                    </label>
                    <div class="specific-times">
                        <input type="time" id="time1" value="09:00">
                        <input type="time" id="time2" value="15:00">
                        <input type="time" id="time3" value="21:00">
                    </div>
                </div>

                <div class="schedule-option">
                    <label>
                        <input type="checkbox" id="smartUpdate">
                        <span>ÿßŸÑÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ∞ŸÉŸä (ÿ™ÿ≠ÿØŸäÿ´ ÿπŸÜÿØ ÿ™ÿ∫ŸäŸäÿ± ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ŸÅŸÇÿ∑)</span>
                    </label>
                </div>

                <div class="schedule-option">
                    <label>
                        <input type="checkbox" id="offlineMode">
                        <span>ÿßŸÑŸàÿ∂ÿπ ÿ∫Ÿäÿ± ÿßŸÑŸÖÿ™ÿµŸÑ (ÿ≠ŸÅÿ∏ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ŸÖÿ≠ŸÑŸäÿßŸã)</span>
                    </label>
                </div>
            </div>
            <div class="modal-footer">
                <button class="modal-btn cancel" onclick="closeScheduleModal()">ÿ•ŸÑÿ∫ÿßÿ°</button>
                <button class="modal-btn confirm" onclick="applySchedule()">ÿ™ÿ∑ÿ®ŸäŸÇ</button>
            </div>
        </div>
    </div>

    <script src="system-monitor.js"></script>
    <script>
        // ÿßŸÑÿ™ÿ£ŸÉÿØ ŸÖŸÜ Ÿàÿ¨ŸàÿØ ŸÜÿ∏ÿßŸÖ ÿßŸÑÿ¥ÿπÿßÿ±ÿßÿ™
        if (typeof SmartLogoSystem === 'undefined') {
            console.warn('‚ö†Ô∏è ŸÜÿ∏ÿßŸÖ ÿßŸÑÿ¥ÿπÿßÿ±ÿßÿ™ ÿ∫Ÿäÿ± ŸÖÿ≠ŸÖŸÑ - ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ ŸÜÿ∏ÿßŸÖ ÿ®ÿØŸäŸÑ');
            window.SmartLogoSystem = {
                getClubLogo: function(clubName) {
                    return `https://ui-avatars.com/api/?name=${encodeURIComponent(clubName.substring(0, 2))}&size=400&background=1a1a2e&color=ffd700&bold=true&format=png&rounded=true&font-size=0.6`;
                },
                getStats: function() {
                    return { totalClubs: 0, cachedLogos: 0, fallbackSources: 0 };
                }
            };
        }

        // ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÅÿ™ÿ±ÿßÿ∂Ÿäÿ© ŸÑŸÑÿπÿ±ÿ∂ ÿßŸÑÿ£ŸàŸÑŸä (ÿ≥Ÿäÿ™ŸÖ ÿ™ÿ≠ÿØŸäÿ´Ÿáÿß ÿ®ÿßŸÑÿ¥ÿπÿßÿ±ÿßÿ™ ÿßŸÑŸÖÿ≠ÿ≥ŸÜÿ©)
        let defaultClubsData = [
            {
                rank: 1,
                name: "ŸÑŸäŸÅÿ±ÿ®ŸàŸÑ",
                englishName: "Liverpool FC",
                expenditure: "‚Ç¨308.68m",
                arrivals: 13,
                income: "‚Ç¨63.30m",
                departures: 6,
                balance: "‚Ç¨-245.38m",
                league: "ÿßŸÑÿØŸàÿ±Ÿä ÿßŸÑÿ•ŸÜÿ¨ŸÑŸäÿ≤Ÿä ÿßŸÑŸÖŸÖÿ™ÿßÿ≤",
                logo: "https://logos-world.net/wp-content/uploads/2020/06/Liverpool-Logo.png"
            },
            {
                rank: 2,
                name: "ÿ™ÿ¥ŸäŸÑÿ≥Ÿä",
                englishName: "Chelsea FC",
                expenditure: "‚Ç¨243.77m",
                arrivals: 22,
                income: "‚Ç¨121.48m",
                departures: 8,
                balance: "‚Ç¨-122.29m",
                league: "ÿßŸÑÿØŸàÿ±Ÿä ÿßŸÑÿ•ŸÜÿ¨ŸÑŸäÿ≤Ÿä ÿßŸÑŸÖŸÖÿ™ÿßÿ≤",
                logo: "https://logos-world.net/wp-content/uploads/2020/06/Chelsea-Logo.png"
            },
            {
                rank: 3,
                name: "ÿ±ŸäÿßŸÑ ŸÖÿØÿ±ŸäÿØ",
                englishName: "Real Madrid",
                expenditure: "‚Ç¨167.50m",
                arrivals: 7,
                income: "‚Ç¨2.00m",
                departures: 4,
                balance: "‚Ç¨-165.50m",
                league: "ÿßŸÑÿØŸàÿ±Ÿä ÿßŸÑÿ•ÿ≥ÿ®ÿßŸÜŸä",
                logo: "https://logos-world.net/wp-content/uploads/2020/06/Real-Madrid-Logo.png"
            }
        ];

        let currentData = [...defaultClubsData];

        // ÿπÿ±ÿ∂ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ŸÖÿπ ÿßŸÑÿ•ÿ¨ŸÖÿßŸÑŸäÿßÿ™
        function displayClubs(clubs) {
            const grid = document.getElementById('clubsGrid');
            grid.innerHTML = '';

            clubs.forEach(club => {
                const clubCard = createClubCard(club);
                grid.appendChild(clubCard);
            });

            // ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ•ÿ¨ŸÖÿßŸÑŸäÿßÿ™
            updateTotals(clubs);
        }

        // ÿ™ÿ≠ÿØŸäÿ´ ŸÇÿ≥ŸÖ ÿßŸÑÿ•ÿ¨ŸÖÿßŸÑŸäÿßÿ™ ÿßŸÑŸÖÿ≠ÿ≥ŸÜ - ÿ•Ÿäÿ±ÿßÿØÿßÿ™ ŸàŸÖÿµÿ±ŸàŸÅÿßÿ™ ŸÅŸÇÿ∑
        function updateTotals(clubs) {
            if (!clubs || clubs.length === 0) {
                console.warn('ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ®ŸäÿßŸÜÿßÿ™ ÿ£ŸÜÿØŸäÿ© ŸÑÿ≠ÿ≥ÿßÿ® ÿßŸÑÿ•ÿ¨ŸÖÿßŸÑŸäÿßÿ™');
                return;
            }

            console.log('üßÆ ÿ®ÿØÿ° ÿ≠ÿ≥ÿßÿ® ÿßŸÑÿ•ÿ¨ŸÖÿßŸÑŸäÿßÿ™ ŸÑŸÄ', clubs.length, 'ŸÜÿßÿØŸä');

            // ÿ≠ÿ≥ÿßÿ® ÿßŸÑÿ•ÿ¨ŸÖÿßŸÑŸäÿßÿ™ ÿßŸÑŸÖÿßŸÑŸäÿ© ŸÅŸÇÿ∑
            let totalExpenditure = 0;
            let totalIncome = 0;
            let totalBalance = 0;
            let validClubs = 0;

            clubs.forEach((club, index) => {
                try {
                    // ÿ™ÿ≠ŸàŸäŸÑ ÿßŸÑÿ•ŸÜŸÅÿßŸÇ ŸÖŸÜ ŸÜÿµ ÿ•ŸÑŸâ ÿ±ŸÇŸÖ ŸÖÿπ ŸÖÿπÿßŸÑÿ¨ÿ© ÿ£ŸÅÿ∂ŸÑ
                    let expenditureValue = 0;
                    if (club.expenditure && typeof club.expenditure === 'string') {
                        const cleanExpenditure = club.expenditure.replace(/[^0-9.-]/g, '');
                        expenditureValue = parseFloat(cleanExpenditure) || 0;

                        // ÿ•ÿ∞ÿß ŸÉÿßŸÜ ÿßŸÑÿ±ŸÇŸÖ ÿµÿ∫Ÿäÿ± ÿ¨ÿØÿßŸãÿå ŸÇÿØ ŸäŸÉŸàŸÜ ÿ®ÿßŸÑŸÖŸÑŸäÿßÿ±ÿßÿ™
                        if (expenditureValue < 1 && expenditureValue > 0) {
                            expenditureValue = expenditureValue * 1000;
                        }
                    }
                    totalExpenditure += expenditureValue;

                    // ÿ™ÿ≠ŸàŸäŸÑ ÿßŸÑÿ•Ÿäÿ±ÿßÿØÿßÿ™ ŸÖŸÜ ŸÜÿµ ÿ•ŸÑŸâ ÿ±ŸÇŸÖ
                    let incomeValue = 0;
                    if (club.income && typeof club.income === 'string') {
                        const cleanIncome = club.income.replace(/[^0-9.-]/g, '');
                        incomeValue = parseFloat(cleanIncome) || 0;

                        if (incomeValue < 1 && incomeValue > 0) {
                            incomeValue = incomeValue * 1000;
                        }
                    }
                    totalIncome += incomeValue;

                    // ÿ≠ÿ≥ÿßÿ® ÿßŸÑŸÖŸäÿ≤ÿßŸÜŸäÿ© (ÿßŸÑÿ•Ÿäÿ±ÿßÿØÿßÿ™ - ÿßŸÑŸÖÿµÿ±ŸàŸÅÿßÿ™)
                    const balanceValue = incomeValue - expenditureValue;
                    totalBalance += balanceValue;

                    validClubs++;

                    console.log(`ÿßŸÑŸÜÿßÿØŸä ${index + 1} (${club.name}):`, {
                        expenditure: expenditureValue,
                        income: incomeValue,
                        balance: balanceValue
                    });

                } catch (error) {
                    console.error(`ÿÆÿ∑ÿ£ ŸÅŸä ŸÖÿπÿßŸÑÿ¨ÿ© ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÜÿßÿØŸä ${index + 1}:`, error);
                }
            });

            console.log('üìä ÿßŸÑÿ•ÿ¨ŸÖÿßŸÑŸäÿßÿ™ ÿßŸÑŸÖÿ≠ÿ≥Ÿàÿ®ÿ©:', {
                totalExpenditure: totalExpenditure.toFixed(2),
                totalIncome: totalIncome.toFixed(2),
                totalBalance: totalBalance.toFixed(2),
                validClubs
            });

            // ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿπŸÜÿßÿµÿ± ŸÅŸä ÿßŸÑŸàÿßÿ¨Ÿáÿ© ŸÖÿπ ÿ™ŸÜÿ≥ŸäŸÇ ÿ£ŸÅÿ∂ŸÑ
            const expenditureElement = document.getElementById('totalExpenditure');
            const incomeElement = document.getElementById('totalIncome');
            const balanceElement = document.getElementById('totalBalance');
            const clubsElement = document.getElementById('totalClubs');

            if (expenditureElement) {
                expenditureElement.textContent = `‚Ç¨${totalExpenditure.toFixed(1)}m`;
                expenditureElement.style.color = '#ef4444'; // ÿ£ÿ≠ŸÖÿ± ŸÑŸÑÿ•ŸÜŸÅÿßŸÇ
            }

            if (incomeElement) {
                incomeElement.textContent = `‚Ç¨${totalIncome.toFixed(1)}m`;
                incomeElement.style.color = '#10b981'; // ÿ£ÿÆÿ∂ÿ± ŸÑŸÑÿ•Ÿäÿ±ÿßÿØÿßÿ™
            }

            if (balanceElement) {
                const balanceColor = totalBalance >= 0 ? '#10b981' : '#ef4444';
                const balanceSign = totalBalance >= 0 ? '+' : '';
                balanceElement.textContent = `‚Ç¨${balanceSign}${totalBalance.toFixed(1)}m`;
                balanceElement.style.color = balanceColor;
            }

            if (clubsElement) {
                clubsElement.textContent = validClubs;
                clubsElement.style.color = '#ffd700'; // ÿ∞Ÿáÿ®Ÿä ŸÑÿπÿØÿØ ÿßŸÑÿ£ŸÜÿØŸäÿ©
            }

            // ÿ•ÿ∏Ÿáÿßÿ± ŸÇÿ≥ŸÖ ÿßŸÑÿ•ÿ¨ŸÖÿßŸÑŸäÿßÿ™ ŸÖÿπ ÿ™ÿ£ÿ´Ÿäÿ±
            const totalsSection = document.getElementById('totalsSection');
            if (totalsSection) {
                totalsSection.style.display = 'grid';
                totalsSection.style.opacity = '0';
                totalsSection.style.transform = 'translateY(20px)';

                // ÿ™ÿ£ÿ´Ÿäÿ± ÿ∏ŸáŸàÿ± ÿ™ÿØÿ±Ÿäÿ¨Ÿä
                setTimeout(() => {
                    totalsSection.style.transition = 'all 0.5s ease';
                    totalsSection.style.opacity = '1';
                    totalsSection.style.transform = 'translateY(0)';
                }, 100);
            }

            console.log('‚úÖ ÿ™ŸÖ ÿ™ÿ≠ÿØŸäÿ´ ŸÇÿ≥ŸÖ ÿßŸÑÿ•ÿ¨ŸÖÿßŸÑŸäÿßÿ™ ÿ®ŸÜÿ¨ÿßÿ≠');
        }

        // ÿ•ŸÜÿ¥ÿßÿ° ÿ®ÿ∑ÿßŸÇÿ© ÿßŸÑŸÜÿßÿØŸä ŸÖÿπ ŸÜÿ∏ÿßŸÖ ÿßŸÑÿ¥ÿπÿßÿ±ÿßÿ™ ÿßŸÑŸÖÿ≠ÿ≥ŸÜ ŸàÿßŸÑÿ£ÿ≥ŸÖÿßÿ° ÿßŸÑÿπÿ±ÿ®Ÿäÿ©
        function createClubCard(club) {
            const card = document.createElement('div');
            card.className = 'club-card';

            // ÿßŸÑÿ≠ÿµŸàŸÑ ÿπŸÑŸâ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿ¥ÿπÿßÿ± ÿßŸÑŸÖÿ≠ÿ≥ŸÜÿ© (ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ ÿßŸÑÿßÿ≥ŸÖ ÿßŸÑÿ•ŸÜÿ¨ŸÑŸäÿ≤Ÿä ŸÑŸÑÿ®ÿ≠ÿ´)
            const searchName = club.englishName || club.name;
            const logoData = ClubLogoManager.getClubLogo(searchName);
            const primaryLogo = club.logo || logoData.primary;
            const fallbackLogo = club.logoFallback || logoData.fallback;
            const league = club.league || logoData.league;

            // ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ ÿßŸÑÿßÿ≥ŸÖ ÿßŸÑÿπÿ±ÿ®Ÿä ŸÑŸÑÿπÿ±ÿ∂
            const displayName = club.name;

            card.innerHTML = `
                <div class="club-rank">${club.rank}</div>

                <div class="club-header">
                    <img src="${primaryLogo}"
                         alt="${displayName}"
                         class="club-logo"
                         data-fallback="${fallbackLogo}"
                         onerror="handleLogoError(this, '${searchName}')">
                    <div class="club-info">
                        <div class="club-name">${displayName}</div>
                        <div class="club-league">${league}</div>
                    </div>
                </div>

                <div class="expenditure-section">
                    <div class="expenditure-label">ÿ•ÿ¨ŸÖÿßŸÑŸä ÿßŸÑÿ•ŸÜŸÅÿßŸÇ</div>
                    <div class="expenditure-amount">${club.expenditure}</div>
                </div>

                <div class="stats-row">
                    <div class="stat-item">
                        <div class="stat-value" style="color: #10b981;">${club.income || '‚Ç¨0.00m'}</div>
                        <div class="stat-label">ÿßŸÑÿ•Ÿäÿ±ÿßÿØÿßÿ™</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" style="color: #3b82f6;">${club.balance || '‚Ç¨0.00m'}</div>
                        <div class="stat-label">ÿµÿßŸÅŸä ÿßŸÑŸÖŸäÿ≤ÿßŸÜŸäÿ©</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" style="color: #f59e0b;">${club.league || 'ÿ∫Ÿäÿ± ŸÖÿ≠ÿØÿØ'}</div>
                        <div class="stat-label">ÿßŸÑÿØŸàÿ±Ÿä</div>
                    </div>
                </div>
            `;

            return card;
        }

        // ŸÖÿπÿßŸÑÿ¨ÿ© ÿ£ÿÆÿ∑ÿßÿ° ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ¥ÿπÿßÿ±ÿßÿ™ ÿßŸÑŸÖÿ≠ÿ≥ŸÜÿ© ŸÖÿπ ÿØÿπŸÖ ÿßŸÑÿ£ŸÜÿØŸäÿ© ÿßŸÑÿ¨ÿØŸäÿØÿ©
        function handleLogoError(imgElement, clubName) {
            const fallbackUrl = imgElement.getAttribute('data-fallback');
            const currentSrc = imgElement.src;

            // ÿ•ÿ∂ÿßŸÅÿ© ÿ™ÿ£ÿ´Ÿäÿ± ÿ™ÿ≠ŸÖŸäŸÑ
            imgElement.style.opacity = '0.5';

            // ŸÖÿ≠ÿßŸàŸÑÿ© ÿßŸÑÿ®ÿ≠ÿ´ ÿπŸÜ ÿ¥ÿπÿßÿ± ÿ®ÿØŸäŸÑ ŸÑŸÑÿ£ŸÜÿØŸäÿ© ÿßŸÑÿ¨ÿØŸäÿØÿ©
            const alternativeLogos = [
                `https://logos-world.net/wp-content/uploads/2020/06/${clubName.replace(/\s+/g, '-').toLowerCase()}-logo.png`,
                `https://logoeps.com/wp-content/uploads/2013/03/${clubName.replace(/\s+/g, '-').toLowerCase()}-vector-logo.png`,
                `https://seeklogo.com/images/${clubName.charAt(0).toLowerCase()}/${clubName.replace(/\s+/g, '-').toLowerCase()}-logo-vector.png`
            ];
            imgElement.style.filter = 'blur(2px)';

            if (fallbackUrl && currentSrc !== fallbackUrl) {
                // ŸÖÿ≠ÿßŸàŸÑÿ© ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ ÿßŸÑÿ¥ÿπÿßÿ± ÿßŸÑÿßÿ≠ÿ™Ÿäÿßÿ∑Ÿä
                imgElement.src = fallbackUrl;

                // ÿ•ÿ∂ÿßŸÅÿ© ŸÖÿ≥ÿ™ŸÖÿπ ŸÑŸÑŸÜÿ¨ÿßÿ≠
                imgElement.onload = function() {
                    this.style.opacity = '1';
                    this.style.filter = 'none';
                    this.onload = null;
                };

            } else {
                // ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ ÿ¥ÿπÿßÿ± ÿßŸÅÿ™ÿ±ÿßÿ∂Ÿä ŸÖÿÆÿµÿµ
                const logoData = ClubLogoManager.getClubLogo(clubName);

                // ŸÖÿ≠ÿßŸàŸÑÿ© ÿ¥ÿπÿßÿ±ÿßÿ™ ŸÖÿ™ÿπÿØÿØÿ©
                const fallbackOptions = [
                    logoData.fallback,
                    `https://tmssl.akamaized.net/images/wappen/head/${getClubId(clubName)}.png`,
                    `https://tmssl.akamaized.net/images/wappen/tiny/${getClubId(clubName)}.png`,
                    createCustomLogo(clubName)
                ];

                tryNextFallback(imgElement, fallbackOptions, 0, clubName);
            }
        }

        // ŸÖÿ≠ÿßŸàŸÑÿ© ÿßŸÑÿ¥ÿπÿßÿ±ÿßÿ™ ÿßŸÑÿßÿ≠ÿ™Ÿäÿßÿ∑Ÿäÿ© ÿ®ÿßŸÑÿ™ÿ≥ŸÑÿ≥ŸÑ
        function tryNextFallback(imgElement, fallbackOptions, index, clubName) {
            if (index >= fallbackOptions.length) {
                // ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ ÿßŸÑÿ¥ÿπÿßÿ± ÿßŸÑŸÜÿµŸä ÿßŸÑŸÜŸáÿßÿ¶Ÿä
                imgElement.src = createCustomLogo(clubName);
                imgElement.style.opacity = '1';
                imgElement.style.filter = 'none';
                imgElement.onerror = null;
                return;
            }

            imgElement.src = fallbackOptions[index];

            imgElement.onload = function() {
                this.style.opacity = '1';
                this.style.filter = 'none';
                this.onload = null;
                this.onerror = null;
            };

            imgElement.onerror = function() {
                tryNextFallback(this, fallbackOptions, index + 1, clubName);
            };
        }

        // ÿ•ŸÜÿ¥ÿßÿ° ÿ¥ÿπÿßÿ± ŸÖÿÆÿµÿµ ŸÑŸÑŸÜÿßÿØŸä
        function createCustomLogo(clubName) {
            const firstLetter = clubName.charAt(0).toUpperCase();
            const colors = {
                'L': '4CAF50', 'C': '2196F3', 'M': 'FF5722', 'A': 'E91E63',
                'R': 'FFFFFF', 'T': '9C27B0', 'J': '000000', 'B': 'FF9800',
                'P': '3F51B5', 'I': '009688', 'N': 'FFC107', 'D': '795548'
            };

            const bgColor = colors[firstLetter] || 'ffd700';
            const textColor = ['FFFFFF', 'FFC107', 'FFEB3B'].includes(bgColor) ? '000000' : 'FFFFFF';

            return `https://via.placeholder.com/100x100/${bgColor}/${textColor}?text=${firstLetter}`;
        }

        // ÿßŸÑÿ≠ÿµŸàŸÑ ÿπŸÑŸâ ID ÿßŸÑŸÜÿßÿØŸä (ÿ™ŸÇÿØŸäÿ± ÿ™ŸÇÿ±Ÿäÿ®Ÿä)
        function getClubId(clubName) {
            const clubIds = {
                'Liverpool FC': '31',
                'Chelsea FC': '631',
                'Manchester United': '985',
                'Manchester City': '281',
                'Arsenal FC': '11',
                'Tottenham Hotspur': '148',
                'Real Madrid': '418',
                'FC Barcelona': '131',
                'Atl√©tico de Madrid': '13',
                'Juventus FC': '506',
                'AC Milan': '5',
                'Inter Milan': '46',
                'Bayern Munich': '27',
                'Borussia Dortmund': '16',
                'Bayer 04 Leverkusen': '15',
                'Paris Saint-Germain': '583'
            };

            return clubIds[clubName] || Math.floor(Math.random() * 1000);
        }

        // ÿßÿ≥ÿ™ÿÆÿ±ÿßÿ¨ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿ≠ŸÇŸäŸÇŸäÿ© ŸÖÿπ ŸÜÿ∏ÿßŸÖ ŸÖÿ™ÿ∑Ÿàÿ±
        async function fetchLatestData() {
            const loadingSection = document.getElementById('loadingSection');
            const errorSection = document.getElementById('errorSection');
            const updateBtn = document.querySelector('.update-btn');

            // ÿ•ÿ∏Ÿáÿßÿ± ÿßŸÑÿ™ÿ≠ŸÖŸäŸÑ ŸÖÿπ ÿ±ÿ≥ÿßŸÑÿ© ÿ™ŸÅÿµŸäŸÑŸäÿ©
            loadingSection.style.display = 'block';
            errorSection.style.display = 'none';
            updateBtn.disabled = true;
            updateBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ™ÿ≠ÿØŸäÿ´...';

            // ÿ™ÿ≠ÿØŸäÿ´ ŸÖÿ§ÿ¥ÿ± ÿßŸÑÿ™ŸÇÿØŸÖ
            updateProgress(0, 'ÿ®ÿØÿ° ÿßŸÑÿ™ÿ≠ÿØŸäÿ´...');

            try {
                // ŸÖÿ±ÿ≠ŸÑÿ© 1: ÿßŸÑÿßÿ™ÿµÿßŸÑ
                updateProgress(20, 'ÿ¨ÿßÿ±Ÿä ÿßŸÑÿßÿ™ÿµÿßŸÑ ÿ®ŸÄ Transfermarkt...');
                await new Promise(resolve => setTimeout(resolve, 500));

                // ŸÖÿ±ÿ≠ŸÑÿ© 2: ÿßÿ≥ÿ™ÿÆÿ±ÿßÿ¨ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿ®ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ ÿßŸÑŸÜÿ∏ÿßŸÖ ÿßŸÑŸÖÿ≠ÿ≥ŸÜ
                updateProgress(40, 'ÿ¨ÿßÿ±Ÿä ÿßÿ≥ÿ™ÿÆÿ±ÿßÿ¨ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿ®ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ ÿßŸÑŸÜÿ∏ÿßŸÖ ÿßŸÑŸÖÿ≠ÿ≥ŸÜ...');
                let response = null;

                try {
                    // ŸÖÿ≠ÿßŸàŸÑÿ© ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ ÿßŸÑŸÜÿ∏ÿßŸÖ ÿßŸÑŸÖÿ≠ÿ≥ŸÜ ÿ£ŸàŸÑÿßŸã
                    const enhancedResponse = await fetch('/api/transfermarkt/enhanced-extract', {
                        method: 'GET',
                        headers: {
                            'Accept': 'application/json',
                            'Content-Type': 'application/json'
                        }
                    });

                    if (enhancedResponse.ok) {
                        const enhancedResult = await enhancedResponse.json();
                        if (enhancedResult.success && enhancedResult.data && enhancedResult.data.length > 0) {
                            response = enhancedResult.data;
                            console.log('‚úÖ ÿ™ŸÖ ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ ÿßŸÑŸÜÿ∏ÿßŸÖ ÿßŸÑŸÖÿ≠ÿ≥ŸÜ ÿ®ŸÜÿ¨ÿßÿ≠');
                            updateProgress(50, 'ÿ™ŸÖ ÿßŸÑÿ≠ÿµŸàŸÑ ÿπŸÑŸâ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ŸÖŸÜ ÿßŸÑŸÜÿ∏ÿßŸÖ ÿßŸÑŸÖÿ≠ÿ≥ŸÜ...');
                        }
                    }
                } catch (enhancedError) {
                    console.warn('‚ö†Ô∏è ŸÅÿ¥ŸÑ ÿßŸÑŸÜÿ∏ÿßŸÖ ÿßŸÑŸÖÿ≠ÿ≥ŸÜÿå ŸÖÿ≠ÿßŸàŸÑÿ© ÿßŸÑŸÜÿ∏ÿßŸÖ ÿßŸÑÿ™ŸÇŸÑŸäÿØŸä:', enhancedError);
                }

                // ÿ•ÿ∞ÿß ŸÅÿ¥ŸÑ ÿßŸÑŸÜÿ∏ÿßŸÖ ÿßŸÑŸÖÿ≠ÿ≥ŸÜÿå ÿßÿ≥ÿ™ÿÆÿØŸÖ ÿßŸÑŸÜÿ∏ÿßŸÖ ÿßŸÑÿ™ŸÇŸÑŸäÿØŸä
                if (!response) {
                    updateProgress(45, 'ÿ¨ÿßÿ±Ÿä ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ ÿßŸÑŸÜÿ∏ÿßŸÖ ÿßŸÑÿ™ŸÇŸÑŸäÿØŸä...');
                    response = await fetchTransfermarktData();
                }

                if (response && response.length > 0) {
                    // ŸÖÿ±ÿ≠ŸÑÿ© 3: ŸÖÿπÿßŸÑÿ¨ÿ© ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™
                    updateProgress(60, 'ÿ¨ÿßÿ±Ÿä ŸÖÿπÿßŸÑÿ¨ÿ© ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™...');
                    await new Promise(resolve => setTimeout(resolve, 300));

                    currentData = response.slice(0, 10); // ÿ£ÿÆÿ∞ ÿ£ŸàŸÑ 10 ÿ£ŸÜÿØŸäÿ©

                    // ÿ•ÿ∂ÿßŸÅÿ© ŸÖÿπŸÑŸàŸÖÿßÿ™ ÿ•ÿ∂ÿßŸÅŸäÿ© ŸÑŸÑÿ®ŸäÿßŸÜÿßÿ™
                    currentData = currentData.map((club, index) => ({
                        ...club,
                        rank: index + 1,
                        lastUpdated: new Date().toISOString(),
                        dataSource: club.dataSource || 'transfermarkt-enhanced'
                    }));

                    // ŸÖÿ±ÿ≠ŸÑÿ© 4: ÿπÿ±ÿ∂ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™
                    updateProgress(80, 'ÿ¨ÿßÿ±Ÿä ÿπÿ±ÿ∂ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™...');
                    await new Promise(resolve => setTimeout(resolve, 300));

                    displayClubs(currentData);
                    updateLastUpdatedTime();

                    // ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ•ÿ¨ŸÖÿßŸÑŸäÿßÿ™
                    updateTotals(currentData);

                    // ŸÖÿ±ÿ≠ŸÑÿ© 5: ÿ≠ŸÅÿ∏ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™
                    updateProgress(90, 'ÿ¨ÿßÿ±Ÿä ÿ≠ŸÅÿ∏ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™...');

                    const dataToSave = {
                        clubs: currentData,
                        lastUpdate: new Date().toISOString(),
                        source: 'transfermarkt-live',
                        season: '2024/2025',
                        totalClubs: currentData.length
                    };

                    // ÿ≠ŸÅÿ∏ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿ®ÿ∑ÿ±ŸÇ ŸÖÿ™ÿπÿØÿØÿ© ŸÑÿ∂ŸÖÿßŸÜ ÿßŸÑÿßÿ≥ÿ™ŸÖÿ±ÿßÿ±Ÿäÿ©
                    try {
                        localStorage.setItem('transfermarktData', JSON.stringify(currentData));
                        localStorage.setItem('transfermarktDataFull', JSON.stringify(dataToSave));
                        localStorage.setItem('transfermarktLastUpdate', new Date().toISOString());

                        // ÿ≠ŸÅÿ∏ ÿ•ÿ∂ÿßŸÅŸä ŸÅŸä sessionStorage
                        sessionStorage.setItem('transfermarktData', JSON.stringify(currentData));
                        sessionStorage.setItem('transfermarktLastUpdate', new Date().toISOString());

                        // ÿ≠ŸÅÿ∏ ŸÅŸä IndexedDB ŸÑŸÑŸÖÿ™ÿµŸÅÿ≠ÿßÿ™ ÿßŸÑÿ™Ÿä ÿ™ÿØÿπŸÖŸá
                        if ('indexedDB' in window) {
                            saveToIndexedDB('transfermarktData', currentData);
                        }

                        console.log('üíæ ÿ™ŸÖ ÿ≠ŸÅÿ∏ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ŸÅŸä ÿ¨ŸÖŸäÿπ ÿßŸÑŸÖÿÆÿßÿ≤ŸÜ ÿßŸÑŸÖÿ™ÿßÿ≠ÿ©');
                    } catch (storageError) {
                        console.warn('‚ö†Ô∏è ÿÆÿ∑ÿ£ ŸÅŸä ÿ≠ŸÅÿ∏ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™:', storageError);
                        // ÿ≠ŸÅÿ∏ ŸÅŸä ŸÖÿ™ÿ∫Ÿäÿ± ÿπÿßŸÖ ŸÉÿ®ÿØŸäŸÑ
                        window.transfermarktBackupData = currentData;
                    }

                    // ŸÖÿ±ÿ≠ŸÑÿ© 6: ÿßŸÉÿ™ŸÖÿßŸÑ ÿßŸÑÿ™ÿ≠ÿØŸäÿ´
                    updateProgress(100, 'ÿ™ŸÖ ÿßŸÑÿ™ÿ≠ÿØŸäÿ´ ÿ®ŸÜÿ¨ÿßÿ≠!');
                    await new Promise(resolve => setTimeout(resolve, 500));

                    // ÿ•ÿ¥ÿπÿßÿ± ÿßŸÑŸÜÿ¨ÿßÿ≠
                    showNotification('ÿ™ŸÖ ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿ®ŸÜÿ¨ÿßÿ≠ ŸÖŸÜ Transfermarkt!', 'success');

                    // ÿ™ÿ≠ÿØŸäÿ´ ÿµŸÅÿ≠ÿ© ÿßŸÑÿπÿ±ÿ∂ ÿ•ÿ∞ÿß ŸÉÿßŸÜÿ™ ŸÖŸÅÿ™Ÿàÿ≠ÿ©
                    broadcastDataUpdate(currentData);

                } else {
                    throw new Error('ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ®ŸäÿßŸÜÿßÿ™ ŸÖÿ™ÿßÿ≠ÿ© ŸÖŸÜ ÿßŸÑŸÖÿµÿØÿ± ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿä');
                }

            } catch (error) {
                console.error('ÿÆÿ∑ÿ£ ŸÅŸä ÿßÿ≥ÿ™ÿÆÿ±ÿßÿ¨ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™:', error);

                // ÿ™ÿ≠ÿØŸäÿ´ ŸÖÿ§ÿ¥ÿ± ÿßŸÑÿ™ŸÇÿØŸÖ ŸÑŸÑÿÆÿ∑ÿ£
                updateProgress(50, 'ÿ¨ÿßÿ±Ÿä ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿßÿ≠ÿ™Ÿäÿßÿ∑Ÿäÿ©...');
                await new Promise(resolve => setTimeout(resolve, 500));

                // ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖÿ≠ÿ≥ŸÜÿ© ÿßŸÑÿßŸÅÿ™ÿ±ÿßÿ∂Ÿäÿ©
                const enhancedData = getEnhancedDefaultData();
                currentData = enhancedData;

                updateProgress(80, 'ÿ¨ÿßÿ±Ÿä ÿπÿ±ÿ∂ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿßÿ≠ÿ™Ÿäÿßÿ∑Ÿäÿ©...');
                await new Promise(resolve => setTimeout(resolve, 300));

                displayClubs(currentData);
                updateLastUpdatedTime();

                // ÿ≠ŸÅÿ∏ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿßÿ≠ÿ™Ÿäÿßÿ∑Ÿäÿ©
                const dataToSave = {
                    clubs: currentData,
                    lastUpdate: new Date().toISOString(),
                    source: 'enhanced-default',
                    season: '2024/2025',
                    totalClubs: currentData.length
                };

                localStorage.setItem('transfermarktData', JSON.stringify(currentData));
                localStorage.setItem('transfermarktDataFull', JSON.stringify(dataToSave));
                localStorage.setItem('transfermarktLastUpdate', new Date().toISOString());

                updateProgress(100, 'ÿ™ŸÖ ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿßÿ≠ÿ™Ÿäÿßÿ∑Ÿäÿ©');
                await new Promise(resolve => setTimeout(resolve, 500));

                // ÿ•ÿ∏Ÿáÿßÿ± ÿ±ÿ≥ÿßŸÑÿ© ÿ™ÿ≠ÿ∞Ÿäÿ±Ÿäÿ©
                showNotification('ÿ™ŸÖ ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿßÿ≠ÿ™Ÿäÿßÿ∑Ÿäÿ© ÿßŸÑŸÖÿ≠ÿØÿ´ÿ©', 'warning');
                errorSection.style.display = 'block';
                errorSection.innerHTML = `
                    <i class="fas fa-exclamation-triangle"></i>
                    <p>ŸÑŸÖ Ÿäÿ™ŸÖŸÉŸÜ ŸÖŸÜ ÿßŸÑŸàÿµŸàŸÑ ŸÑŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖÿ®ÿßÿ¥ÿ±ÿ©. ÿ™ŸÖ ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿßÿ≠ÿ™Ÿäÿßÿ∑Ÿäÿ© ÿßŸÑŸÖÿ≠ÿØÿ´ÿ©.</p>
                    <small>ÿ≥Ÿäÿ™ŸÖ ÿßŸÑŸÖÿ≠ÿßŸàŸÑÿ© ŸÖÿ±ÿ© ÿ£ÿÆÿ±Ÿâ ŸÅŸä ÿßŸÑÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ™ÿßŸÑŸä</small>
                `;

            } finally {
                // ÿ•ÿÆŸÅÿßÿ° ŸÖÿ§ÿ¥ÿ± ÿßŸÑÿ™ÿ≠ŸÖŸäŸÑ
                setTimeout(() => {
                    loadingSection.style.display = 'none';
                }, 1000);

                updateBtn.disabled = false;
                updateBtn.innerHTML = '<i class="fas fa-sync-alt"></i> ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿ¢ŸÜ';
            }
        }

        // ÿ®ÿ´ ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ŸÑŸÑÿµŸÅÿ≠ÿßÿ™ ÿßŸÑÿ£ÿÆÿ±Ÿâ
        function broadcastDataUpdate(data) {
            // ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ BroadcastChannel ŸÑŸÑÿ™ŸàÿßÿµŸÑ ÿ®ŸäŸÜ ÿßŸÑÿµŸÅÿ≠ÿßÿ™
            if ('BroadcastChannel' in window) {
                const channel = new BroadcastChannel('transfermarkt-updates');
                channel.postMessage({
                    type: 'data-update',
                    data: data,
                    timestamp: new Date().toISOString()
                });
            }

            // ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ localStorage events ŸÉÿ®ÿØŸäŸÑ
            localStorage.setItem('transfermarkt-broadcast', JSON.stringify({
                type: 'data-update',
                data: data,
                timestamp: new Date().toISOString()
            }));
        }

        // ÿßÿ≥ÿ™ÿÆÿ±ÿßÿ¨ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ŸÖŸÜ Transfermarkt ŸÖÿπ ŸÜÿ∏ÿßŸÖ ŸÖÿ™ÿ∑Ÿàÿ±
        async function fetchTransfermarktData() {
            const proxies = [
                'https://api.allorigins.win/get?url=',
                'https://cors-anywhere.herokuapp.com/',
                'https://thingproxy.freeboard.io/fetch/',
                'https://api.codetabs.com/v1/proxy?quest='
            ];

            const targetUrl = 'https://www.transfermarkt.com/transfers/einnahmenausgaben/statistik/plus/0?ids=a&sa=&saison_id=2025&saison_id_bis=2025&land_id=&nat=&kontinent_id=&pos=&altersklasse=&w_s=&leihe=&intern=0&plus=0';

            // ŸÖÿ≠ÿßŸàŸÑÿ© ÿßÿ≥ÿ™ÿÆÿ±ÿßÿ¨ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿ®ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ ÿπÿØÿ© ÿ∑ÿ±ŸÇ
            for (let i = 0; i < proxies.length; i++) {
                try {
                    console.log(`ŸÖÿ≠ÿßŸàŸÑÿ© ÿßÿ≥ÿ™ÿÆÿ±ÿßÿ¨ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿ®ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ ÿßŸÑÿ∑ÿ±ŸäŸÇÿ© ${i + 1}...`);

                    let response, data;

                    if (i === 0) {
                        // AllOrigins
                        response = await fetch(proxies[i] + encodeURIComponent(targetUrl), {
                            headers: {
                                'Accept': 'application/json',
                                'Content-Type': 'application/json'
                            }
                        });
                        data = await response.json();
                        if (data.contents) {
                            const parsed = parseTransfermarktHTML(data.contents);
                            if (parsed && parsed.length > 0) return parsed;
                        }
                    } else if (i === 1) {
                        // CORS Anywhere
                        response = await fetch(proxies[i] + targetUrl, {
                            headers: {
                                'X-Requested-With': 'XMLHttpRequest'
                            }
                        });
                        if (response.ok) {
                            const html = await response.text();
                            const parsed = parseTransfermarktHTML(html);
                            if (parsed && parsed.length > 0) return parsed;
                        }
                    } else {
                        // Other proxies
                        response = await fetch(proxies[i] + encodeURIComponent(targetUrl));
                        if (response.ok) {
                            const html = await response.text();
                            const parsed = parseTransfermarktHTML(html);
                            if (parsed && parsed.length > 0) return parsed;
                        }
                    }
                } catch (error) {
                    console.log(`ŸÅÿ¥ŸÑ ŸÅŸä ÿßŸÑÿ∑ÿ±ŸäŸÇÿ© ${i + 1}:`, error.message);
                    continue;
                }
            }

            // ŸÖÿ≠ÿßŸàŸÑÿ© ÿßÿ≥ÿ™ÿÆÿ±ÿßÿ¨ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ŸÖŸÜ ŸÖÿµÿßÿØÿ± ÿ®ÿØŸäŸÑÿ©
            try {
                console.log('ŸÖÿ≠ÿßŸàŸÑÿ© ÿßÿ≥ÿ™ÿÆÿ±ÿßÿ¨ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ŸÖŸÜ ŸÖÿµÿßÿØÿ± ÿ®ÿØŸäŸÑÿ©...');
                return await fetchAlternativeData();
            } catch (error) {
                console.log('ŸÅÿ¥ŸÑ ŸÅŸä ÿßÿ≥ÿ™ÿÆÿ±ÿßÿ¨ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ŸÖŸÜ ÿßŸÑŸÖÿµÿßÿØÿ± ÿßŸÑÿ®ÿØŸäŸÑÿ©');
            }

            // ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿßŸÅÿ™ÿ±ÿßÿ∂Ÿäÿ© ÿßŸÑŸÖÿ≠ÿØÿ´ÿ© ŸàÿßŸÑŸÖÿ≠ÿ≥ŸÜÿ©
            console.log('üîÑ ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿßŸÅÿ™ÿ±ÿßÿ∂Ÿäÿ© ÿßŸÑŸÖÿ≠ÿ≥ŸÜÿ©...');
            return getEnhancedDefaultData();
                {
                    rank: 4,
                    name: "Manchester United",
                    logo: "https://tmssl.akamaized.net/images/wappen/tiny/985.png",
                    expenditure: "‚Ç¨153.20m",
                    arrivals: 11,
                    income: "‚Ç¨0.00m",
                    departures: 6,
                    balance: "‚Ç¨-153.20m"
                },
                {
                    rank: 5,
                    name: "Manchester City",
                    logo: "https://tmssl.akamaized.net/images/wappen/tiny/281.png",
                    expenditure: "‚Ç¨145.70m",
                    arrivals: 12,
                    income: "‚Ç¨33.00m",
                    departures: 6,
                    balance: "‚Ç¨-112.70m"
                },
                {
                    rank: 6,
                    name: "Arsenal FC",
                    logo: "https://tmssl.akamaized.net/images/wappen/tiny/11.png",
                    expenditure: "‚Ç¨142.80m",
                    arrivals: 10,
                    income: "‚Ç¨8.00m",
                    departures: 8,
                    balance: "‚Ç¨-134.80m"
                },
                {
                    rank: 7,
                    name: "Tottenham Hotspur",
                    logo: "https://tmssl.akamaized.net/images/wappen/tiny/148.png",
                    expenditure: "‚Ç¨140.60m",
                    arrivals: 12,
                    income: "‚Ç¨13.50m",
                    departures: 8,
                    balance: "‚Ç¨-127.10m"
                },
                {
                    rank: 8,
                    name: "Atl√©tico de Madrid",
                    logo: "https://tmssl.akamaized.net/images/wappen/tiny/13.png",
                    expenditure: "‚Ç¨123.00m",
                    arrivals: 11,
                    income: "‚Ç¨36.00m",
                    departures: 10,
                    balance: "‚Ç¨-87.00m"
                },
                {
                    rank: 9,
                    name: "Juventus FC",
                    logo: "https://tmssl.akamaized.net/images/wappen/tiny/506.png",
                    expenditure: "‚Ç¨105.90m",
                    arrivals: 18,
                    income: "‚Ç¨48.00m",
                    departures: 13,
                    balance: "‚Ç¨-57.90m"
                },
                {
                    rank: 10,
                    name: "Bayer 04 Leverkusen",
                    logo: "https://tmssl.akamaized.net/images/wappen/tiny/15.png",
                    expenditure: "‚Ç¨101.75m",
                    arrivals: 13,
                    income: "‚Ç¨190.50m",
                    departures: 13,
                    balance: "‚Ç¨88.75m"
                }
            ];
        }

        // ÿßÿ≥ÿ™ÿÆÿ±ÿßÿ¨ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ŸÖŸÜ ŸÖÿµÿßÿØÿ± ÿ®ÿØŸäŸÑÿ©
        async function fetchAlternativeData() {
            // ŸÖÿ≠ÿßŸàŸÑÿ© ÿßÿ≥ÿ™ÿÆÿ±ÿßÿ¨ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ŸÖŸÜ API ÿ®ÿØŸäŸÑ ÿ£Ÿà ŸÖÿµÿßÿØÿ± ÿ£ÿÆÿ±Ÿâ
            const alternativeSources = [
                'https://api.football-data.org/v4/competitions',
                'https://api.sportmonks.com/v3/football',
                // ŸäŸÖŸÉŸÜ ÿ•ÿ∂ÿßŸÅÿ© ŸÖÿµÿßÿØÿ± ÿ£ÿÆÿ±Ÿâ ŸáŸÜÿß
            ];

            // ŸÅŸä ÿ≠ÿßŸÑÿ© ÿπÿØŸÖ ÿ™ŸàŸÅÿ± ŸÖÿµÿßÿØÿ± ÿ®ÿØŸäŸÑÿ©ÿå ÿ•ÿ±ÿ¨ÿßÿπ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖÿ≠ÿØÿ´ÿ©
            return getEnhancedDefaultData();
        }

        // ÿßŸÑÿ≠ÿµŸàŸÑ ÿπŸÑŸâ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÅÿ™ÿ±ÿßÿ∂Ÿäÿ© ŸÖÿ≠ÿ≥ŸÜÿ© ŸàŸÖÿ≠ÿØÿ´ÿ© ŸÖÿπ ÿ£ÿ≥ŸÖÿßÿ° ÿπÿ±ÿ®Ÿäÿ©
        function getEnhancedDefaultData() {
            const currentDate = new Date();
            const seasonStart = new Date('2024-07-01');
            const daysSinceStart = Math.floor((currentDate - seasonStart) / (1000 * 60 * 60 * 24));

            // ÿ®ŸäÿßŸÜÿßÿ™ ŸÖÿ≠ÿØÿ´ÿ© ŸàŸÖÿ™ÿ∫Ÿäÿ±ÿ© ÿ≠ÿ≥ÿ® ÿßŸÑŸàŸÇÿ™ ŸÖÿπ ÿ¥ÿπÿßÿ±ÿßÿ™ ŸÖÿ≠ÿ≥ŸÜÿ© Ÿàÿ£ÿ≥ŸÖÿßÿ° ÿπÿ±ÿ®Ÿäÿ©
            const baseData = [
                {
                    rank: 1,
                    name: "ŸÑŸäŸÅÿ±ÿ®ŸàŸÑ",
                    englishName: "Liverpool FC",
                    logo: "https://logos-world.net/wp-content/uploads/2020/06/Liverpool-Logo.png",
                    logoFallback: "https://tmssl.akamaized.net/images/wappen/head/31.png",
                    expenditure: "‚Ç¨308.68m",
                    arrivals: 13 + Math.floor(daysSinceStart / 30),
                    income: "‚Ç¨63.30m",
                    departures: 6 + Math.floor(daysSinceStart / 45),
                    balance: "‚Ç¨-245.38m",
                    league: "ÿßŸÑÿØŸàÿ±Ÿä ÿßŸÑÿ•ŸÜÿ¨ŸÑŸäÿ≤Ÿä ÿßŸÑŸÖŸÖÿ™ÿßÿ≤"
                },
                {
                    rank: 2,
                    name: "ÿ™ÿ¥ŸäŸÑÿ≥Ÿä",
                    englishName: "Chelsea FC",
                    logo: "https://logos-world.net/wp-content/uploads/2020/06/Chelsea-Logo.png",
                    logoFallback: "https://tmssl.akamaized.net/images/wappen/head/631.png",
                    expenditure: "‚Ç¨243.77m",
                    arrivals: 22 + Math.floor(daysSinceStart / 25),
                    income: "‚Ç¨121.48m",
                    departures: 8 + Math.floor(daysSinceStart / 40),
                    balance: "‚Ç¨-122.29m",
                    league: "ÿßŸÑÿØŸàÿ±Ÿä ÿßŸÑÿ•ŸÜÿ¨ŸÑŸäÿ≤Ÿä ÿßŸÑŸÖŸÖÿ™ÿßÿ≤"
                },
                {
                    rank: 3,
                    name: "ÿ±ŸäÿßŸÑ ŸÖÿØÿ±ŸäÿØ",
                    englishName: "Real Madrid",
                    logo: "https://logos-world.net/wp-content/uploads/2020/06/Real-Madrid-Logo.png",
                    logoFallback: "https://tmssl.akamaized.net/images/wappen/head/418.png",
                    expenditure: "‚Ç¨167.50m",
                    arrivals: 7 + Math.floor(daysSinceStart / 35),
                    income: "‚Ç¨2.00m",
                    departures: 4 + Math.floor(daysSinceStart / 50),
                    balance: "‚Ç¨-165.50m",
                    league: "ÿßŸÑÿØŸàÿ±Ÿä ÿßŸÑÿ•ÿ≥ÿ®ÿßŸÜŸä"
                },
                {
                    rank: 4,
                    name: "ŸÖÿßŸÜÿ¥ÿ≥ÿ™ÿ± ŸäŸàŸÜÿßŸäÿ™ÿØ",
                    englishName: "Manchester United",
                    logo: ClubLogoManager.getClubLogo("Manchester United").primary,
                    logoFallback: ClubLogoManager.getClubLogo("Manchester United").fallback,
                    expenditure: "‚Ç¨153.20m",
                    arrivals: 11 + Math.floor(daysSinceStart / 28),
                    income: "‚Ç¨0.00m",
                    departures: 6 + Math.floor(daysSinceStart / 42),
                    balance: "‚Ç¨-153.20m",
                    league: ClubLogoManager.getClubLogo("Manchester United").league
                },
                {
                    rank: 5,
                    name: "ŸÖÿßŸÜÿ¥ÿ≥ÿ™ÿ± ÿ≥Ÿäÿ™Ÿä",
                    englishName: "Manchester City",
                    logo: ClubLogoManager.getClubLogo("Manchester City").primary,
                    logoFallback: ClubLogoManager.getClubLogo("Manchester City").fallback,
                    expenditure: "‚Ç¨145.70m",
                    arrivals: 12 + Math.floor(daysSinceStart / 32),
                    income: "‚Ç¨33.00m",
                    departures: 6 + Math.floor(daysSinceStart / 38),
                    balance: "‚Ç¨-112.70m",
                    league: ClubLogoManager.getClubLogo("Manchester City").league
                },
                {
                    rank: 6,
                    name: "ÿ¢ÿ±ÿ≥ŸÜÿßŸÑ",
                    englishName: "Arsenal FC",
                    logo: ClubLogoManager.getClubLogo("Arsenal FC").primary,
                    logoFallback: ClubLogoManager.getClubLogo("Arsenal FC").fallback,
                    expenditure: "‚Ç¨142.80m",
                    arrivals: 10 + Math.floor(daysSinceStart / 30),
                    income: "‚Ç¨8.00m",
                    departures: 8 + Math.floor(daysSinceStart / 35),
                    balance: "‚Ç¨-134.80m",
                    league: ClubLogoManager.getClubLogo("Arsenal FC").league
                },
                {
                    rank: 7,
                    name: "ÿ™Ÿàÿ™ŸÜŸáÿßŸÖ",
                    englishName: "Tottenham Hotspur",
                    logo: ClubLogoManager.getClubLogo("Tottenham Hotspur").primary,
                    logoFallback: ClubLogoManager.getClubLogo("Tottenham Hotspur").fallback,
                    expenditure: "‚Ç¨140.60m",
                    arrivals: 12 + Math.floor(daysSinceStart / 26),
                    income: "‚Ç¨13.50m",
                    departures: 8 + Math.floor(daysSinceStart / 33),
                    balance: "‚Ç¨-127.10m",
                    league: ClubLogoManager.getClubLogo("Tottenham Hotspur").league
                },
                {
                    rank: 8,
                    name: "ÿ£ÿ™ŸÑÿ™ŸäŸÉŸà ŸÖÿØÿ±ŸäÿØ",
                    englishName: "Atl√©tico de Madrid",
                    logo: ClubLogoManager.getClubLogo("Atl√©tico de Madrid").primary,
                    logoFallback: ClubLogoManager.getClubLogo("Atl√©tico de Madrid").fallback,
                    expenditure: "‚Ç¨123.00m",
                    arrivals: 11 + Math.floor(daysSinceStart / 29),
                    income: "‚Ç¨36.00m",
                    departures: 10 + Math.floor(daysSinceStart / 31),
                    balance: "‚Ç¨-87.00m",
                    league: ClubLogoManager.getClubLogo("Atl√©tico de Madrid").league
                },
                {
                    rank: 9,
                    name: "ŸäŸàŸÅŸÜÿ™Ÿàÿ≥",
                    englishName: "Juventus FC",
                    logo: ClubLogoManager.getClubLogo("Juventus FC").primary,
                    logoFallback: ClubLogoManager.getClubLogo("Juventus FC").fallback,
                    expenditure: "‚Ç¨105.90m",
                    arrivals: 18 + Math.floor(daysSinceStart / 24),
                    income: "‚Ç¨48.00m",
                    departures: 13 + Math.floor(daysSinceStart / 27),
                    balance: "‚Ç¨-57.90m",
                    league: ClubLogoManager.getClubLogo("Juventus FC").league
                },
                {
                    rank: 10,
                    name: "ÿ®ÿßŸäÿ± ŸÑŸäŸÅÿ±ŸÉŸàÿ≤ŸÜ",
                    englishName: "Bayer 04 Leverkusen",
                    logo: ClubLogoManager.getClubLogo("Bayer 04 Leverkusen").primary,
                    logoFallback: ClubLogoManager.getClubLogo("Bayer 04 Leverkusen").fallback,
                    expenditure: "‚Ç¨101.75m",
                    arrivals: 13 + Math.floor(daysSinceStart / 34),
                    income: "‚Ç¨190.50m",
                    departures: 13 + Math.floor(daysSinceStart / 29),
                    balance: "‚Ç¨88.75m",
                    league: ClubLogoManager.getClubLogo("Bayer 04 Leverkusen").league
                }
            ];

            return baseData;
        }

        // ÿ™ÿ≠ŸÑŸäŸÑ HTML ŸÖŸÜ Transfermarkt ŸÖÿ≠ÿ≥ŸÜ - Ÿäÿ±ŸÉÿ≤ ÿπŸÑŸâ ÿßŸÑÿ•Ÿäÿ±ÿßÿØÿßÿ™ ŸàÿßŸÑŸÖÿµÿ±ŸàŸÅÿßÿ™ ŸÅŸÇÿ∑
        function parseTransfermarktHTML(html) {
            try {
                const parser = new DOMParser();
                const doc = parser.parseFromString(html, 'text/html');

                // ÿßŸÑÿ®ÿ≠ÿ´ ÿπŸÜ ÿßŸÑÿ¨ÿØŸàŸÑ ÿ®ÿ∑ÿ±ŸÇ ŸÖÿ™ÿπÿØÿØÿ© ŸàŸÖÿ≠ÿ≥ŸÜÿ©
                let table = doc.querySelector('table.items') ||
                           doc.querySelector('.responsive-table table') ||
                           doc.querySelector('table[class*="transfer"]') ||
                           doc.querySelector('table[class*="einnahmen"]') ||
                           doc.querySelector('table[class*="ausgaben"]') ||
                           doc.querySelector('table tbody')?.parentElement;

                if (!table) {
                    console.log('‚ùå ŸÑŸÖ Ÿäÿ™ŸÖ ÿßŸÑÿπÿ´Ÿàÿ± ÿπŸÑŸâ ÿßŸÑÿ¨ÿØŸàŸÑ');
                    return null;
                }

                console.log('‚úÖ ÿ™ŸÖ ÿßŸÑÿπÿ´Ÿàÿ± ÿπŸÑŸâ ÿßŸÑÿ¨ÿØŸàŸÑÿå ÿ®ÿØÿ° ÿßÿ≥ÿ™ÿÆÿ±ÿßÿ¨ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™...');
                const rows = table.querySelectorAll('tbody tr');
                const clubs = [];

                // ÿ™ÿ≠ŸÑŸäŸÑ ÿ±ÿ§Ÿàÿ≥ ÿßŸÑÿ£ÿπŸÖÿØÿ© ŸÑÿ™ÿ≠ÿØŸäÿØ ŸÖŸàÿßŸÇÿπ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™
                const headerRow = table.querySelector('thead tr') || table.querySelector('tr');
                const columnMapping = analyzeTableHeaders(headerRow);
                console.log('üìã ÿ™ÿ≠ŸÑŸäŸÑ ÿßŸÑÿ£ÿπŸÖÿØÿ©:', columnMapping);

                rows.forEach((row, index) => {
                    if (index >= 10) return; // ÿ£ÿÆÿ∞ ÿ£ŸàŸÑ 10 ÿ£ŸÜÿØŸäÿ© ŸÅŸÇÿ∑

                    const cells = row.querySelectorAll('td');
                    if (cells.length >= 3) { // ÿ™ŸÇŸÑŸäŸÑ ÿßŸÑÿ≠ÿØ ÿßŸÑÿ£ÿØŸÜŸâ ŸÑŸÑÿ£ÿπŸÖÿØÿ©
                        try {
                            // ÿßÿ≥ÿ™ÿÆÿ±ÿßÿ¨ ÿßÿ≥ŸÖ ÿßŸÑŸÜÿßÿØŸä ÿ®ÿ∑ÿ±ŸäŸÇÿ© ŸÖÿ≠ÿ≥ŸÜÿ©
                            const clubName = extractClubName(cells, index);
                            if (!clubName) return;

                            console.log(`üèüÔ∏è ŸÖÿπÿßŸÑÿ¨ÿ© ÿßŸÑŸÜÿßÿØŸä: "${clubName}" (ÿßŸÑÿµŸÅ ${index + 1})`);

                            // ÿßÿ≥ÿ™ÿÆÿ±ÿßÿ¨ ÿßŸÑÿ¥ÿπÿßÿ± ÿ®ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ ÿßŸÑŸÜÿ∏ÿßŸÖ ÿßŸÑŸÖÿ™ÿ∑Ÿàÿ±
                            const logoUrl = extractClubLogo(cells, clubName);

                            // ÿßÿ≥ÿ™ÿÆÿ±ÿßÿ¨ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖÿßŸÑŸäÿ© ÿßŸÑÿ£ÿ≥ÿßÿ≥Ÿäÿ© ŸÅŸÇÿ∑ (ÿ•Ÿäÿ±ÿßÿØÿßÿ™ ŸàŸÖÿµÿ±ŸàŸÅÿßÿ™)
                            const financialData = extractFinancialData(cells, columnMapping, clubName);

                            // ÿ™ÿ≠ÿØŸäÿØ ÿßŸÑÿØŸàÿ±Ÿä
                            const league = determineLeague(clubName);
                            const logoData = ClubLogoManager.getClubLogo(clubName);

                            clubs.push({
                                rank: index + 1,
                                name: clubName,
                                englishName: clubName, // ÿ≥Ÿäÿ™ŸÖ ÿ™ÿ≠ÿØŸäÿ´Ÿá ŸÑÿßÿ≠ŸÇÿßŸã
                                logo: logoUrl,
                                logoFallback: logoData.fallback,
                                expenditure: financialData.expenditure,
                                income: financialData.income,
                                balance: financialData.balance,
                                league: logoData.league || league,
                                lastUpdated: new Date().toISOString(),
                                dataSource: 'transfermarkt-live'
                            });

                            console.log(`‚úÖ ÿ™ŸÖ ÿßÿ≥ÿ™ÿÆÿ±ÿßÿ¨ ÿ®ŸäÿßŸÜÿßÿ™ ${clubName}:`, {
                                expenditure: financialData.expenditure,
                                income: financialData.income,
                                balance: financialData.balance
                            });

                        } catch (cellError) {
                            console.error(`‚ùå ÿÆÿ∑ÿ£ ŸÅŸä ŸÖÿπÿßŸÑÿ¨ÿ© ÿßŸÑÿµŸÅ ${index + 1}:`, cellError);
                        }
                    }
                });

                if (clubs.length > 0) {
                    console.log('üìä ÿ™ŸÖ ÿßÿ≥ÿ™ÿÆÿ±ÿßÿ¨ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿ®ŸÜÿ¨ÿßÿ≠:', clubs.length, 'ŸÜÿßÿØŸä');

                    // ŸÅÿ±ÿ≤ ÿßŸÑÿ£ŸÜÿØŸäÿ© ÿ≠ÿ≥ÿ® ÿßŸÑÿ•ŸÜŸÅÿßŸÇ ÿßŸÑŸÅÿπŸÑŸä ŸÖŸÜ ÿßŸÑŸÖŸàŸÇÿπ (ÿßŸÑÿ≠ŸÅÿßÿ∏ ÿπŸÑŸâ ÿßŸÑÿ™ÿ±ÿ™Ÿäÿ® ÿßŸÑÿ£ÿµŸÑŸä)
                    // ÿ•ÿ∞ÿß ŸÉÿßŸÜ ÿßŸÑÿ™ÿ±ÿ™Ÿäÿ® ŸÅŸä ÿßŸÑŸÖŸàŸÇÿπ ÿµÿ≠Ÿäÿ≠ÿå ŸÜÿ≠ÿßŸÅÿ∏ ÿπŸÑŸäŸá
                    const sortedClubs = clubs.sort((a, b) => {
                        const expenditureA = parseFloat(a.expenditure.replace(/[^0-9.-]/g, '')) || 0;
                        const expenditureB = parseFloat(b.expenditure.replace(/[^0-9.-]/g, '')) || 0;
                        return expenditureB - expenditureA; // ÿ™ÿ±ÿ™Ÿäÿ® ÿ™ŸÜÿßÿ≤ŸÑŸä ÿ≠ÿ≥ÿ® ÿßŸÑÿ•ŸÜŸÅÿßŸÇ
                    });

                    // ÿ•ÿπÿßÿØÿ© ÿ™ÿ±ŸÇŸäŸÖ ÿßŸÑÿ£ŸÜÿØŸäÿ© ÿ®ÿπÿØ ÿßŸÑŸÅÿ±ÿ≤
                    const finalClubs = sortedClubs.map((club, index) => ({
                        ...club,
                        rank: index + 1
                    }));

                    console.log('üéØ ÿßŸÑÿ™ÿ±ÿ™Ÿäÿ® ÿßŸÑŸÜŸáÿßÿ¶Ÿä ŸÑŸÑÿ£ŸÜÿØŸäÿ©:');
                    finalClubs.forEach(club => {
                        console.log(`${club.rank}. ${club.name} - ${club.expenditure}`);
                    });

                    return finalClubs;

                } else {
                    console.log('‚ö†Ô∏è ŸÑŸÖ Ÿäÿ™ŸÖ ÿßÿ≥ÿ™ÿÆÿ±ÿßÿ¨ ÿ£Ÿä ÿ®ŸäÿßŸÜÿßÿ™');
                    return null;
                }

            } catch (error) {
                console.error('‚ùå ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ÿ≠ŸÑŸäŸÑ HTML:', error);
                return null;
            }
        }

        // ÿ™ÿ≠ŸÑŸäŸÑ ÿ±ÿ§Ÿàÿ≥ ÿßŸÑÿ£ÿπŸÖÿØÿ© ŸÑÿ™ÿ≠ÿØŸäÿØ ŸÖŸàÿßŸÇÿπ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™
        function analyzeTableHeaders(headerRow) {
            const mapping = {
                club: 1, // ÿπŸÖŸàÿØ ÿßŸÑŸÜÿßÿØŸä ÿπÿßÿØÿ© ÿßŸÑÿ´ÿßŸÜŸä
                expenditure: -1,
                income: -1,
                balance: -1
            };

            if (!headerRow) return mapping;

            const headers = headerRow.querySelectorAll('th, td');
            headers.forEach((header, index) => {
                const text = header.textContent?.toLowerCase().trim() || '';

                // ÿßŸÑÿ®ÿ≠ÿ´ ÿπŸÜ ÿπŸÖŸàÿØ ÿßŸÑÿ•ŸÜŸÅÿßŸÇ/ÿßŸÑŸÖÿµÿ±ŸàŸÅÿßÿ™
                if (text.includes('ausgaben') || text.includes('expenditure') ||
                    text.includes('spent') || text.includes('ÿµÿ±ŸÅ') || text.includes('ÿ•ŸÜŸÅÿßŸÇ')) {
                    mapping.expenditure = index;
                }
                // ÿßŸÑÿ®ÿ≠ÿ´ ÿπŸÜ ÿπŸÖŸàÿØ ÿßŸÑÿ•Ÿäÿ±ÿßÿØÿßÿ™
                else if (text.includes('einnahmen') || text.includes('income') ||
                         text.includes('revenue') || text.includes('ÿ•Ÿäÿ±ÿßÿØÿßÿ™') || text.includes('ÿØÿÆŸÑ')) {
                    mapping.income = index;
                }
                // ÿßŸÑÿ®ÿ≠ÿ´ ÿπŸÜ ÿπŸÖŸàÿØ ÿßŸÑŸÖŸäÿ≤ÿßŸÜŸäÿ©
                else if (text.includes('bilanz') || text.includes('balance') ||
                         text.includes('ŸÖŸäÿ≤ÿßŸÜŸäÿ©') || text.includes('ÿµÿßŸÅŸä')) {
                    mapping.balance = index;
                }
            });

            return mapping;
        }

        // ÿßÿ≥ÿ™ÿÆÿ±ÿßÿ¨ ÿßÿ≥ŸÖ ÿßŸÑŸÜÿßÿØŸä ÿ®ÿ∑ÿ±ŸäŸÇÿ© ŸÖÿ≠ÿ≥ŸÜÿ©
        function extractClubName(cells, index) {
            let clubName = '';

            // ÿßŸÑÿ®ÿ≠ÿ´ ŸÅŸä ÿπÿØÿ© ÿ£ŸÖÿßŸÉŸÜ ŸÖÿ≠ÿ™ŸÖŸÑÿ© ŸÑÿßÿ≥ŸÖ ÿßŸÑŸÜÿßÿØŸä
            const nameSelectors = [
                'a[title]', // ÿßŸÑÿ±ÿßÿ®ÿ∑ ŸÖÿπ ÿßŸÑÿπŸÜŸàÿßŸÜ
                '.hauptlink', // ÿßŸÑÿ±ÿßÿ®ÿ∑ ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿä
                'a', // ÿ£Ÿä ÿ±ÿßÿ®ÿ∑
                '.vereinsname', // ÿßÿ≥ŸÖ ÿßŸÑŸÜÿßÿØŸä
                'img[alt]' // ŸÜÿµ ÿ®ÿØŸäŸÑ ŸÑŸÑÿµŸàÿ±ÿ©
            ];

            // ÿßŸÑÿ®ÿ≠ÿ´ ŸÅŸä ÿßŸÑÿπŸÖŸàÿØ ÿßŸÑÿ´ÿßŸÜŸä ÿ£ŸàŸÑÿßŸã (ÿπÿßÿØÿ© ÿπŸÖŸàÿØ ÿßŸÑŸÜÿßÿØŸä)
            for (const selector of nameSelectors) {
                const element = cells[1]?.querySelector(selector) || cells[0]?.querySelector(selector);
                if (element) {
                    if (selector === 'img[alt]') {
                        clubName = element.getAttribute('alt')?.trim();
                    } else if (element.hasAttribute('title')) {
                        clubName = element.getAttribute('title')?.trim();
                    } else {
                        clubName = element.textContent?.trim();
                    }

                    if (clubName && clubName.length > 2 && !clubName.includes('undefined')) {
                        break;
                    }
                }
            }

            // ÿ•ÿ∞ÿß ŸÑŸÖ ŸÜÿ¨ÿØ ÿßÿ≥ŸÖ ÿµÿ≠Ÿäÿ≠ÿå ŸÜÿ≠ÿßŸàŸÑ ÿßÿ≥ÿ™ÿÆÿ±ÿßÿ¨Ÿá ŸÖŸÜ ÿßŸÑŸÜÿµ ÿßŸÑŸÉÿßŸÖŸÑ
            if (!clubName || clubName.length < 3) {
                const fullText = cells[1]?.textContent?.trim() || cells[0]?.textContent?.trim();
                clubName = fullText?.split('\n')[0]?.split('\t')[0]?.trim();
            }

            // ÿßŸÑÿ™ÿ£ŸÉÿØ ŸÖŸÜ Ÿàÿ¨ŸàÿØ ÿßÿ≥ŸÖ ÿµÿ≠Ÿäÿ≠
            if (!clubName || clubName.length < 3 || clubName.includes('undefined')) {
                console.warn(`‚ö†Ô∏è ŸÑŸÖ Ÿäÿ™ŸÖ ÿßŸÑÿπÿ´Ÿàÿ± ÿπŸÑŸâ ÿßÿ≥ŸÖ ÿµÿ≠Ÿäÿ≠ ŸÑŸÑŸÜÿßÿØŸä ŸÅŸä ÿßŸÑÿµŸÅ ${index + 1}`);
                return null;
            }

            return clubName;
        }

        // ÿßÿ≥ÿ™ÿÆÿ±ÿßÿ¨ ÿ¥ÿπÿßÿ± ÿßŸÑŸÜÿßÿØŸä
        function extractClubLogo(cells, clubName) {
            const logoImg = cells[1]?.querySelector('img') || cells[0]?.querySelector('img');
            let originalLogoUrl = logoImg?.src || logoImg?.getAttribute('data-src');

            // ÿßŸÑÿ≠ÿµŸàŸÑ ÿπŸÑŸâ ÿßŸÑÿ¥ÿπÿßÿ± ŸÖŸÜ ŸÜÿ∏ÿßŸÖ ÿ•ÿØÿßÿ±ÿ© ÿßŸÑÿ¥ÿπÿßÿ±ÿßÿ™
            const logoData = ClubLogoManager.getClubLogo(clubName);
            let logoUrl = logoData.primary;

            // ÿ•ÿ∞ÿß ŸÑŸÖ Ÿäÿ¨ÿØ ÿ¥ÿπÿßÿ± ŸÖÿÆÿµÿµÿå ÿßÿ≥ÿ™ÿÆÿØŸÖ ÿßŸÑÿ¥ÿπÿßÿ± ÿßŸÑÿ£ÿµŸÑŸä ŸÖÿ≠ÿ≥ŸÜÿßŸã
            if (!logoData.primary.includes('footyrenders') && originalLogoUrl) {
                if (originalLogoUrl.includes('tiny')) {
                    logoUrl = originalLogoUrl.replace('tiny', 'head');
                } else {
                    logoUrl = originalLogoUrl;
                }
            }

            return logoUrl || logoData.fallback;
        }

        // ÿßÿ≥ÿ™ÿÆÿ±ÿßÿ¨ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖÿßŸÑŸäÿ© (ÿ•Ÿäÿ±ÿßÿØÿßÿ™ ŸàŸÖÿµÿ±ŸàŸÅÿßÿ™ ŸÅŸÇÿ∑)
        function extractFinancialData(cells, columnMapping, clubName) {
            let expenditure = '‚Ç¨0.00m';
            let income = '‚Ç¨0.00m';
            let balance = '‚Ç¨0.00m';

            // ÿ•ÿ∞ÿß ŸÉÿßŸÜ ŸÑÿØŸäŸÜÿß ÿ™ÿ≠ÿØŸäÿØ ÿØŸÇŸäŸÇ ŸÑŸÑÿ£ÿπŸÖÿØÿ©
            if (columnMapping.expenditure >= 0 && cells[columnMapping.expenditure]) {
                expenditure = cleanFinancialValue(cells[columnMapping.expenditure].textContent);
            }
            if (columnMapping.income >= 0 && cells[columnMapping.income]) {
                income = cleanFinancialValue(cells[columnMapping.income].textContent);
            }
            if (columnMapping.balance >= 0 && cells[columnMapping.balance]) {
                balance = cleanFinancialValue(cells[columnMapping.balance].textContent);
            }

            // ÿ•ÿ∞ÿß ŸÑŸÖ ŸÜÿ¨ÿØ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿ®ÿßŸÑÿ∑ÿ±ŸäŸÇÿ© ÿßŸÑŸÖÿ≠ÿØÿØÿ©ÿå ŸÜÿ®ÿ≠ÿ´ ÿ™ŸÑŸÇÿßÿ¶ŸäÿßŸã
            if (expenditure === '‚Ç¨0.00m' || income === '‚Ç¨0.00m') {
                const autoExtracted = autoExtractFinancialData(cells);
                if (expenditure === '‚Ç¨0.00m') expenditure = autoExtracted.expenditure;
                if (income === '‚Ç¨0.00m') income = autoExtracted.income;
                if (balance === '‚Ç¨0.00m') balance = autoExtracted.balance;
            }

            return { expenditure, income, balance };
        }

        // ÿ™ŸÜÿ∏ŸäŸÅ ÿßŸÑŸÇŸäŸÖ ÿßŸÑŸÖÿßŸÑŸäÿ©
        function cleanFinancialValue(text) {
            if (!text) return '‚Ç¨0.00m';

            const cleaned = text.trim();

            // ÿ•ÿ∞ÿß ŸÉÿßŸÜÿ™ ÿ™ÿ≠ÿ™ŸàŸä ÿπŸÑŸâ ‚Ç¨ Ÿà m ŸÅŸáŸä ŸÇŸäŸÖÿ© ŸÖÿßŸÑŸäÿ©
            if (cleaned.includes('‚Ç¨') && (cleaned.includes('m') || cleaned.includes('M'))) {
                return cleaned;
            }

            // ÿ•ÿ∞ÿß ŸÉÿßŸÜÿ™ ÿ±ŸÇŸÖ ŸÅŸÇÿ∑ÿå ŸÜÿ∂ŸäŸÅ ÿßŸÑÿ™ŸÜÿ≥ŸäŸÇ
            const numericValue = parseFloat(cleaned.replace(/[^0-9.-]/g, ''));
            if (!isNaN(numericValue) && numericValue > 0) {
                return `‚Ç¨${numericValue.toFixed(2)}m`;
            }

            return '‚Ç¨0.00m';
        }

        // ÿßÿ≥ÿ™ÿÆÿ±ÿßÿ¨ ÿ™ŸÑŸÇÿßÿ¶Ÿä ŸÑŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖÿßŸÑŸäÿ©
        function autoExtractFinancialData(cells) {
            let expenditure = '‚Ç¨0.00m';
            let income = '‚Ç¨0.00m';
            let balance = '‚Ç¨0.00m';

            const financialValues = [];

            // ÿßŸÑÿ®ÿ≠ÿ´ ŸÅŸä ÿ¨ŸÖŸäÿπ ÿßŸÑÿ£ÿπŸÖÿØÿ© ÿπŸÜ ÿßŸÑŸÇŸäŸÖ ÿßŸÑŸÖÿßŸÑŸäÿ©
            for (let i = 2; i < cells.length; i++) {
                const cellText = cells[i]?.textContent?.trim() || '';

                if (cellText.includes('‚Ç¨') && (cellText.includes('m') || cellText.includes('M'))) {
                    const numericValue = parseFloat(cellText.replace(/[^0-9.-]/g, ''));
                    if (!isNaN(numericValue)) {
                        financialValues.push({
                            text: cellText,
                            value: numericValue,
                            index: i,
                            isNegative: cellText.includes('-')
                        });
                    }
                }
            }

            // ÿ™ÿ±ÿ™Ÿäÿ® ÿßŸÑŸÇŸäŸÖ ÿ≠ÿ≥ÿ® ÿßŸÑÿ≠ÿ¨ŸÖ (ÿßŸÑÿ£ŸÉÿ®ÿ± ÿ£ŸàŸÑÿßŸã)
            financialValues.sort((a, b) => Math.abs(b.value) - Math.abs(a.value));

            // ÿ™ÿ≠ÿØŸäÿØ ÿßŸÑÿ•ŸÜŸÅÿßŸÇ (ÿπÿßÿØÿ© ÿ£ŸÉÿ®ÿ± ŸÇŸäŸÖÿ© ŸÖŸàÿ¨ÿ®ÿ©)
            const expenditureValue = financialValues.find(v => !v.isNegative && v.value > 0);
            if (expenditureValue) {
                expenditure = expenditureValue.text;
            }

            // ÿ™ÿ≠ÿØŸäÿØ ÿßŸÑÿ•Ÿäÿ±ÿßÿØÿßÿ™ (ÿ´ÿßŸÜŸä ÿ£ŸÉÿ®ÿ± ŸÇŸäŸÖÿ© ŸÖŸàÿ¨ÿ®ÿ© ÿ£Ÿà ŸÇŸäŸÖÿ© ÿ£ÿµÿ∫ÿ±)
            const incomeValue = financialValues.find(v => !v.isNegative && v.value > 0 && v !== expenditureValue);
            if (incomeValue) {
                income = incomeValue.text;
            }

            // ÿ™ÿ≠ÿØŸäÿØ ÿßŸÑŸÖŸäÿ≤ÿßŸÜŸäÿ© (ŸÇŸäŸÖÿ© ÿ≥ÿßŸÑÿ®ÿ© ÿ£Ÿà ÿ¢ÿÆÿ± ŸÇŸäŸÖÿ©)
            const balanceValue = financialValues.find(v => v.isNegative) || financialValues[financialValues.length - 1];
            if (balanceValue) {
                balance = balanceValue.text;
            }

            return { expenditure, income, balance };
        }

        // ŸÜÿ∏ÿßŸÖ ÿ•ÿØÿßÿ±ÿ© ÿßŸÑÿ¥ÿπÿßÿ±ÿßÿ™ ÿßŸÑŸÖÿ™ÿ∑Ÿàÿ± ŸÖÿπ ÿ±ÿ®ÿ∑ club-logo-manager
        const ClubLogoManager = window.SmartLogoSystem || {
            // ŸÇÿßÿπÿØÿ© ÿ®ŸäÿßŸÜÿßÿ™ ŸÖÿ≠ŸÑŸäÿ© (ÿßÿ≠ÿ™Ÿäÿßÿ∑Ÿäÿ©)
            localLogoDatabase: {
                // Premier League
                'Liverpool FC': {
                    logo: 'https://logos.footyrenders.com/liverpool-fc/',
                    fallback: 'https://tmssl.akamaized.net/images/wappen/head/31.png',
                    league: 'Premier League',
                    aliases: ['Liverpool', 'LFC', 'The Reds']
                },
                'Chelsea FC': {
                    logo: 'https://logos.footyrenders.com/chelsea-fc/',
                    fallback: 'https://tmssl.akamaized.net/images/wappen/head/631.png',
                    league: 'Premier League',
                    aliases: ['Chelsea', 'CFC', 'The Blues']
                },
                'Manchester United': {
                    logo: 'https://logos.footyrenders.com/manchester-united/',
                    fallback: 'https://tmssl.akamaized.net/images/wappen/head/985.png',
                    league: 'Premier League',
                    aliases: ['Man United', 'MUFC', 'United', 'Manchester Utd']
                },
                'Manchester City': {
                    logo: 'https://logos.footyrenders.com/manchester-city/',
                    fallback: 'https://tmssl.akamaized.net/images/wappen/head/281.png',
                    league: 'Premier League',
                    aliases: ['Man City', 'MCFC', 'City']
                },
                'Arsenal FC': {
                    logo: 'https://logos.footyrenders.com/arsenal/',
                    fallback: 'https://tmssl.akamaized.net/images/wappen/head/11.png',
                    league: 'Premier League',
                    aliases: ['Arsenal', 'AFC', 'The Gunners']
                },
                'Tottenham Hotspur': {
                    logo: 'https://logos.footyrenders.com/tottenham-hotspur/',
                    fallback: 'https://tmssl.akamaized.net/images/wappen/head/148.png',
                    league: 'Premier League',
                    aliases: ['Tottenham', 'Spurs', 'THFC']
                },

                // LaLiga
                'Real Madrid': {
                    logo: 'https://logos.footyrenders.com/real-madrid/',
                    fallback: 'https://tmssl.akamaized.net/images/wappen/head/418.png',
                    league: 'LaLiga',
                    aliases: ['Real Madrid CF', 'Madrid', 'Los Blancos']
                },
                'FC Barcelona': {
                    logo: 'https://logos.footyrenders.com/fc-barcelona/',
                    fallback: 'https://tmssl.akamaized.net/images/wappen/head/131.png',
                    league: 'LaLiga',
                    aliases: ['Barcelona', 'Bar√ßa', 'FCB', 'Barca']
                },
                'Atl√©tico de Madrid': {
                    logo: 'https://logos.footyrenders.com/atletico-madrid/',
                    fallback: 'https://tmssl.akamaized.net/images/wappen/head/13.png',
                    league: 'LaLiga',
                    aliases: ['Atletico Madrid', 'Atl√©tico', 'Atletico']
                },

                // Serie A
                'Juventus FC': {
                    logo: 'https://logos.footyrenders.com/juventus/',
                    fallback: 'https://tmssl.akamaized.net/images/wappen/head/506.png',
                    league: 'Serie A',
                    aliases: ['Juventus', 'Juve', 'La Vecchia Signora']
                },
                'AC Milan': {
                    logo: 'https://logos.footyrenders.com/ac-milan/',
                    fallback: 'https://tmssl.akamaized.net/images/wappen/head/5.png',
                    league: 'Serie A',
                    aliases: ['Milan', 'ACM', 'Rossoneri']
                },
                'Inter Milan': {
                    logo: 'https://logos.footyrenders.com/inter-milan/',
                    fallback: 'https://tmssl.akamaized.net/images/wappen/head/46.png',
                    league: 'Serie A',
                    aliases: ['Inter', 'Internazionale', 'Nerazzurri']
                },

                // Bundesliga
                'Bayern Munich': {
                    logo: 'https://logos.footyrenders.com/bayern-munich/',
                    fallback: 'https://tmssl.akamaized.net/images/wappen/head/27.png',
                    league: 'Bundesliga',
                    aliases: ['Bayern', 'FC Bayern', 'FCB']
                },
                'Borussia Dortmund': {
                    logo: 'https://logos.footyrenders.com/borussia-dortmund/',
                    fallback: 'https://tmssl.akamaized.net/images/wappen/head/16.png',
                    league: 'Bundesliga',
                    aliases: ['Dortmund', 'BVB', 'Die Schwarzgelben']
                },
                'Bayer 04 Leverkusen': {
                    logo: 'https://logos.footyrenders.com/bayer-leverkusen/',
                    fallback: 'https://tmssl.akamaized.net/images/wappen/head/15.png',
                    league: 'Bundesliga',
                    aliases: ['Leverkusen', 'Bayer', 'Die Werkself']
                },

                // Ligue 1
                'Paris Saint-Germain': {
                    logo: 'https://logos.footyrenders.com/paris-saint-germain/',
                    fallback: 'https://tmssl.akamaized.net/images/wappen/head/583.png',
                    league: 'Ligue 1',
                    aliases: ['PSG', 'Paris SG', 'Les Parisiens']
                },
                'AS Monaco': {
                    logo: 'https://logos.footyrenders.com/as-monaco/',
                    fallback: 'https://tmssl.akamaized.net/images/wappen/head/162.png',
                    league: 'Ligue 1',
                    aliases: ['Monaco', 'ASM']
                },

                // ÿ£ŸÜÿØŸäÿ© ÿ•ÿ∂ÿßŸÅŸäÿ©
                'Newcastle United': {
                    logo: 'https://logos.footyrenders.com/newcastle-united/',
                    fallback: 'https://tmssl.akamaized.net/images/wappen/head/762.png',
                    league: 'Premier League',
                    aliases: ['Newcastle', 'NUFC', 'The Magpies']
                },
                'West Ham United': {
                    logo: 'https://logos.footyrenders.com/west-ham-united/',
                    fallback: 'https://tmssl.akamaized.net/images/wappen/head/379.png',
                    league: 'Premier League',
                    aliases: ['West Ham', 'WHUFC', 'The Hammers']
                },
                'Aston Villa': {
                    logo: 'https://logos.footyrenders.com/aston-villa/',
                    fallback: 'https://tmssl.akamaized.net/images/wappen/head/405.png',
                    league: 'Premier League',
                    aliases: ['Villa', 'AVFC']
                },
                'Brighton & Hove Albion': {
                    logo: 'https://logos.footyrenders.com/brighton-hove-albion/',
                    fallback: 'https://tmssl.akamaized.net/images/wappen/head/1237.png',
                    league: 'Premier League',
                    aliases: ['Brighton', 'BHAFC', 'The Seagulls']
                },
                'Valencia CF': {
                    logo: 'https://logos.footyrenders.com/valencia-cf/',
                    fallback: 'https://tmssl.akamaized.net/images/wappen/head/1049.png',
                    league: 'LaLiga',
                    aliases: ['Valencia', 'VCF']
                },
                'Sevilla FC': {
                    logo: 'https://logos.footyrenders.com/sevilla-fc/',
                    fallback: 'https://tmssl.akamaized.net/images/wappen/head/368.png',
                    league: 'LaLiga',
                    aliases: ['Sevilla', 'SFC']
                },
                'AS Roma': {
                    logo: 'https://logos.footyrenders.com/as-roma/',
                    fallback: 'https://tmssl.akamaized.net/images/wappen/head/12.png',
                    league: 'Serie A',
                    aliases: ['Roma', 'ASR', 'Giallorossi']
                },
                'SSC Napoli': {
                    logo: 'https://logos.footyrenders.com/ssc-napoli/',
                    fallback: 'https://tmssl.akamaized.net/images/wappen/head/6195.png',
                    league: 'Serie A',
                    aliases: ['Napoli', 'SSC Napoli', 'Azzurri']
                },
                'RB Leipzig': {
                    logo: 'https://logos.footyrenders.com/rb-leipzig/',
                    fallback: 'https://tmssl.akamaized.net/images/wappen/head/23826.png',
                    league: 'Bundesliga',
                    aliases: ['Leipzig', 'RBL']
                },
                'Eintracht Frankfurt': {
                    logo: 'https://logos.footyrenders.com/eintracht-frankfurt/',
                    fallback: 'https://tmssl.akamaized.net/images/wappen/head/24.png',
                    league: 'Bundesliga',
                    aliases: ['Frankfurt', 'SGE']
                }
            },

            // ŸÇÿßÿπÿØÿ© ÿ®ŸäÿßŸÜÿßÿ™ ŸÖŸÜ club-logo-manager
            externalLogoDatabase: {},

            // ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ŸÖŸÜ club-logo-manager
            async loadExternalLogos() {
                try {
                    // ÿ™ÿ≠ŸÖŸäŸÑ ŸÖŸÜ ÿßŸÑŸÖŸÅÿßÿ™Ÿäÿ≠ ÿßŸÑŸÖÿÆÿ™ŸÑŸÅÿ© ŸÑŸÑÿ™ŸàÿßŸÅŸÇ ÿßŸÑŸÉÿßŸÖŸÑ ŸÖÿπ ÿ¨ŸÖŸäÿπ ÿßŸÑÿ£ŸÜÿ∏ŸÖÿ©
                    const dataSources = [
                        { key: 'clubManagerData', name: 'ŸÖÿØŸäÿ± ÿßŸÑÿ¥ÿπÿßÿ±ÿßÿ™ ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿä' },
                        { key: 'clubsData', name: 'ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿ£ŸÜÿØŸäÿ©' },
                        { key: 'verifiedClubs', name: 'ÿßŸÑÿ£ŸÜÿØŸäÿ© ÿßŸÑŸÖÿ™ÿ≠ŸÇŸÇÿ©' }
                    ];

                    let totalLoadedCount = 0;
                    let sourceUsed = '';
                    this.externalLogoDatabase = {};

                    for (const source of dataSources) {
                        const clubData = localStorage.getItem(source.key);
                        if (clubData) {
                            try {
                                const clubs = JSON.parse(clubData);
                                let loadedCount = 0;

                                clubs.forEach(club => {
                                    // ÿØÿπŸÖ ÿ£ÿ¥ŸÉÿßŸÑ ŸÖÿÆÿ™ŸÑŸÅÿ© ŸÖŸÜ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™
                                    const logoUrl = club.logo || club.logoUrl;
                                    if (logoUrl && logoUrl !== 'N/A' && logoUrl.startsWith('http')) {
                                        // ÿ•ŸÜÿ¥ÿßÿ° ŸÖŸÅÿßÿ™Ÿäÿ≠ ŸÖÿ™ÿπÿØÿØÿ© ŸÑŸÑÿ®ÿ≠ÿ´ ÿßŸÑŸÖÿ≠ÿ≥ŸÜ
                                        const keys = [
                                            club.arabicName,
                                            club.englishName,
                                            club.arabicName?.replace(/ŸÜÿßÿØŸä|ŸÅÿ±ŸäŸÇ|ŸÉŸÑŸàÿ®/g, '').trim(),
                                            club.englishName?.replace(/FC|CF|United|City|Club/g, '').trim(),
                                            // ÿ•ÿ∂ÿßŸÅÿ© ÿ£ÿ¥ŸÉÿßŸÑ ÿ•ÿ∂ÿßŸÅŸäÿ©
                                            club.englishName + ' FC',
                                            club.englishName + ' CF',
                                            club.englishName?.replace(' FC', ''),
                                            club.englishName?.replace(' CF', ''),
                                            club.englishName?.toLowerCase(),
                                            club.arabicName?.toLowerCase()
                                        ].filter(key => key && key.length > 2);

                                        const logoData = {
                                            logo: logoUrl,
                                            fallback: logoUrl,
                                            league: club.league || 'ÿ∫Ÿäÿ± ŸÖÿ≠ÿØÿØ',
                                            country: club.country || 'ÿ∫Ÿäÿ± ŸÖÿ≠ÿØÿØ',
                                            arabicName: club.arabicName,
                                            englishName: club.englishName,
                                            aliases: keys,
                                            source: source.key
                                        };

                                        // ÿ≠ŸÅÿ∏ ÿ®ÿ¨ŸÖŸäÿπ ÿßŸÑŸÖŸÅÿßÿ™Ÿäÿ≠ ÿßŸÑŸÖŸÖŸÉŸÜÿ©
                                        keys.forEach(key => {
                                            if (key && !this.externalLogoDatabase[key]) {
                                                this.externalLogoDatabase[key] = logoData;
                                            }
                                        });
                                        loadedCount++;
                                    }
                                });

                                if (loadedCount > 0) {
                                    totalLoadedCount = loadedCount;
                                    sourceUsed = source.name;
                                    console.log(`‚úÖ ÿ™ŸÖ ÿ™ÿ≠ŸÖŸäŸÑ ${loadedCount} ŸÜÿßÿØŸä ŸÖŸÜ ${source.name} (${source.key})`);
                                    break; // ÿßÿ≥ÿ™ÿÆÿØŸÖ ÿ£ŸàŸÑ ŸÖÿµÿØÿ± ŸÜÿßÿ¨ÿ≠
                                }
                            } catch (parseError) {
                                console.error(`ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ÿ≠ŸÑŸäŸÑ ${source.key}:`, parseError);
                            }
                        }
                    }

                    if (totalLoadedCount > 0) {
                        console.log(`üéØ ÿ•ÿ¨ŸÖÿßŸÑŸä ÿßŸÑÿ¥ÿπÿßÿ±ÿßÿ™ ÿßŸÑŸÖÿ≠ŸÖŸÑÿ©: ${Object.keys(this.externalLogoDatabase).length} ŸÖŸÜ ${sourceUsed}`);
                        return true;
                    } else {
                        console.log('‚ö†Ô∏è ŸÑŸÖ Ÿäÿ™ŸÖ ÿßŸÑÿπÿ´Ÿàÿ± ÿπŸÑŸâ ÿ®ŸäÿßŸÜÿßÿ™ ŸÅŸä ÿ£Ÿä ŸÖŸÜ ÿßŸÑŸÖÿµÿßÿØÿ±');
                        return false;
                    }
                } catch (error) {
                    console.error('ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ŸÖŸÜ club-logo-manager:', error);
                }
                return false;
            },

            // ÿßŸÑÿ®ÿ≠ÿ´ ÿßŸÑŸÖÿ™ÿ∑Ÿàÿ± ÿπŸÜ ÿßŸÑŸÜÿßÿØŸä
            findClub(clubName) {
                if (!clubName) return null;

                const normalizedName = clubName.trim();

                // 1. ÿßŸÑÿ®ÿ≠ÿ´ ŸÅŸä ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿÆÿßÿ±ÿ¨Ÿäÿ© ÿ£ŸàŸÑÿßŸã (club-logo-manager)
                const externalResult = this.searchInExternalDatabase(normalizedName);
                if (externalResult) {
                    return externalResult;
                }

                // 2. ÿßŸÑÿ®ÿ≠ÿ´ ŸÅŸä ŸÇÿßÿπÿØÿ© ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖÿ≠ŸÑŸäÿ©
                const localResult = this.searchInLocalDatabase(normalizedName);
                if (localResult) {
                    return localResult;
                }

                return null;
            },

            // ÿßŸÑÿ®ÿ≠ÿ´ ŸÅŸä ŸÇÿßÿπÿØÿ© ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿÆÿßÿ±ÿ¨Ÿäÿ©
            searchInExternalDatabase(clubName) {
                // ÿßŸÑÿ®ÿ≠ÿ´ ÿßŸÑŸÖÿ®ÿßÿ¥ÿ±
                if (this.externalLogoDatabase[clubName]) {
                    return this.externalLogoDatabase[clubName];
                }

                // ÿßŸÑÿ®ÿ≠ÿ´ ÿßŸÑÿ∞ŸÉŸä
                const searchTerms = [
                    clubName,
                    clubName.replace(/FC|CF|United|City|Club|ŸÜÿßÿØŸä|ŸÅÿ±ŸäŸÇ/g, '').trim(),
                    clubName.replace(/\s+/g, ' ').trim()
                ];

                for (const term of searchTerms) {
                    // ÿßŸÑÿ®ÿ≠ÿ´ ŸÅŸä ÿßŸÑŸÖŸÅÿßÿ™Ÿäÿ≠
                    for (const [key, club] of Object.entries(this.externalLogoDatabase)) {
                        if (this.isMatch(term, key) || this.isMatch(key, term)) {
                            return club;
                        }
                    }

                    // ÿßŸÑÿ®ÿ≠ÿ´ ŸÅŸä ÿßŸÑÿ£ÿ≥ŸÖÿßÿ° ÿßŸÑÿ®ÿØŸäŸÑÿ©
                    for (const club of Object.values(this.externalLogoDatabase)) {
                        if (club.aliases && club.aliases.some(alias =>
                            this.isMatch(term, alias) || this.isMatch(alias, term)
                        )) {
                            return club;
                        }
                    }
                }

                return null;
            },

            // ÿßŸÑÿ®ÿ≠ÿ´ ŸÅŸä ŸÇÿßÿπÿØÿ© ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖÿ≠ŸÑŸäÿ©
            searchInLocalDatabase(clubName) {
                // ÿßŸÑÿ®ÿ≠ÿ´ ÿßŸÑŸÖÿ®ÿßÿ¥ÿ±
                if (this.localLogoDatabase[clubName]) {
                    return this.localLogoDatabase[clubName];
                }

                // ÿßŸÑÿ®ÿ≠ÿ´ ŸÅŸä ÿßŸÑÿ£ÿ≥ŸÖÿßÿ° ÿßŸÑÿ®ÿØŸäŸÑÿ©
                for (const [key, club] of Object.entries(this.localLogoDatabase)) {
                    if (club.aliases && club.aliases.some(alias =>
                        this.isMatch(clubName, alias) || this.isMatch(alias, clubName)
                    )) {
                        return club;
                    }
                }

                // ÿßŸÑÿ®ÿ≠ÿ´ ÿßŸÑÿ¨ÿ≤ÿ¶Ÿä
                for (const [key, club] of Object.entries(this.localLogoDatabase)) {
                    if (this.isMatch(clubName, key) || this.isMatch(key, clubName)) {
                        return club;
                    }
                }

                return null;
            },

            // ÿØÿßŸÑÿ© ÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿßŸÑÿ™ÿ∑ÿßÿ®ŸÇ ÿßŸÑŸÖÿ≠ÿ≥ŸÜÿ©
            isMatch(str1, str2) {
                if (!str1 || !str2) return false;

                const normalize = (str) => str.toLowerCase()
                    .replace(/[^\w\s]/g, '')
                    .replace(/\s+/g, ' ')
                    .trim();

                const norm1 = normalize(str1);
                const norm2 = normalize(str2);

                // ÿ™ÿ∑ÿßÿ®ŸÇ ŸÉÿßŸÖŸÑ
                if (norm1 === norm2) return true;

                // ÿ™ÿ∑ÿßÿ®ŸÇ ÿ¨ÿ≤ÿ¶Ÿä (ÿ£ÿ≠ÿØŸáŸÖÿß Ÿäÿ≠ÿ™ŸàŸä ÿπŸÑŸâ ÿßŸÑÿ¢ÿÆÿ±)
                if (norm1.includes(norm2) || norm2.includes(norm1)) {
                    // ÿ™ÿ£ŸÉÿØ ŸÖŸÜ ÿ£ŸÜ ÿßŸÑÿ∑ŸàŸÑ ŸÖŸÜÿßÿ≥ÿ® ŸÑÿ™ÿ¨ŸÜÿ® ÿßŸÑÿ™ÿ∑ÿßÿ®ŸÇÿßÿ™ ÿßŸÑÿÆÿßÿ∑ÿ¶ÿ©
                    const minLength = Math.min(norm1.length, norm2.length);
                    const maxLength = Math.max(norm1.length, norm2.length);
                    return minLength >= 3 && (minLength / maxLength) >= 0.6;
                }

                return false;
            },

            // ÿßŸÑÿ≠ÿµŸàŸÑ ÿπŸÑŸâ ÿ¥ÿπÿßÿ± ÿßŸÑŸÜÿßÿØŸä ÿßŸÑŸÖÿ≠ÿ≥ŸÜ
            getClubLogo(clubName) {
                // ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ SmartLogoSystem ÿ•ÿ∞ÿß ŸÉÿßŸÜ ŸÖÿ™ÿßÿ≠ÿßŸã
                if (window.SmartLogoSystem && typeof window.SmartLogoSystem.getClubLogo === 'function') {
                    try {
                        const logoUrl = window.SmartLogoSystem.getClubLogo(clubName);
                        const clubInfo = window.SmartLogoSystem.getClubInfo ? window.SmartLogoSystem.getClubInfo(clubName) : {};
                        return {
                            primary: logoUrl,
                            fallback: logoUrl,
                            league: clubInfo.league || 'ÿ∫Ÿäÿ± ŸÖÿ≠ÿØÿØ',
                            country: clubInfo.country || 'ÿ∫Ÿäÿ± ŸÖÿ≠ÿØÿØ',
                            source: 'smart-logo-system'
                        };
                    } catch (error) {
                        console.warn('ÿÆÿ∑ÿ£ ŸÅŸä SmartLogoSystem:', error);
                    }
                }

                // ÿßŸÑŸÜÿ∏ÿßŸÖ ÿßŸÑŸÖÿ≠ŸÑŸä ŸÉÿ®ÿØŸäŸÑ
                const club = this.findClub(clubName);
                if (club) {
                    return {
                        primary: club.logo,
                        fallback: club.fallback || club.logo,
                        league: club.league || 'ÿ∫Ÿäÿ± ŸÖÿ≠ÿØÿØ',
                        country: club.country || 'ÿ∫Ÿäÿ± ŸÖÿ≠ÿØÿØ',
                        source: this.externalLogoDatabase[clubName] ? 'club-logo-manager' : 'local'
                    };
                }

                // ÿ¥ÿπÿßÿ± ÿßŸÅÿ™ÿ±ÿßÿ∂Ÿä ŸÑŸÑÿ£ŸÜÿØŸäÿ© ÿ∫Ÿäÿ± ÿßŸÑŸÖÿπÿ±ŸàŸÅÿ©
                return {
                    primary: `https://via.placeholder.com/100x100/1a1a2e/ffd700?text=${clubName.charAt(0)}`,
                    fallback: `https://via.placeholder.com/100x100/1a1a2e/ffd700?text=${clubName.charAt(0)}`,
                    league: 'ÿ∫Ÿäÿ± ŸÖÿ≠ÿØÿØ',
                    country: 'ÿ∫Ÿäÿ± ŸÖÿ≠ÿØÿØ',
                    source: 'generated'
                };
            },

            // ÿ™ÿ≠ÿØŸäÿØ ÿßŸÑÿØŸàÿ±Ÿä ÿ®ŸÜÿßÿ°Ÿã ÿπŸÑŸâ ÿßÿ≥ŸÖ ÿßŸÑŸÜÿßÿØŸä
            determineLeague(clubName) {
                const club = this.findClub(clubName);
                return club ? club.league : 'ÿßŸÑÿØŸàÿ±Ÿä ÿßŸÑÿ£Ÿàÿ±Ÿàÿ®Ÿä';
            },

            // ÿ•ÿ∂ÿßŸÅÿ© ŸÜÿßÿØŸä ÿ¨ÿØŸäÿØ ŸÑŸÇÿßÿπÿØÿ© ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖÿ≠ŸÑŸäÿ©
            addClub(clubName, logoData) {
                this.localLogoDatabase[clubName] = logoData;
                this.saveToLocalStorage();
            },

            // ÿ≠ŸÅÿ∏ ŸÇÿßÿπÿØÿ© ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖÿ≠ŸÑŸäÿ© ŸÅŸä localStorage
            saveToLocalStorage() {
                localStorage.setItem('clubLogoDatabase', JSON.stringify(this.localLogoDatabase));
            },

            // ÿ™ÿ≠ŸÖŸäŸÑ ŸÇÿßÿπÿØÿ© ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖÿ≠ŸÑŸäÿ© ŸÖŸÜ localStorage
            loadFromLocalStorage() {
                const saved = localStorage.getItem('clubLogoDatabase');
                if (saved) {
                    try {
                        const savedData = JSON.parse(saved);
                        this.localLogoDatabase = { ...this.localLogoDatabase, ...savedData };
                    } catch (error) {
                        console.error('ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ÿ≠ŸÖŸäŸÑ ŸÇÿßÿπÿØÿ© ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿ¥ÿπÿßÿ±ÿßÿ™ ÿßŸÑŸÖÿ≠ŸÑŸäÿ©:', error);
                    }
                }
            },

            // ÿ™ŸáŸäÿ¶ÿ© ÿßŸÑŸÜÿ∏ÿßŸÖ ÿßŸÑŸÖÿ≠ÿ≥ŸÜ
            async initialize() {
                // ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖÿ≠ŸÑŸäÿ©
                this.loadFromLocalStorage();

                // ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ŸÖŸÜ club-logo-manager
                const externalLoaded = await this.loadExternalLogos();

                console.log('ÿ™ŸÖ ÿ™ŸáŸäÿ¶ÿ© ŸÜÿ∏ÿßŸÖ ÿ•ÿØÿßÿ±ÿ© ÿßŸÑÿ¥ÿπÿßÿ±ÿßÿ™');
                console.log(`ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖÿ≠ŸÑŸäÿ©: ${Object.keys(this.localLogoDatabase).length} ÿπŸÜÿµÿ±`);
                console.log(`ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿÆÿßÿ±ÿ¨Ÿäÿ©: ${Object.keys(this.externalLogoDatabase).length} ÿπŸÜÿµÿ±`);

                if (externalLoaded) {
                    showNotification('ÿ™ŸÖ ÿ±ÿ®ÿ∑ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ŸÖÿπ club-logo-manager ÿ®ŸÜÿ¨ÿßÿ≠!', 'success');
                } else {
                    showNotification('ÿ™ŸÖ ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ ŸÇÿßÿπÿØÿ© ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖÿ≠ŸÑŸäÿ©', 'info');
                }

                // ÿ•ÿ∂ÿßŸÅÿ© ŸÖÿ≥ÿ™ŸÖÿπ ŸÑŸÑŸÜŸÇÿ± ÿßŸÑŸÖÿ≤ÿØŸàÿ¨ ÿπŸÑŸâ ÿßŸÑÿ¥ÿπÿßÿ±ÿßÿ™ ŸÑÿ™ÿ≠ÿØŸäÿ´Ÿáÿß
                this.setupLogoUpdateListener();

                // ŸÖÿ±ÿßŸÇÿ®ÿ© ÿ™ÿ≠ÿØŸäÿ´ÿßÿ™ club-logo-manager
                this.setupExternalDataMonitoring();
            },

            // ŸÖÿ±ÿßŸÇÿ®ÿ© ÿ™ÿ≠ÿØŸäÿ´ÿßÿ™ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿÆÿßÿ±ÿ¨Ÿäÿ© (ŸÖÿ≠ÿ≥ŸÜ ŸàŸÖÿ∑Ÿàÿ±)
            setupExternalDataMonitoring() {
                // ŸÖÿ±ÿßŸÇÿ®ÿ© ÿ™ÿ∫ŸäŸäÿ±ÿßÿ™ localStorage ŸÑÿ¨ŸÖŸäÿπ ÿßŸÑŸÖŸÅÿßÿ™Ÿäÿ≠
                window.addEventListener('storage', (e) => {
                    const watchedKeys = ['clubManagerData', 'clubsData', 'verifiedClubs'];
                    if (watchedKeys.includes(e.key)) {
                        console.log(`üîÑ ÿ™ŸÖ ÿßŸÉÿ™ÿ¥ÿßŸÅ ÿ™ÿ≠ÿØŸäÿ´ ŸÅŸä ${e.key}`);
                        this.loadExternalLogos().then(() => {
                            showNotification(`ÿ™ŸÖ ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ¥ÿπÿßÿ±ÿßÿ™ ŸÖŸÜ ${e.key}`, 'success');
                            // ÿ•ÿπÿßÿØÿ© ÿπÿ±ÿ∂ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿ≠ÿßŸÑŸäÿ© ÿ®ÿßŸÑÿ¥ÿπÿßÿ±ÿßÿ™ ÿßŸÑÿ¨ÿØŸäÿØÿ©
                            if (currentData && currentData.length > 0) {
                                displayClubs(currentData);
                            }
                        });
                    }
                });

                // ŸÅÿ≠ÿµ ÿØŸàÿ±Ÿä ŸÑŸÑÿ™ÿ≠ÿØŸäÿ´ÿßÿ™ (ŸÉŸÑ 30 ÿ´ÿßŸÜŸäÿ©)
                setInterval(() => {
                    this.loadExternalLogos();
                }, 30000);

                // ŸÅÿ≠ÿµ ŸÅŸàÿ±Ÿä ÿπŸÜÿØ ÿßŸÑÿ™ÿ±ŸÉŸäÿ≤ ÿπŸÑŸâ ÿßŸÑŸÜÿßŸÅÿ∞ÿ©
                window.addEventListener('focus', () => {
                    this.loadExternalLogos();
                });
            },

            // ÿ•ÿπÿØÿßÿØ ŸÖÿ≥ÿ™ŸÖÿπ ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ¥ÿπÿßÿ±ÿßÿ™
            setupLogoUpdateListener() {
                document.addEventListener('dblclick', (e) => {
                    if (e.target.classList.contains('club-logo')) {
                        const clubName = e.target.closest('.club-card').querySelector('.club-name').textContent;
                        this.showLogoUpdateModal(clubName);
                    }
                });
            },

            // ÿπÿ±ÿ∂ ŸÜÿßŸÅÿ∞ÿ© ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ¥ÿπÿßÿ±
            showLogoUpdateModal(clubName) {
                const currentLogo = this.getClubLogo(clubName);

                showAdvancedNotification(
                    `üé® ÿ™ÿ≠ÿØŸäÿ´ ÿ¥ÿπÿßÿ± ${clubName}`,
                    `
                    <div style="text-align: right; margin: 1rem 0;">
                        <div style="margin-bottom: 1rem;">
                            <img src="${currentLogo.primary}" style="width: 60px; height: 60px; border-radius: 50%; object-fit: cover;" onerror="this.src='${currentLogo.fallback}'">
                        </div>
                        <div style="margin-bottom: 1rem;">
                            <label style="display: block; margin-bottom: 0.5rem; font-weight: 600;">ÿ±ÿßÿ®ÿ∑ ÿßŸÑÿ¥ÿπÿßÿ± ÿßŸÑÿ¨ÿØŸäÿØ:</label>
                            <input type="url" id="newLogoUrl" placeholder="https://example.com/logo.png" style="width: 100%; padding: 0.5rem; border: 1px solid #ccc; border-radius: 4px; background: rgba(26, 26, 46, 0.8); color: white;">
                        </div>
                        <div style="margin-bottom: 1rem;">
                            <label style="display: block; margin-bottom: 0.5rem; font-weight: 600;">ÿ±ÿßÿ®ÿ∑ ÿßÿ≠ÿ™Ÿäÿßÿ∑Ÿä:</label>
                            <input type="url" id="newLogoFallback" placeholder="https://example.com/fallback.png" style="width: 100%; padding: 0.5rem; border: 1px solid #ccc; border-radius: 4px; background: rgba(26, 26, 46, 0.8); color: white;">
                        </div>
                    </div>
                    `,
                    'info',
                    [
                        { text: 'ÿ≠ŸÅÿ∏', onClick: `ClubLogoManager.updateClubLogo('${clubName}'); closeNotification(this.closest("[id^=advanced-notification]").id)`, primary: true },
                        { text: 'ÿ•ŸÑÿ∫ÿßÿ°', onClick: 'closeNotification(this.closest("[id^=advanced-notification]").id)' }
                    ]
                );
            },

            // ÿ™ÿ≠ÿØŸäÿ´ ÿ¥ÿπÿßÿ± ÿßŸÑŸÜÿßÿØŸä ÿßŸÑŸÖÿ≠ÿ≥ŸÜ
            updateClubLogo(clubName) {
                const newLogoUrl = document.getElementById('newLogoUrl').value;
                const newLogoFallback = document.getElementById('newLogoFallback').value;

                if (newLogoUrl) {
                    const existingClub = this.findClub(clubName) || {};

                    // ÿ™ÿ≠ÿØŸäÿ´ ŸÅŸä ŸÇÿßÿπÿØÿ© ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖÿ≠ŸÑŸäÿ©
                    this.localLogoDatabase[clubName] = {
                        ...existingClub,
                        logo: newLogoUrl,
                        fallback: newLogoFallback || existingClub.fallback || newLogoUrl,
                        league: existingClub.league || 'ÿ∫Ÿäÿ± ŸÖÿ≠ÿØÿØ',
                        aliases: existingClub.aliases || [],
                        source: 'user-updated'
                    };

                    this.saveToLocalStorage();

                    // ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ¥ÿπÿßÿ± ŸÅŸä ÿßŸÑÿµŸÅÿ≠ÿ©
                    const clubCards = document.querySelectorAll('.club-card');
                    clubCards.forEach(card => {
                        const cardClubName = card.querySelector('.club-name').textContent;
                        if (cardClubName === clubName) {
                            const logoImg = card.querySelector('.club-logo');
                            logoImg.src = newLogoUrl;
                            logoImg.setAttribute('data-fallback', newLogoFallback || newLogoUrl);
                        }
                    });

                    showNotification(`ÿ™ŸÖ ÿ™ÿ≠ÿØŸäÿ´ ÿ¥ÿπÿßÿ± ${clubName} ÿ®ŸÜÿ¨ÿßÿ≠!`, 'success');

                    // ÿ•ÿ¥ÿπÿßÿ± ÿ®ÿ•ŸÖŸÉÿßŸÜŸäÿ© ÿßŸÑŸÖÿ≤ÿßŸÖŸÜÿ© ŸÖÿπ club-logo-manager
                    setTimeout(() => {
                        showAdvancedNotification(
                            'üîÑ ŸÖÿ≤ÿßŸÖŸÜÿ© ŸÖÿπ club-logo-manager',
                            'ŸáŸÑ ÿ™ÿ±ŸäÿØ ÿ•ÿ∂ÿßŸÅÿ© Ÿáÿ∞ÿß ÿßŸÑÿ¥ÿπÿßÿ± ÿ•ŸÑŸâ club-logo-manager ÿ£Ÿäÿ∂ÿßŸãÿü',
                            'info',
                            [
                                { text: 'ŸÜÿπŸÖÿå ÿ£ÿ∂ŸÅ', onClick: `syncToClubLogoManager('${clubName}', '${newLogoUrl}'); closeNotification(this.closest("[id^=advanced-notification]").id)`, primary: true },
                                { text: 'ŸÑÿßÿå ÿ¥ŸÉÿ±ÿßŸã', onClick: 'closeNotification(this.closest("[id^=advanced-notification]").id)' }
                            ]
                        );
                    }, 2000);
                } else {
                    showNotification('Ÿäÿ±ÿ¨Ÿâ ÿ•ÿØÿÆÿßŸÑ ÿ±ÿßÿ®ÿ∑ ÿßŸÑÿ¥ÿπÿßÿ±', 'error');
                }
            },

            // ÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™ ŸÖŸÅÿµŸÑÿ© ŸÑŸÑÿ¥ÿπÿßÿ±ÿßÿ™
            getDetailedStats() {
                const localCount = Object.keys(this.localLogoDatabase).length;
                const externalCount = Object.keys(this.externalLogoDatabase).length;
                const totalUnique = new Set([
                    ...Object.keys(this.localLogoDatabase),
                    ...Object.keys(this.externalLogoDatabase)
                ]).size;

                return {
                    local: localCount,
                    external: externalCount,
                    total: totalUnique,
                    coverage: currentData ? Math.round((currentData.filter(club => this.findClub(club.name)).length / currentData.length) * 100) : 0
                };
            }
        };

        // ÿ™ÿ≠ÿØŸäÿØ ÿßŸÑÿØŸàÿ±Ÿä ÿ®ŸÜÿßÿ°Ÿã ÿπŸÑŸâ ÿßÿ≥ŸÖ ÿßŸÑŸÜÿßÿØŸä (ÿØÿßŸÑÿ© ŸÖÿ≠ÿ≥ŸÜÿ©)
        function determineLeague(clubName) {
            return ClubLogoManager.determineLeague(clubName);
        }

        // ÿ≠ŸÅÿ∏ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ŸÅŸä IndexedDB
        function saveToIndexedDB(key, data) {
            try {
                const request = indexedDB.open('TransfermarktDB', 1);

                request.onupgradeneeded = function(event) {
                    const db = event.target.result;
                    if (!db.objectStoreNames.contains('data')) {
                        db.createObjectStore('data', { keyPath: 'key' });
                    }
                };

                request.onsuccess = function(event) {
                    const db = event.target.result;
                    const transaction = db.transaction(['data'], 'readwrite');
                    const store = transaction.objectStore('data');

                    store.put({
                        key: key,
                        value: data,
                        timestamp: new Date().toISOString()
                    });

                    console.log('üíæ ÿ™ŸÖ ÿ≠ŸÅÿ∏ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ŸÅŸä IndexedDB');
                };

                request.onerror = function(event) {
                    console.warn('‚ö†Ô∏è ÿÆÿ∑ÿ£ ŸÅŸä ÿ≠ŸÅÿ∏ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ŸÅŸä IndexedDB:', event.target.error);
                };
            } catch (error) {
                console.warn('‚ö†Ô∏è IndexedDB ÿ∫Ÿäÿ± ŸÖÿ™ÿßÿ≠:', error);
            }
        }

        // ÿ™ÿ≠ÿØŸäÿ´ ŸàŸÇÿ™ ÿ¢ÿÆÿ± ÿ™ÿ≠ÿØŸäÿ´
        function updateLastUpdatedTime() {
            const now = new Date();
            const timeString = now.toLocaleString('ar-SA', {
                year: 'numeric',
                month: 'long', 
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            });
            
            document.getElementById('lastUpdated').textContent = `ÿ¢ÿÆÿ± ÿ™ÿ≠ÿØŸäÿ´: ${timeString}`;
        }

        // ŸÖÿ™ÿ∫Ÿäÿ±ÿßÿ™ ÿßŸÑÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ™ŸÑŸÇÿßÿ¶Ÿä ÿßŸÑŸÖÿ≠ÿ≥ŸÜÿ©
        let autoUpdateInterval = null;
        let isAutoUpdateEnabled = false;
        let updateCounter = 0;
        let nextUpdateTime = null;

        // ÿ™ŸÅÿπŸäŸÑ/ÿ•ŸÑÿ∫ÿßÿ° ÿßŸÑÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ™ŸÑŸÇÿßÿ¶Ÿä
        function toggleAutoUpdate() {
            const btn = document.getElementById('autoUpdateBtn');

            if (isAutoUpdateEnabled) {
                // ÿ•ŸÑÿ∫ÿßÿ° ÿßŸÑÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ™ŸÑŸÇÿßÿ¶Ÿä
                clearInterval(autoUpdateInterval);
                autoUpdateInterval = null;
                isAutoUpdateEnabled = false;
                nextUpdateTime = null;
                btn.innerHTML = '<i class="fas fa-clock"></i> ÿ™ŸÅÿπŸäŸÑ ÿßŸÑÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ™ŸÑŸÇÿßÿ¶Ÿä';
                btn.style.background = 'linear-gradient(45deg, #3b82f6, #2563eb)';
                showNotification('ÿ™ŸÖ ÿ•ŸÑÿ∫ÿßÿ° ÿßŸÑÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ™ŸÑŸÇÿßÿ¶Ÿä', 'info');

                // ÿ•ÿ≤ÿßŸÑÿ© ÿπÿØÿßÿØ ÿßŸÑŸàŸÇÿ™
                clearUpdateCountdown();
            } else {
                // ÿ™ŸÅÿπŸäŸÑ ÿßŸÑÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ™ŸÑŸÇÿßÿ¶Ÿä
                const updateInterval = 5 * 60 * 1000; // ŸÉŸÑ 5 ÿØŸÇÿßÿ¶ŸÇ
                autoUpdateInterval = setInterval(() => {
                    updateCounter++;
                    fetchLatestData();
                    showNotification(`ÿßŸÑÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ™ŸÑŸÇÿßÿ¶Ÿä #${updateCounter} ÿ™ŸÖ ÿ®ŸÜÿ¨ÿßÿ≠`, 'success');
                }, updateInterval);

                isAutoUpdateEnabled = true;
                nextUpdateTime = new Date(Date.now() + updateInterval);
                btn.innerHTML = '<i class="fas fa-clock"></i> ÿ•ŸÑÿ∫ÿßÿ° ÿßŸÑÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ™ŸÑŸÇÿßÿ¶Ÿä';
                btn.style.background = 'linear-gradient(45deg, #ef4444, #dc2626)';
                showNotification('ÿ™ŸÖ ÿ™ŸÅÿπŸäŸÑ ÿßŸÑÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ™ŸÑŸÇÿßÿ¶Ÿä (ŸÉŸÑ 5 ÿØŸÇÿßÿ¶ŸÇ)', 'success');

                // ÿ®ÿØÿ° ÿπÿØÿßÿØ ÿßŸÑŸàŸÇÿ™
                startUpdateCountdown();
            }
        }

        // ÿπÿØÿßÿØ ÿßŸÑŸàŸÇÿ™ ŸÑŸÑÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ™ÿßŸÑŸä
        function startUpdateCountdown() {
            const countdownInterval = setInterval(() => {
                if (!isAutoUpdateEnabled) {
                    clearInterval(countdownInterval);
                    return;
                }

                const now = new Date();
                const timeLeft = nextUpdateTime - now;

                if (timeLeft <= 0) {
                    nextUpdateTime = new Date(Date.now() + 5 * 60 * 1000);
                    return;
                }

                const minutes = Math.floor(timeLeft / 60000);
                const seconds = Math.floor((timeLeft % 60000) / 1000);

                const btn = document.getElementById('autoUpdateBtn');
                btn.innerHTML = `<i class="fas fa-clock"></i> ÿßŸÑÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ™ÿßŸÑŸä: ${minutes}:${seconds.toString().padStart(2, '0')}`;
            }, 1000);
        }

        // ÿ•ÿ≤ÿßŸÑÿ© ÿπÿØÿßÿØ ÿßŸÑŸàŸÇÿ™
        function clearUpdateCountdown() {
            const btn = document.getElementById('autoUpdateBtn');
            if (btn) {
                btn.innerHTML = '<i class="fas fa-clock"></i> ÿ™ŸÅÿπŸäŸÑ ÿßŸÑÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ™ŸÑŸÇÿßÿ¶Ÿä';
            }
        }

        // ŸÖÿ™ÿ∫Ÿäÿ±ÿßÿ™ ŸÜÿ∏ÿßŸÖ ÿßŸÑÿ¨ÿØŸàŸÑÿ© ÿßŸÑÿ∞ŸÉŸä
        let scheduleSettings = {
            type: 'interval',
            interval: 5,
            specificTimes: ['09:00', '15:00', '21:00'],
            smartUpdate: false,
            offlineMode: false
        };
        let scheduledTimeouts = [];
        let lastDataHash = '';

        // ÿπÿ±ÿ∂ ŸÜÿßŸÅÿ∞ÿ© ÿßŸÑÿ¨ÿØŸàŸÑÿ©
        function showScheduleModal() {
            const modal = document.getElementById('scheduleModal');
            modal.style.display = 'flex';

            // ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ•ÿπÿØÿßÿØÿßÿ™ ÿßŸÑŸÖÿ≠ŸÅŸàÿ∏ÿ©
            loadScheduleSettings();
        }

        // ÿ•ÿ∫ŸÑÿßŸÇ ŸÜÿßŸÅÿ∞ÿ© ÿßŸÑÿ¨ÿØŸàŸÑÿ©
        function closeScheduleModal() {
            const modal = document.getElementById('scheduleModal');
            modal.style.display = 'none';
        }

        // ÿ™ÿ≠ŸÖŸäŸÑ ÿ•ÿπÿØÿßÿØÿßÿ™ ÿßŸÑÿ¨ÿØŸàŸÑÿ©
        function loadScheduleSettings() {
            const saved = localStorage.getItem('scheduleSettings');
            if (saved) {
                scheduleSettings = { ...scheduleSettings, ...JSON.parse(saved) };
            }

            // ÿ™ÿ∑ÿ®ŸäŸÇ ÿßŸÑÿ•ÿπÿØÿßÿØÿßÿ™ ÿπŸÑŸâ ÿßŸÑŸÜÿßŸÅÿ∞ÿ©
            document.querySelector(`input[value="${scheduleSettings.type}"]`).checked = true;
            document.getElementById('intervalSelect').value = scheduleSettings.interval;
            document.getElementById('smartUpdate').checked = scheduleSettings.smartUpdate;
            document.getElementById('offlineMode').checked = scheduleSettings.offlineMode;

            scheduleSettings.specificTimes.forEach((time, index) => {
                const timeInput = document.getElementById(`time${index + 1}`);
                if (timeInput) timeInput.value = time;
            });
        }

        // ÿ™ÿ∑ÿ®ŸäŸÇ ÿ•ÿπÿØÿßÿØÿßÿ™ ÿßŸÑÿ¨ÿØŸàŸÑÿ©
        function applySchedule() {
            // ÿ¨ŸÖÿπ ÿßŸÑÿ•ÿπÿØÿßÿØÿßÿ™ ŸÖŸÜ ÿßŸÑŸÜÿßŸÅÿ∞ÿ©
            const scheduleType = document.querySelector('input[name="scheduleType"]:checked').value;
            const interval = parseInt(document.getElementById('intervalSelect').value);
            const smartUpdate = document.getElementById('smartUpdate').checked;
            const offlineMode = document.getElementById('offlineMode').checked;

            const specificTimes = [
                document.getElementById('time1').value,
                document.getElementById('time2').value,
                document.getElementById('time3').value
            ].filter(time => time);

            scheduleSettings = {
                type: scheduleType,
                interval: interval,
                specificTimes: specificTimes,
                smartUpdate: smartUpdate,
                offlineMode: offlineMode
            };

            // ÿ≠ŸÅÿ∏ ÿßŸÑÿ•ÿπÿØÿßÿØÿßÿ™
            localStorage.setItem('scheduleSettings', JSON.stringify(scheduleSettings));

            // ÿ™ÿ∑ÿ®ŸäŸÇ ÿßŸÑÿ¨ÿØŸàŸÑÿ© ÿßŸÑÿ¨ÿØŸäÿØÿ©
            setupSmartSchedule();

            // ÿ•ÿ∫ŸÑÿßŸÇ ÿßŸÑŸÜÿßŸÅÿ∞ÿ©
            closeScheduleModal();

            // ÿ•ÿ¥ÿπÿßÿ± ÿßŸÑŸÜÿ¨ÿßÿ≠
            showAdvancedNotification(
                '‚úÖ ÿ™ŸÖ ÿ™ÿ∑ÿ®ŸäŸÇ ÿßŸÑÿ¨ÿØŸàŸÑÿ© ÿ®ŸÜÿ¨ÿßÿ≠',
                `ÿ™ŸÖ ÿ™ŸÅÿπŸäŸÑ ${scheduleType === 'interval' ? 'ÿßŸÑÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿØŸàÿ±Ÿä' : 'ÿßŸÑÿ£ŸàŸÇÿßÿ™ ÿßŸÑŸÖÿ≠ÿØÿØÿ©'} ŸÖÿπ ${smartUpdate ? 'ÿßŸÑÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ∞ŸÉŸä' : 'ÿßŸÑÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿπÿßÿØŸä'}`,
                'success'
            );
        }

        // ÿ•ÿπÿØÿßÿØ ÿßŸÑÿ¨ÿØŸàŸÑÿ© ÿßŸÑÿ∞ŸÉŸäÿ©
        function setupSmartSchedule() {
            // ÿ•ŸÑÿ∫ÿßÿ° ÿßŸÑÿ¨ÿØŸàŸÑÿ© ÿßŸÑÿ≥ÿßÿ®ŸÇÿ©
            clearSmartSchedule();

            if (scheduleSettings.type === 'interval') {
                // ÿ¨ÿØŸàŸÑÿ© ÿØŸàÿ±Ÿäÿ©
                const intervalMs = scheduleSettings.interval * 60 * 1000;
                const scheduleInterval = setInterval(() => {
                    performSmartUpdate();
                }, intervalMs);

                scheduledTimeouts.push(scheduleInterval);

            } else if (scheduleSettings.type === 'specific') {
                // ÿ¨ÿØŸàŸÑÿ© ÿ£ŸàŸÇÿßÿ™ ŸÖÿ≠ÿØÿØÿ©
                scheduleSpecificTimes();
            }
        }

        // ÿ¨ÿØŸàŸÑÿ© ÿ£ŸàŸÇÿßÿ™ ŸÖÿ≠ÿØÿØÿ©
        function scheduleSpecificTimes() {
            scheduleSettings.specificTimes.forEach(timeStr => {
                scheduleTimeUpdate(timeStr);
            });
        }

        // ÿ¨ÿØŸàŸÑÿ© ŸàŸÇÿ™ ŸÖÿ≠ÿØÿØ
        function scheduleTimeUpdate(timeStr) {
            const now = new Date();
            const [hours, minutes] = timeStr.split(':').map(Number);

            const scheduledTime = new Date();
            scheduledTime.setHours(hours, minutes, 0, 0);

            // ÿ•ÿ∞ÿß ŸÉÿßŸÜ ÿßŸÑŸàŸÇÿ™ ŸÇÿØ ŸÖÿ∂Ÿâ ÿßŸÑŸäŸàŸÖÿå ÿ¨ÿØŸàŸÑŸá ŸÑŸÑÿ∫ÿØ
            if (scheduledTime <= now) {
                scheduledTime.setDate(scheduledTime.getDate() + 1);
            }

            const timeUntilUpdate = scheduledTime.getTime() - now.getTime();

            const timeout = setTimeout(() => {
                performSmartUpdate();
                // ÿ•ÿπÿßÿØÿ© ÿ¨ÿØŸàŸÑÿ© ŸÑŸÑŸäŸàŸÖ ÿßŸÑÿ™ÿßŸÑŸä
                scheduleTimeUpdate(timeStr);
            }, timeUntilUpdate);

            scheduledTimeouts.push(timeout);
        }

        // ÿ™ŸÜŸÅŸäÿ∞ ÿßŸÑÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ∞ŸÉŸä
        async function performSmartUpdate() {
            try {
                if (scheduleSettings.smartUpdate) {
                    // ŸÅÿ≠ÿµ ŸÖÿß ÿ•ÿ∞ÿß ŸÉÿßŸÜÿ™ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿ™ÿ∫Ÿäÿ±ÿ™
                    const newData = await fetchTransfermarktData();
                    const newDataHash = generateDataHash(newData);

                    if (newDataHash === lastDataHash) {
                        console.log('ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ™ÿ∫ŸäŸäÿ±ÿßÿ™ ŸÅŸä ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ÿå ÿ™ŸÖ ÿ™ÿÆÿ∑Ÿä ÿßŸÑÿ™ÿ≠ÿØŸäÿ´');
                        showNotification('ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ™ÿ∫ŸäŸäÿ±ÿßÿ™ ÿ¨ÿØŸäÿØÿ©', 'info', 2000);
                        return;
                    }

                    lastDataHash = newDataHash;
                }

                // ÿ™ŸÜŸÅŸäÿ∞ ÿßŸÑÿ™ÿ≠ÿØŸäÿ´
                await fetchLatestData();

                if (scheduleSettings.offlineMode) {
                    // ÿ≠ŸÅÿ∏ ŸÜÿ≥ÿÆÿ© ÿßÿ≠ÿ™Ÿäÿßÿ∑Ÿäÿ© ŸÖÿ≠ŸÑŸäÿ©
                    saveOfflineBackup();
                }

            } catch (error) {
                console.error('ÿÆÿ∑ÿ£ ŸÅŸä ÿßŸÑÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑŸÖÿ¨ÿØŸàŸÑ:', error);
                showNotification('ŸÅÿ¥ŸÑ ŸÅŸä ÿßŸÑÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑŸÖÿ¨ÿØŸàŸÑ', 'error');
            }
        }

        // ÿ•ŸÜÿ¥ÿßÿ° hash ŸÑŸÑÿ®ŸäÿßŸÜÿßÿ™ ŸÑŸÑŸÖŸÇÿßÿ±ŸÜÿ©
        function generateDataHash(data) {
            if (!data || !Array.isArray(data)) return '';

            const dataString = data.map(club =>
                `${club.name}-${club.expenditure}-${club.arrivals}-${club.departures}`
            ).join('|');

            // hash ÿ®ÿ≥Ÿäÿ∑
            let hash = 0;
            for (let i = 0; i < dataString.length; i++) {
                const char = dataString.charCodeAt(i);
                hash = ((hash << 5) - hash) + char;
                hash = hash & hash; // ÿ™ÿ≠ŸàŸäŸÑ ÿ•ŸÑŸâ 32bit integer
            }
            return hash.toString();
        }

        // ÿ≠ŸÅÿ∏ ŸÜÿ≥ÿÆÿ© ÿßÿ≠ÿ™Ÿäÿßÿ∑Ÿäÿ© ŸÖÿ≠ŸÑŸäÿ©
        function saveOfflineBackup() {
            const backup = {
                data: currentData,
                timestamp: new Date().toISOString(),
                settings: scheduleSettings
            };

            localStorage.setItem('transfermarkt-offline-backup', JSON.stringify(backup));
            console.log('ÿ™ŸÖ ÿ≠ŸÅÿ∏ ÿßŸÑŸÜÿ≥ÿÆÿ© ÿßŸÑÿßÿ≠ÿ™Ÿäÿßÿ∑Ÿäÿ©');
        }

        // ÿ•ŸÑÿ∫ÿßÿ° ÿßŸÑÿ¨ÿØŸàŸÑÿ© ÿßŸÑÿ∞ŸÉŸäÿ©
        function clearSmartSchedule() {
            scheduledTimeouts.forEach(timeout => {
                clearTimeout(timeout);
                clearInterval(timeout);
            });
            scheduledTimeouts = [];
        }

        // ÿ™ÿ≠ÿØŸäÿ´ ŸÖÿ§ÿ¥ÿ± ÿßŸÑÿ™ŸÇÿØŸÖ
        function updateProgress(percentage, message) {
            const progressBar = document.getElementById('progressBar');
            const progressText = document.getElementById('progressText');
            const loadingText = document.getElementById('loadingText');

            if (progressBar) {
                progressBar.style.width = percentage + '%';
            }

            if (progressText) {
                progressText.textContent = percentage + '%';
            }

            if (loadingText && message) {
                loadingText.textContent = message;
            }
        }

        // ÿ™ÿ£ÿ´Ÿäÿ±ÿßÿ™ ÿ®ÿµÿ±Ÿäÿ© ŸÖÿ™ŸÇÿØŸÖÿ© ŸÑŸÑÿ®ÿ∑ÿßŸÇÿßÿ™
        function addCardInteractions() {
            const cards = document.querySelectorAll('.club-card');

            cards.forEach(card => {
                // ÿ™ÿ£ÿ´Ÿäÿ± ÿßŸÑŸÖÿßŸàÿ≥
                card.addEventListener('mouseenter', function() {
                    this.style.transform = 'translateY(-8px) scale(1.02)';
                    this.style.zIndex = '10';

                    // ÿ•ÿ∂ÿßŸÅÿ© ÿ™ÿ£ÿ´Ÿäÿ± ÿßŸÑÿ∂Ÿàÿ°
                    const lightEffect = document.createElement('div');
                    lightEffect.className = 'light-effect';
                    lightEffect.style.cssText = `
                        position: absolute;
                        top: -50%;
                        left: -50%;
                        width: 200%;
                        height: 200%;
                        background: radial-gradient(circle, rgba(255,215,0,0.1) 0%, transparent 70%);
                        pointer-events: none;
                        z-index: -1;
                        animation: lightPulse 2s ease-in-out infinite;
                    `;
                    this.appendChild(lightEffect);
                });

                card.addEventListener('mouseleave', function() {
                    this.style.transform = 'translateY(0) scale(1)';
                    this.style.zIndex = '1';

                    // ÿ•ÿ≤ÿßŸÑÿ© ÿ™ÿ£ÿ´Ÿäÿ± ÿßŸÑÿ∂Ÿàÿ°
                    const lightEffect = this.querySelector('.light-effect');
                    if (lightEffect) {
                        lightEffect.remove();
                    }
                });

                // ÿ™ÿ£ÿ´Ÿäÿ± ÿßŸÑŸÜŸÇÿ±
                card.addEventListener('click', function() {
                    this.style.transform = 'translateY(-8px) scale(0.98)';
                    setTimeout(() => {
                        this.style.transform = 'translateY(-8px) scale(1.02)';
                    }, 150);

                    // ÿ•ÿ∏Ÿáÿßÿ± ŸÖÿπŸÑŸàŸÖÿßÿ™ ÿ•ÿ∂ÿßŸÅŸäÿ©
                    showClubDetails(this);
                });
            });
        }

        // ÿπÿ±ÿ∂ ÿ™ŸÅÿßÿµŸäŸÑ ÿßŸÑŸÜÿßÿØŸä
        function showClubDetails(cardElement) {
            const clubName = cardElement.querySelector('.club-name').textContent;
            const expenditure = cardElement.querySelector('.expenditure-amount').textContent;
            const arrivals = cardElement.querySelector('.stat-value').textContent;
            const logoData = ClubLogoManager.getClubLogo(clubName);

            showAdvancedNotification(
                `üìä ÿ™ŸÅÿßÿµŸäŸÑ ${clubName}`,
                `
                <div style="text-align: right;">
                    <div style="margin-bottom: 1rem;">
                        <strong>ÿ•ÿ¨ŸÖÿßŸÑŸä ÿßŸÑÿ•ŸÜŸÅÿßŸÇ:</strong> ${expenditure}<br>
                        <strong>ÿπÿØÿØ ÿßŸÑŸÇÿßÿØŸÖŸäŸÜ:</strong> ${arrivals}<br>
                        <strong>ŸÖÿµÿØÿ± ÿßŸÑÿ¥ÿπÿßÿ±:</strong> ${logoData.source === 'club-logo-manager' ? 'ŸÖÿØŸäÿ± ÿßŸÑÿ¥ÿπÿßÿ±ÿßÿ™' : logoData.source === 'local' ? 'ŸÇÿßÿπÿØÿ© ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖÿ≠ŸÑŸäÿ©' : 'ŸÖŸàŸÑÿØ ÿ™ŸÑŸÇÿßÿ¶ŸäÿßŸã'}
                    </div>
                </div>
                `,
                'info',
                [
                    { text: 'ÿ±ÿ®ÿ∑ ŸäÿØŸàŸä ÿ®ÿßŸÑÿ¥ÿπÿßÿ±', onClick: `showManualLinkModal('${clubName}'); closeNotification(this.closest("[id^=advanced-notification]").id)`, primary: true },
                    { text: 'ÿ™ŸÅÿßÿµŸäŸÑ ÿ£ŸÉÿ´ÿ±', onClick: `openClubProfile('${clubName}')` },
                    { text: 'ÿ•ÿ∫ŸÑÿßŸÇ', onClick: 'closeNotification(this.closest("[id^=advanced-notification]").id)' }
                ]
            );
        }

        // ÿπÿ±ÿ∂ ŸÜÿßŸÅÿ∞ÿ© ÿßŸÑÿ±ÿ®ÿ∑ ÿßŸÑŸäÿØŸàŸä (ŸÖÿ≠ÿ≥ŸÜ ŸàŸÖÿ∑Ÿàÿ±)
        function showManualLinkModal(clubName) {
            // ÿßŸÑÿ≠ÿµŸàŸÑ ÿπŸÑŸâ ŸÇÿßÿ¶ŸÖÿ© ÿßŸÑÿ£ŸÜÿØŸäÿ© ÿßŸÑŸÖÿ™ÿßÿ≠ÿ© ŸÖŸÜ ÿ¨ŸÖŸäÿπ ÿßŸÑŸÖÿµÿßÿØÿ±
            let availableClubs = [];
            const dataSources = ['clubManagerData', 'clubsData', 'verifiedClubs'];

            dataSources.forEach(sourceKey => {
                const clubsData = localStorage.getItem(sourceKey);
                if (clubsData) {
                    try {
                        const clubs = JSON.parse(clubsData);
                        clubs.forEach(club => {
                            const logoUrl = club.logo || club.logoUrl;
                            if (logoUrl && logoUrl !== 'N/A' && logoUrl.startsWith('http')) {
                                const clubInfo = {
                                    name: club.arabicName || club.englishName,
                                    arabicName: club.arabicName,
                                    englishName: club.englishName,
                                    logo: logoUrl,
                                    source: sourceKey
                                };

                                // ÿ™ÿ¨ŸÜÿ® ÿßŸÑÿ™ŸÉÿ±ÿßÿ±
                                const exists = availableClubs.some(existing =>
                                    existing.name === clubInfo.name ||
                                    existing.logo === clubInfo.logo
                                );

                                if (!exists) {
                                    availableClubs.push(clubInfo);
                                }
                            }
                        });
                    } catch (error) {
                        console.error(`ÿÆÿ∑ÿ£ ŸÅŸä ŸÇÿ±ÿßÿ°ÿ© ÿ®ŸäÿßŸÜÿßÿ™ ${sourceKey}:`, error);
                    }
                }
            });

            // ÿ™ÿ±ÿ™Ÿäÿ® ÿßŸÑÿ£ŸÜÿØŸäÿ© ÿ£ÿ®ÿ¨ÿØŸäÿßŸã
            availableClubs.sort((a, b) => a.name.localeCompare(b.name));

            let clubOptionsHtml = '<option value="">ÿßÿÆÿ™ÿ± ŸÜÿßÿØŸä...</option>';
            availableClubs.forEach(club => {
                clubOptionsHtml += `<option value="${club.name}" data-logo="${club.logo}">${club.name}</option>`;
            });

            showAdvancedNotification(
                `üîó ÿ±ÿ®ÿ∑ ŸäÿØŸàŸä: ${clubName}`,
                `
                <div style="text-align: right; margin: 1rem 0;">
                    <div style="margin-bottom: 1rem;">
                        <label style="display: block; margin-bottom: 0.5rem; font-weight: 600;">ÿßÿÆÿ™ÿ± ÿßŸÑŸÜÿßÿØŸä ÿßŸÑŸÖÿ∑ÿßÿ®ŸÇ ŸÖŸÜ club-logo-manager:</label>
                        <select id="manualLinkSelect" style="width: 100%; padding: 0.5rem; border: 1px solid #ccc; border-radius: 4px; background: rgba(26, 26, 46, 0.8); color: white;" onchange="previewManualLink()">
                            ${clubOptionsHtml}
                        </select>
                    </div>
                    <div id="linkPreview" style="display: none; margin-top: 1rem; padding: 1rem; background: rgba(16, 185, 129, 0.1); border-radius: 8px;">
                        <div style="display: flex; align-items: center; gap: 1rem;">
                            <img id="previewLogo" style="width: 50px; height: 50px; border-radius: 50%; object-fit: cover;">
                            <div>
                                <div style="font-weight: 600;">ŸÖÿπÿßŸäŸÜÿ© ÿßŸÑÿ±ÿ®ÿ∑</div>
                                <div id="previewName" style="color: rgba(255, 255, 255, 0.8);"></div>
                            </div>
                        </div>
                    </div>
                </div>
                `,
                'info',
                [
                    { text: 'ÿ™ÿ£ŸÉŸäÿØ ÿßŸÑÿ±ÿ®ÿ∑', onClick: `confirmManualLink('${clubName}'); closeNotification(this.closest("[id^=advanced-notification]").id)`, primary: true },
                    { text: 'ÿ•ŸÑÿ∫ÿßÿ°', onClick: 'closeNotification(this.closest("[id^=advanced-notification]").id)' }
                ]
            );
        }

        // ŸÖÿπÿßŸäŸÜÿ© ÿßŸÑÿ±ÿ®ÿ∑ ÿßŸÑŸäÿØŸàŸä
        function previewManualLink() {
            const select = document.getElementById('manualLinkSelect');
            const preview = document.getElementById('linkPreview');
            const previewLogo = document.getElementById('previewLogo');
            const previewName = document.getElementById('previewName');

            if (select.value) {
                const selectedOption = select.options[select.selectedIndex];
                const logoUrl = selectedOption.getAttribute('data-logo');

                previewLogo.src = logoUrl;
                previewName.textContent = select.value;
                preview.style.display = 'block';
            } else {
                preview.style.display = 'none';
            }
        }

        // ÿ™ÿ£ŸÉŸäÿØ ÿßŸÑÿ±ÿ®ÿ∑ ÿßŸÑŸäÿØŸàŸä
        function confirmManualLink(clubName) {
            const select = document.getElementById('manualLinkSelect');

            if (select.value) {
                const selectedOption = select.options[select.selectedIndex];
                const logoUrl = selectedOption.getAttribute('data-logo');
                const linkedClubName = select.value;

                // ÿ•ŸÜÿ¥ÿßÿ° ÿ±ÿ®ÿ∑ ŸÅŸä ŸÇÿßÿπÿØÿ© ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖÿ≠ŸÑŸäÿ©
                ClubLogoManager.localLogoDatabase[clubName] = {
                    logo: logoUrl,
                    fallback: logoUrl,
                    league: 'ÿ∫Ÿäÿ± ŸÖÿ≠ÿØÿØ',
                    aliases: [linkedClubName],
                    source: 'manual-link',
                    linkedTo: linkedClubName
                };

                ClubLogoManager.saveToLocalStorage();

                // ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ¥ÿπÿßÿ± ŸÅŸä ÿßŸÑÿµŸÅÿ≠ÿ©
                const clubCards = document.querySelectorAll('.club-card');
                clubCards.forEach(card => {
                    const cardClubName = card.querySelector('.club-name').textContent;
                    if (cardClubName === clubName) {
                        const logoImg = card.querySelector('.club-logo');
                        logoImg.src = logoUrl;
                        logoImg.setAttribute('data-fallback', logoUrl);
                    }
                });

                showNotification(`ÿ™ŸÖ ÿ±ÿ®ÿ∑ ${clubName} ŸÖÿπ ${linkedClubName} ÿ®ŸÜÿ¨ÿßÿ≠!`, 'success');
            } else {
                showNotification('Ÿäÿ±ÿ¨Ÿâ ÿßÿÆÿ™Ÿäÿßÿ± ŸÜÿßÿØŸä ŸÑŸÑÿ±ÿ®ÿ∑', 'error');
            }
        }

        // ŸÅÿ™ÿ≠ ŸÖŸÑŸÅ ÿßŸÑŸÜÿßÿØŸä (ŸäŸÖŸÉŸÜ ÿ™ÿ∑ŸàŸäÿ±Ÿá ŸÑÿßÿ≠ŸÇÿßŸã)
        function openClubProfile(clubName) {
            showNotification(`ÿ≥Ÿäÿ™ŸÖ ÿ•ÿ∂ÿßŸÅÿ© ŸÖŸÑŸÅ ${clubName} ŸÇÿ±Ÿäÿ®ÿßŸã!`, 'info');
        }

        // ÿ•ÿ∂ÿßŸÅÿ© CSS ŸÑŸÑÿ™ÿ£ÿ´Ÿäÿ±ÿßÿ™
        const additionalStyles = `
            @keyframes lightPulse {
                0%, 100% { opacity: 0.3; transform: scale(1); }
                50% { opacity: 0.6; transform: scale(1.1); }
            }

            .club-card {
                cursor: pointer;
                user-select: none;
            }

            .club-card:active {
                transform: translateY(-6px) scale(0.98) !important;
            }
        `;

        // ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑÿ£ŸÜŸÖÿßÿ∑ ŸÑŸÑÿµŸÅÿ≠ÿ©
        function addDynamicStyles() {
            const styleSheet = document.createElement('style');
            styleSheet.textContent = additionalStyles;
            document.head.appendChild(styleSheet);
        }

        // ÿ™ÿµÿØŸäÿ± ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖÿ≠ÿ≥ŸÜ
        function exportData() {
            try {
                const fullData = JSON.parse(localStorage.getItem('transfermarktDataFull')) || {};

                const dataToExport = {
                    exportInfo: {
                        timestamp: new Date().toISOString(),
                        exportedBy: 'Mercato Transfer Tool',
                        version: '2.0',
                        totalRecords: currentData.length
                    },
                    seasonInfo: {
                        season: '2024/2025',
                        lastUpdate: fullData.lastUpdate || new Date().toISOString(),
                        dataSource: fullData.source || 'enhanced-default'
                    },
                    clubs: currentData.map(club => ({
                        ...club,
                        exportedAt: new Date().toISOString()
                    })),
                    statistics: {
                        totalExpenditure: calculateTotalExpenditure(currentData),
                        averageExpenditure: calculateAverageExpenditure(currentData),
                        topSpender: currentData[0]?.name || 'ÿ∫Ÿäÿ± ŸÖÿ≠ÿØÿØ',
                        totalArrivals: currentData.reduce((sum, club) => sum + (club.arrivals || 0), 0),
                        totalDepartures: currentData.reduce((sum, club) => sum + (club.departures || 0), 0)
                    }
                };

                // ÿ™ÿµÿØŸäÿ± JSON
                const jsonString = JSON.stringify(dataToExport, null, 2);
                const jsonBlob = new Blob([jsonString], { type: 'application/json' });
                const jsonUrl = URL.createObjectURL(jsonBlob);

                const jsonLink = document.createElement('a');
                jsonLink.href = jsonUrl;
                jsonLink.download = `transfermarkt-top-spenders-${new Date().toISOString().split('T')[0]}.json`;
                document.body.appendChild(jsonLink);
                jsonLink.click();
                document.body.removeChild(jsonLink);
                URL.revokeObjectURL(jsonUrl);

                // ÿ™ÿµÿØŸäÿ± CSV ÿ£Ÿäÿ∂ÿßŸã
                exportCSV(currentData);

                showNotification('ÿ™ŸÖ ÿ™ÿµÿØŸäÿ± ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿ®ÿµŸäÿ∫ÿ™Ÿä JSON Ÿà CSV ÿ®ŸÜÿ¨ÿßÿ≠!', 'success');

            } catch (error) {
                console.error('ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ÿµÿØŸäÿ± ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™:', error);
                showNotification('ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ÿµÿØŸäÿ± ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™', 'error');
            }
        }

        // ÿ™ÿµÿØŸäÿ± CSV
        function exportCSV(data) {
            const headers = ['ÿßŸÑÿ™ÿ±ÿ™Ÿäÿ®', 'ÿßÿ≥ŸÖ ÿßŸÑŸÜÿßÿØŸä', 'ÿßŸÑÿØŸàÿ±Ÿä', 'ÿßŸÑÿ•ŸÜŸÅÿßŸÇ', 'ÿßŸÑŸÇÿßÿØŸÖŸàŸÜ', 'ÿßŸÑŸÖÿ∫ÿßÿØÿ±ŸàŸÜ', 'ÿßŸÑÿ•Ÿäÿ±ÿßÿØÿßÿ™', 'ÿßŸÑÿ±ÿµŸäÿØ'];
            const csvContent = [
                headers.join(','),
                ...data.map(club => [
                    club.rank,
                    `"${club.name}"`,
                    `"${club.league || 'ÿ∫Ÿäÿ± ŸÖÿ≠ÿØÿØ'}"`,
                    `"${club.expenditure}"`,
                    club.arrivals || 0,
                    club.departures || 0,
                    `"${club.income}"`,
                    `"${club.balance}"`
                ].join(','))
            ].join('\n');

            const csvBlob = new Blob(['\ufeff' + csvContent], { type: 'text/csv;charset=utf-8;' });
            const csvUrl = URL.createObjectURL(csvBlob);

            const csvLink = document.createElement('a');
            csvLink.href = csvUrl;
            csvLink.download = `transfermarkt-top-spenders-${new Date().toISOString().split('T')[0]}.csv`;
            document.body.appendChild(csvLink);
            csvLink.click();
            document.body.removeChild(csvLink);
            URL.revokeObjectURL(csvUrl);
        }

        // ÿ≠ÿ≥ÿßÿ® ÿ•ÿ¨ŸÖÿßŸÑŸä ÿßŸÑÿ•ŸÜŸÅÿßŸÇ
        function calculateTotalExpenditure(data) {
            return data.reduce((total, club) => {
                const amount = parseFloat(club.expenditure.replace(/[‚Ç¨m,]/g, '')) || 0;
                return total + amount;
            }, 0).toFixed(2) + 'm';
        }

        // ÿ≠ÿ≥ÿßÿ® ŸÖÿ™Ÿàÿ≥ÿ∑ ÿßŸÑÿ•ŸÜŸÅÿßŸÇ
        function calculateAverageExpenditure(data) {
            const total = parseFloat(calculateTotalExpenditure(data).replace('m', ''));
            return (total / data.length).toFixed(2) + 'm';
        }

        // ŸÅÿ™ÿ≠ ÿµŸÅÿ≠ÿ© ÿßŸÑÿπÿ±ÿ∂ ÿßŸÑÿßÿ≠ÿ™ÿ±ÿßŸÅŸäÿ©
        function openDisplayPage() {
            // ÿ≠ŸÅÿ∏ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿ≠ÿßŸÑŸäÿ© ŸÅŸä localStorage
            localStorage.setItem('transfermarktData', JSON.stringify(currentData));
            localStorage.setItem('transfermarktLastUpdate', new Date().toISOString());

            // ŸÅÿ™ÿ≠ ÿµŸÅÿ≠ÿ© ÿßŸÑÿπÿ±ÿ∂ ŸÅŸä ŸÜÿßŸÅÿ∞ÿ© ÿ¨ÿØŸäÿØÿ©
            window.open('/transfermarkt-display-pro.html', '_blank');

            showNotification('ÿ™ŸÖ ŸÅÿ™ÿ≠ ÿµŸÅÿ≠ÿ© ÿßŸÑÿπÿ±ÿ∂ ÿßŸÑÿßÿ≠ÿ™ÿ±ÿßŸÅŸäÿ©!', 'success');
        }

        // ŸÜÿ∏ÿßŸÖ ÿ•ÿ¥ÿπÿßÿ±ÿßÿ™ ŸÖÿ≠ÿ≥ŸÜ
        function showNotification(message, type = 'info', duration = 4000) {
            const notification = document.createElement('div');
            const notificationId = 'notification-' + Date.now();

            // ÿ™ÿ≠ÿØŸäÿØ ÿßŸÑÿ£ŸÑŸàÿßŸÜ ŸàÿßŸÑÿ£ŸäŸÇŸàŸÜÿßÿ™ ÿ≠ÿ≥ÿ® ÿßŸÑŸÜŸàÿπ
            const styles = {
                success: { bg: '#10b981', icon: 'fas fa-check-circle' },
                error: { bg: '#ef4444', icon: 'fas fa-exclamation-circle' },
                warning: { bg: '#f59e0b', icon: 'fas fa-exclamation-triangle' },
                info: { bg: '#3b82f6', icon: 'fas fa-info-circle' }
            };

            const style = styles[type] || styles.info;

            notification.id = notificationId;
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: ${style.bg};
                color: white;
                padding: 1rem 1.5rem;
                border-radius: 12px;
                box-shadow: 0 8px 25px rgba(0,0,0,0.3);
                z-index: 1000;
                font-weight: 600;
                transform: translateX(100%);
                transition: all 0.3s ease;
                max-width: 350px;
                min-width: 250px;
                display: flex;
                align-items: center;
                gap: 0.75rem;
                cursor: pointer;
                border: 2px solid rgba(255,255,255,0.2);
            `;

            notification.innerHTML = `
                <i class="${style.icon}"></i>
                <span style="flex: 1;">${message}</span>
                <i class="fas fa-times" style="opacity: 0.7; font-size: 0.9rem;"></i>
            `;

            // ÿ•ÿ∂ÿßŸÅÿ© ŸÖÿ≥ÿ™ŸÖÿπ ŸÑŸÑŸÜŸÇÿ± ŸÑŸÑÿ•ÿ∫ŸÑÿßŸÇ
            notification.addEventListener('click', () => {
                closeNotification(notificationId);
            });

            document.body.appendChild(notification);

            // ÿ™ÿ£ÿ´Ÿäÿ± ÿßŸÑÿ∏ŸáŸàÿ±
            setTimeout(() => {
                notification.style.transform = 'translateX(0)';
            }, 100);

            // ÿßŸÑÿ•ÿ∫ŸÑÿßŸÇ ÿßŸÑÿ™ŸÑŸÇÿßÿ¶Ÿä
            setTimeout(() => {
                closeNotification(notificationId);
            }, duration);

            return notificationId;
        }

        // ÿ•ÿ∫ŸÑÿßŸÇ ÿßŸÑÿ•ÿ¥ÿπÿßÿ±
        function closeNotification(notificationId) {
            const notification = document.getElementById(notificationId);
            if (notification) {
                notification.style.transform = 'translateX(100%)';
                notification.style.opacity = '0';
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.parentNode.removeChild(notification);
                    }
                }, 300);
            }
        }

        // ÿ•ÿ¥ÿπÿßÿ± ŸÖÿ™ŸÇÿØŸÖ ŸÖÿπ ÿÆŸäÿßÿ±ÿßÿ™
        function showAdvancedNotification(title, message, type = 'info', actions = []) {
            const notification = document.createElement('div');
            const notificationId = 'advanced-notification-' + Date.now();

            const styles = {
                success: { bg: '#10b981', icon: 'fas fa-check-circle' },
                error: { bg: '#ef4444', icon: 'fas fa-exclamation-circle' },
                warning: { bg: '#f59e0b', icon: 'fas fa-exclamation-triangle' },
                info: { bg: '#3b82f6', icon: 'fas fa-info-circle' }
            };

            const style = styles[type] || styles.info;

            notification.id = notificationId;
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: rgba(26, 26, 46, 0.95);
                color: white;
                padding: 1.5rem;
                border-radius: 15px;
                box-shadow: 0 15px 35px rgba(0,0,0,0.4);
                z-index: 1001;
                transform: translateX(100%);
                transition: all 0.4s ease;
                max-width: 400px;
                min-width: 300px;
                border: 2px solid ${style.bg};
                backdrop-filter: blur(10px);
            `;

            let actionsHTML = '';
            if (actions.length > 0) {
                actionsHTML = `
                    <div style="margin-top: 1rem; display: flex; gap: 0.5rem; justify-content: flex-end;">
                        ${actions.map(action => `
                            <button onclick="${action.onClick}" style="
                                background: ${action.primary ? style.bg : 'transparent'};
                                color: ${action.primary ? 'white' : style.bg};
                                border: 1px solid ${style.bg};
                                padding: 0.5rem 1rem;
                                border-radius: 8px;
                                cursor: pointer;
                                font-size: 0.9rem;
                                transition: all 0.2s ease;
                            ">${action.text}</button>
                        `).join('')}
                    </div>
                `;
            }

            notification.innerHTML = `
                <div style="display: flex; align-items: flex-start; gap: 1rem;">
                    <i class="${style.icon}" style="color: ${style.bg}; font-size: 1.5rem; margin-top: 0.25rem;"></i>
                    <div style="flex: 1;">
                        <div style="font-weight: 700; font-size: 1.1rem; margin-bottom: 0.5rem;">${title}</div>
                        <div style="opacity: 0.9; line-height: 1.4;">${message}</div>
                        ${actionsHTML}
                    </div>
                    <i class="fas fa-times" onclick="closeNotification('${notificationId}')" style="
                        opacity: 0.7;
                        cursor: pointer;
                        padding: 0.25rem;
                        border-radius: 4px;
                        transition: all 0.2s ease;
                    " onmouseover="this.style.opacity='1'; this.style.background='rgba(255,255,255,0.1)'"
                       onmouseout="this.style.opacity='0.7'; this.style.background='transparent'"></i>
                </div>
            `;

            document.body.appendChild(notification);

            setTimeout(() => {
                notification.style.transform = 'translateX(0)';
            }, 100);

            // ÿ•ÿ∫ŸÑÿßŸÇ ÿ™ŸÑŸÇÿßÿ¶Ÿä ÿ®ÿπÿØ 8 ÿ´ŸàÿßŸÜŸç ŸÑŸÑÿ•ÿ¥ÿπÿßÿ±ÿßÿ™ ÿßŸÑŸÖÿ™ŸÇÿØŸÖÿ©
            setTimeout(() => {
                closeNotification(notificationId);
            }, 8000);

            return notificationId;
        }

        // ÿ™ÿ≠ÿ≥ŸäŸÜ ÿπÿ±ÿ∂ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ŸÖÿπ ÿ™ÿ£ÿ´Ÿäÿ±ÿßÿ™ ÿ®ÿµÿ±Ÿäÿ©
        function displayClubsWithAnimation(clubs) {
            const grid = document.getElementById('clubsGrid');
            grid.innerHTML = '';

            clubs.forEach((club, index) => {
                setTimeout(() => {
                    const clubCard = createClubCard(club);
                    clubCard.style.opacity = '0';
                    clubCard.style.transform = 'translateY(30px)';
                    grid.appendChild(clubCard);

                    setTimeout(() => {
                        clubCard.style.transition = 'all 0.5s ease';
                        clubCard.style.opacity = '1';
                        clubCard.style.transform = 'translateY(0)';
                    }, 50);
                }, index * 100);
            });
        }

        // ÿ™ÿ≠ÿØŸäÿ´ ÿØÿßŸÑÿ© ÿßŸÑÿπÿ±ÿ∂ ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©
        function displayClubs(clubs) {
            displayClubsWithAnimation(clubs);

            // ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑÿ™ŸÅÿßÿπŸÑÿßÿ™ ÿ®ÿπÿØ ÿßŸÑÿπÿ±ÿ∂
            setTimeout(() => {
                addCardInteractions();
                updateFavoriteIndicators();
            }, 1000);
        }

        // ÿ™ŸáŸäÿ¶ÿ© ÿßŸÑÿµŸÅÿ≠ÿ© ÿßŸÑŸÖÿ≠ÿ≥ŸÜÿ©
        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
        });

        // ÿ™ŸáŸäÿ¶ÿ© ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ
        async function initializeApp() {
            try {
                // ÿπÿ±ÿ∂ ÿ¥ÿßÿ¥ÿ© ÿßŸÑÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ£ŸàŸÑŸäÿ©
                showLoadingScreen();

                // ÿ™ŸáŸäÿ¶ÿ© ŸÜÿ∏ÿßŸÖ ÿ•ÿØÿßÿ±ÿ© ÿßŸÑÿ¥ÿπÿßÿ±ÿßÿ™ ÿßŸÑŸÖÿ≠ÿ≥ŸÜ
                await ClubLogoManager.initialize();

                // ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿßŸÅÿ™ÿ±ÿßÿ∂Ÿäÿ© ÿ®ÿßŸÑÿ¥ÿπÿßÿ±ÿßÿ™ ÿßŸÑŸÖÿ≠ÿ≥ŸÜÿ©
                defaultClubsData = getEnhancedDefaultData().slice(0, 3);

                // ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑÿ£ŸÜŸÖÿßÿ∑ ÿßŸÑÿØŸäŸÜÿßŸÖŸäŸÉŸäÿ©
                addDynamicStyles();

                // ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖÿ≠ŸÅŸàÿ∏ÿ© ÿ£Ÿà ÿßŸÑÿßŸÅÿ™ÿ±ÿßÿ∂Ÿäÿ©
                await loadInitialData();

                // ÿ™ŸáŸäÿ¶ÿ© ÿßŸÑŸÖÿ≥ÿ™ŸÖÿπŸäŸÜ ŸàÿßŸÑÿ£ÿ≠ÿØÿßÿ´
                setupEventListeners();

                // ÿ™ŸáŸäÿ¶ÿ© ŸÜÿ∏ÿßŸÖ ÿßŸÑÿ™ŸàÿßÿµŸÑ ÿ®ŸäŸÜ ÿßŸÑÿµŸÅÿ≠ÿßÿ™
                setupCommunication();

                // ÿ™ÿ≠ŸÖŸäŸÑ ÿ•ÿπÿØÿßÿØÿßÿ™ ÿßŸÑÿ¨ÿØŸàŸÑÿ© ÿßŸÑŸÖÿ≠ŸÅŸàÿ∏ÿ©
                const savedSchedule = localStorage.getItem('scheduleSettings');
                if (savedSchedule) {
                    scheduleSettings = { ...scheduleSettings, ...JSON.parse(savedSchedule) };
                    setupSmartSchedule();
                }

                // ÿ•ÿÆŸÅÿßÿ° ÿ¥ÿßÿ¥ÿ© ÿßŸÑÿ™ÿ≠ŸÖŸäŸÑ
                hideLoadingScreen();

                // ÿπÿ±ÿ∂ ÿ±ÿ≥ÿßŸÑÿ© ÿ™ÿ±ÿ≠Ÿäÿ®
                showWelcomeMessage();

            } catch (error) {
                console.error('ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ŸáŸäÿ¶ÿ© ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ:', error);
                showNotification('ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ŸáŸäÿ¶ÿ© ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ', 'error');
            }
        }

        // ÿπÿ±ÿ∂ ÿ¥ÿßÿ¥ÿ© ÿßŸÑÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ£ŸàŸÑŸäÿ©
        function showLoadingScreen() {
            const loadingOverlay = document.createElement('div');
            loadingOverlay.id = 'initialLoadingOverlay';
            loadingOverlay.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: linear-gradient(135deg, #0a0a0f 0%, #1a1a2e 50%, #16213e 100%);
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
                z-index: 9999;
                color: white;
            `;

            loadingOverlay.innerHTML = `
                <div style="text-align: center;">
                    <div style="width: 80px; height: 80px; border: 4px solid rgba(255, 215, 0, 0.1); border-top: 4px solid #ffd700; border-radius: 50%; animation: spin 1s linear infinite; margin: 0 auto 2rem;"></div>
                    <h2 style="font-size: 2rem; margin-bottom: 1rem; background: linear-gradient(45deg, #ffd700, #ffed4e); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">üí∞ Mercato Transfer Tool</h2>
                    <p style="font-size: 1.2rem; color: #94a3b8;">ÿ¨ÿßÿ±Ÿä ÿ™ÿ≠ŸÖŸäŸÑ ÿ£ÿ≠ÿØÿ´ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿßŸÜÿ™ŸÇÿßŸÑÿßÿ™...</p>
                </div>
            `;

            document.body.appendChild(loadingOverlay);
        }

        // ÿ•ÿÆŸÅÿßÿ° ÿ¥ÿßÿ¥ÿ© ÿßŸÑÿ™ÿ≠ŸÖŸäŸÑ
        function hideLoadingScreen() {
            const overlay = document.getElementById('initialLoadingOverlay');
            if (overlay) {
                overlay.style.opacity = '0';
                overlay.style.transition = 'opacity 0.5s ease';
                setTimeout(() => {
                    if (overlay.parentNode) {
                        overlay.parentNode.removeChild(overlay);
                    }
                }, 500);
            }
        }

        // ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿ£ŸàŸÑŸäÿ©
        async function loadInitialData() {
            try {
                // ŸÖÿ≠ÿßŸàŸÑÿ© ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖÿ≠ŸÅŸàÿ∏ÿ©
                const savedData = localStorage.getItem('transfermarktData');
                const lastUpdate = localStorage.getItem('transfermarktLastUpdate');

                if (savedData && lastUpdate) {
                    const data = JSON.parse(savedData);
                    const updateTime = new Date(lastUpdate);
                    const now = new Date();
                    const hoursSinceUpdate = (now - updateTime) / (1000 * 60 * 60);

                    if (hoursSinceUpdate < 24) { // ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿ≠ÿØŸäÿ´ÿ© (ÿ£ŸÇŸÑ ŸÖŸÜ 24 ÿ≥ÿßÿπÿ©)
                        currentData = data;
                        displayClubs(currentData);
                        updateLastUpdatedTime();
                        return;
                    }
                }

                // ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿßŸÅÿ™ÿ±ÿßÿ∂Ÿäÿ© ÿßŸÑŸÖÿ≠ÿ≥ŸÜÿ©
                currentData = getEnhancedDefaultData();
                displayClubs(currentData);

            } catch (error) {
                console.error('ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿ£ŸàŸÑŸäÿ©:', error);
                currentData = defaultClubsData;
                displayClubs(currentData);
            }
        }

        // ÿ™ŸáŸäÿ¶ÿ© ÿßŸÑŸÖÿ≥ÿ™ŸÖÿπŸäŸÜ ŸàÿßŸÑÿ£ÿ≠ÿØÿßÿ´
        function setupEventListeners() {
            // ÿßÿÆÿ™ÿµÿßÿ±ÿßÿ™ ŸÑŸàÿ≠ÿ© ÿßŸÑŸÖŸÅÿßÿ™Ÿäÿ≠ ÿßŸÑŸÖÿ≠ÿ≥ŸÜÿ©
            document.addEventListener('keydown', function(e) {
                // ÿ™ÿ¨ÿßŸáŸÑ ÿßŸÑÿßÿÆÿ™ÿµÿßÿ±ÿßÿ™ ÿ•ÿ∞ÿß ŸÉÿßŸÜ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ ŸäŸÉÿ™ÿ® ŸÅŸä ÿ≠ŸÇŸÑ ÿ•ÿØÿÆÿßŸÑ
                if (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA') {
                    return;
                }

                if (e.ctrlKey && e.key === 'r') {
                    e.preventDefault();
                    fetchLatestData();
                    showNotification('ÿ™ŸÖ ÿ™ÿ¥ÿ∫ŸäŸÑ ÿßŸÑÿ™ÿ≠ÿØŸäÿ´ ÿ®ÿßŸÑÿßÿÆÿ™ÿµÿßÿ± Ctrl+R', 'info', 2000);
                }
                if (e.ctrlKey && e.key === 'e') {
                    e.preventDefault();
                    exportData();
                }
                if (e.ctrlKey && e.key === 't') {
                    e.preventDefault();
                    toggleAutoUpdate();
                }
                if (e.ctrlKey && e.key === 'd') {
                    e.preventDefault();
                    openDisplayPage();
                }
                if (e.ctrlKey && e.key === 's') {
                    e.preventDefault();
                    showScheduleModal();
                    showNotification('ÿ™ŸÖ ŸÅÿ™ÿ≠ ŸÜÿßŸÅÿ∞ÿ© ÿßŸÑÿ¨ÿØŸàŸÑÿ© ÿ®ÿßŸÑÿßÿÆÿ™ÿµÿßÿ± Ctrl+S', 'info', 2000);
                }
                if (e.key === 'F1') {
                    e.preventDefault();
                    showHelpModal();
                }
                if (e.key === 'Escape') {
                    // ÿ•ÿ∫ŸÑÿßŸÇ ÿßŸÑŸÜŸàÿßŸÅÿ∞ ÿßŸÑŸÖŸÅÿ™Ÿàÿ≠ÿ©
                    const modal = document.getElementById('scheduleModal');
                    if (modal && modal.style.display !== 'none') {
                        closeScheduleModal();
                    }
                }
            });

            // ŸÖÿ≥ÿ™ŸÖÿπ ÿ™ÿ∫ŸäŸäÿ± ÿ≠ÿßŸÑÿ© ÿßŸÑÿ¥ÿ®ŸÉÿ©
            window.addEventListener('online', function() {
                showNotification('ÿ™ŸÖ ÿßÿ≥ÿ™ÿπÿßÿØÿ© ÿßŸÑÿßÿ™ÿµÿßŸÑ ÿ®ÿßŸÑÿ•ŸÜÿ™ÿ±ŸÜÿ™', 'success');
            });

            window.addEventListener('offline', function() {
                showNotification('ÿßŸÜŸÇÿ∑ÿπ ÿßŸÑÿßÿ™ÿµÿßŸÑ ÿ®ÿßŸÑÿ•ŸÜÿ™ÿ±ŸÜÿ™ - ÿ≥Ÿäÿ™ŸÖ ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖÿ≠ŸÅŸàÿ∏ÿ©', 'warning');
            });

            // ŸÖÿ≥ÿ™ŸÖÿπ ÿ™ÿ∫ŸäŸäÿ± ÿ≠ÿ¨ŸÖ ÿßŸÑŸÜÿßŸÅÿ∞ÿ©
            window.addEventListener('resize', function() {
                // ÿ•ÿπÿßÿØÿ© ÿ™ŸÜÿ≥ŸäŸÇ ÿßŸÑÿπÿ±ÿ∂ ÿπŸÜÿØ ÿ™ÿ∫ŸäŸäÿ± ÿ≠ÿ¨ŸÖ ÿßŸÑŸÜÿßŸÅÿ∞ÿ©
                setTimeout(() => {
                    const grid = document.getElementById('clubsGrid');
                    if (grid) {
                        grid.style.opacity = '0.8';
                        setTimeout(() => {
                            grid.style.opacity = '1';
                        }, 200);
                    }
                }, 100);
            });
        }

        // ÿ™ŸáŸäÿ¶ÿ© ŸÜÿ∏ÿßŸÖ ÿßŸÑÿ™ŸàÿßÿµŸÑ ÿ®ŸäŸÜ ÿßŸÑÿµŸÅÿ≠ÿßÿ™
        function setupCommunication() {
            // BroadcastChannel ŸÑŸÑÿ™ŸàÿßÿµŸÑ ÿßŸÑŸÖÿ®ÿßÿ¥ÿ±
            if ('BroadcastChannel' in window) {
                const channel = new BroadcastChannel('transfermarkt-updates');
                channel.addEventListener('message', function(event) {
                    if (event.data.type === 'data-update') {
                        currentData = event.data.data;
                        displayClubs(currentData);
                        showNotification('ÿ™ŸÖ ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ŸÖŸÜ ÿµŸÅÿ≠ÿ© ÿ£ÿÆÿ±Ÿâ', 'info');
                    }
                });
            }

            // ŸÖÿ≥ÿ™ŸÖÿπ localStorage ŸÑŸÑÿ™ŸàÿßŸÅŸÇ ŸÖÿπ ÿßŸÑŸÖÿ™ÿµŸÅÿ≠ÿßÿ™ ÿßŸÑŸÇÿØŸäŸÖÿ©
            window.addEventListener('storage', function(e) {
                if (e.key === 'transfermarkt-broadcast') {
                    try {
                        const data = JSON.parse(e.newValue);
                        if (data.type === 'data-update') {
                            currentData = data.data;
                            displayClubs(currentData);
                            showNotification('ÿ™ŸÖ ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ŸÖŸÜ ÿµŸÅÿ≠ÿ© ÿ£ÿÆÿ±Ÿâ', 'info');
                        }
                    } catch (error) {
                        console.log('ÿÆÿ∑ÿ£ ŸÅŸä ŸÖÿπÿßŸÑÿ¨ÿ© ÿ±ÿ≥ÿßŸÑÿ© ÿßŸÑÿ™ÿ≠ÿØŸäÿ´');
                    }
                }
            });
        }

        // ÿ±ÿ≥ÿßŸÑÿ© ÿßŸÑÿ™ÿ±ÿ≠Ÿäÿ®
        function showWelcomeMessage() {
            const isFirstVisit = !localStorage.getItem('transfermarkt-visited');
            const userPreferences = getUserPreferences();

            if (isFirstVisit) {
                localStorage.setItem('transfermarkt-visited', 'true');

                setTimeout(() => {
                    showAdvancedNotification(
                        'üéâ ŸÖÿ±ÿ≠ÿ®ÿßŸã ÿ®ŸÉ ŸÅŸä ÿ£ÿØÿßÿ© Mercato!',
                        'ÿ£ÿØÿßÿ© ŸÖÿ™ÿ∑Ÿàÿ±ÿ© ŸÑŸÖÿ™ÿßÿ®ÿπÿ© ÿ£ŸÉÿ´ÿ± ÿßŸÑÿ£ŸÜÿØŸäÿ© ÿµÿ±ŸÅÿßŸã ŸÅŸä ÿ≥ŸàŸÇ ÿßŸÑÿßŸÜÿ™ŸÇÿßŸÑÿßÿ™ 2025. ÿßÿ≥ÿ™ÿÆÿØŸÖ ÿßŸÑÿßÿÆÿ™ÿµÿßÿ±ÿßÿ™: Ctrl+R ŸÑŸÑÿ™ÿ≠ÿØŸäÿ´ÿå Ctrl+E ŸÑŸÑÿ™ÿµÿØŸäÿ±ÿå Ctrl+T ŸÑŸÑÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ™ŸÑŸÇÿßÿ¶Ÿä',
                        'info',
                        [
                            { text: 'ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ¢ŸÜ', onClick: 'fetchLatestData(); closeNotification(this.closest("[id^=advanced-notification]").id)', primary: true },
                            { text: 'ÿ≠ÿ≥ŸÜÿßŸã', onClick: 'closeNotification(this.closest("[id^=advanced-notification]").id)' }
                        ]
                    );
                }, 1000);
            } else {
                setTimeout(() => {
                    const lastVisit = userPreferences.lastVisit ? new Date(userPreferences.lastVisit) : new Date();
                    const hoursSinceLastVisit = (new Date() - lastVisit) / (1000 * 60 * 60);

                    if (hoursSinceLastVisit > 24) {
                        showNotification('ŸÖÿ±ÿ≠ÿ®ÿßŸã ÿ®ÿπŸàÿØÿ™ŸÉ! ÿ™ŸÖ ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ŸÖŸÜÿ∞ ÿ≤Ÿäÿßÿ±ÿ™ŸÉ ÿßŸÑÿ£ÿÆŸäÿ±ÿ©', 'info');
                    } else {
                        showNotification('ŸÖÿ±ÿ≠ÿ®ÿßŸã ÿ®ÿπŸàÿØÿ™ŸÉ! ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿ¨ÿßŸáÿ≤ÿ© ŸÑŸÑÿπÿ±ÿ∂', 'info');
                    }
                }, 500);
            }

            // ÿ™ÿ≠ÿØŸäÿ´ ŸàŸÇÿ™ ÿßŸÑÿ≤Ÿäÿßÿ±ÿ© ÿßŸÑÿ£ÿÆŸäÿ±ÿ©
            saveUserPreferences({ ...userPreferences, lastVisit: new Date().toISOString() });
        }

        // ÿßŸÑÿ≠ÿµŸàŸÑ ÿπŸÑŸâ ÿ™ŸÅÿ∂ŸäŸÑÿßÿ™ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ
        function getUserPreferences() {
            const saved = localStorage.getItem('userPreferences');
            return saved ? JSON.parse(saved) : {
                theme: 'dark',
                autoUpdate: false,
                notifications: true,
                lastVisit: null,
                favoriteClubs: []
            };
        }

        // ÿ≠ŸÅÿ∏ ÿ™ŸÅÿ∂ŸäŸÑÿßÿ™ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ
        function saveUserPreferences(preferences) {
            localStorage.setItem('userPreferences', JSON.stringify(preferences));
        }

        // ÿ•ÿ∂ÿßŸÅÿ© ŸÜÿßÿØŸä ŸÑŸÑŸÖŸÅÿ∂ŸÑÿ©
        function toggleFavoriteClub(clubName) {
            const preferences = getUserPreferences();
            const index = preferences.favoriteClubs.indexOf(clubName);

            if (index > -1) {
                preferences.favoriteClubs.splice(index, 1);
                showNotification(`ÿ™ŸÖ ÿ•ÿ≤ÿßŸÑÿ© ${clubName} ŸÖŸÜ ÿßŸÑŸÖŸÅÿ∂ŸÑÿ©`, 'info');
            } else {
                preferences.favoriteClubs.push(clubName);
                showNotification(`ÿ™ŸÖ ÿ•ÿ∂ÿßŸÅÿ© ${clubName} ŸÑŸÑŸÖŸÅÿ∂ŸÑÿ©`, 'success');
            }

            saveUserPreferences(preferences);
            updateFavoriteIndicators();
        }

        // ÿ™ÿ≠ÿØŸäÿ´ ŸÖÿ§ÿ¥ÿ±ÿßÿ™ ÿßŸÑŸÖŸÅÿ∂ŸÑÿ©
        function updateFavoriteIndicators() {
            const preferences = getUserPreferences();
            const cards = document.querySelectorAll('.club-card');

            cards.forEach(card => {
                const clubName = card.querySelector('.club-name').textContent;
                const isFavorite = preferences.favoriteClubs.includes(clubName);

                // ÿ•ÿ∂ÿßŸÅÿ© ÿ£Ÿà ÿ•ÿ≤ÿßŸÑÿ© ÿ£ŸäŸÇŸàŸÜÿ© ÿßŸÑŸÖŸÅÿ∂ŸÑÿ©
                let favoriteIcon = card.querySelector('.favorite-icon');
                if (isFavorite && !favoriteIcon) {
                    favoriteIcon = document.createElement('i');
                    favoriteIcon.className = 'fas fa-heart favorite-icon';
                    favoriteIcon.style.cssText = `
                        position: absolute;
                        top: 1rem;
                        left: 1rem;
                        color: #ef4444;
                        font-size: 1.5rem;
                        z-index: 3;
                        cursor: pointer;
                        transition: all 0.3s ease;
                    `;
                    favoriteIcon.onclick = (e) => {
                        e.stopPropagation();
                        toggleFavoriteClub(clubName);
                    };
                    card.appendChild(favoriteIcon);
                } else if (!isFavorite && favoriteIcon) {
                    favoriteIcon.remove();
                }
            });
        }

        // ÿπÿ±ÿ∂ ŸÜÿßŸÅÿ∞ÿ© ÿßŸÑŸÖÿ≥ÿßÿπÿØÿ©
        function showHelpModal() {
            showAdvancedNotification(
                'üîß ÿØŸÑŸäŸÑ ÿßŸÑÿßÿ≥ÿ™ÿÆÿØÿßŸÖ ÿßŸÑÿ≥ÿ±Ÿäÿπ',
                `
                <div style="text-align: right; line-height: 1.8;">
                    <strong>‚å®Ô∏è ÿßÿÆÿ™ÿµÿßÿ±ÿßÿ™ ŸÑŸàÿ≠ÿ© ÿßŸÑŸÖŸÅÿßÿ™Ÿäÿ≠:</strong><br>
                    ‚Ä¢ Ctrl + R: ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™<br>
                    ‚Ä¢ Ctrl + E: ÿ™ÿµÿØŸäÿ± ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™<br>
                    ‚Ä¢ Ctrl + T: ÿ™ŸÅÿπŸäŸÑ/ÿ•ŸÑÿ∫ÿßÿ° ÿßŸÑÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ™ŸÑŸÇÿßÿ¶Ÿä<br>
                    ‚Ä¢ Ctrl + D: ŸÅÿ™ÿ≠ ÿßŸÑÿπÿ±ÿ∂ ÿßŸÑÿßÿ≠ÿ™ÿ±ÿßŸÅŸä<br>
                    ‚Ä¢ Ctrl + S: ŸÅÿ™ÿ≠ ŸÜÿßŸÅÿ∞ÿ© ÿßŸÑÿ¨ÿØŸàŸÑÿ©<br>
                    ‚Ä¢ F1: ÿπÿ±ÿ∂ Ÿáÿ∞Ÿá ÿßŸÑŸÖÿ≥ÿßÿπÿØÿ©<br>
                    ‚Ä¢ Escape: ÿ•ÿ∫ŸÑÿßŸÇ ÿßŸÑŸÜŸàÿßŸÅÿ∞<br><br>

                    <strong>üéØ ÿßŸÑŸÖŸäÿ≤ÿßÿ™ ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©:</strong><br>
                    ‚Ä¢ ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ŸÖŸÜ Transfermarkt<br>
                    ‚Ä¢ ÿ¨ÿØŸàŸÑÿ© ÿßŸÑÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ∞ŸÉŸä<br>
                    ‚Ä¢ ÿ™ÿµÿØŸäÿ± ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ (JSON & CSV)<br>
                    ‚Ä¢ ÿßŸÑÿπÿ±ÿ∂ ÿßŸÑÿßÿ≠ÿ™ÿ±ÿßŸÅŸä ÿßŸÑŸÖÿ™ŸÇÿØŸÖ<br>
                    ‚Ä¢ ŸÜÿ∏ÿßŸÖ ÿßŸÑŸÖŸÅÿ∂ŸÑÿ© ŸÑŸÑÿ£ŸÜÿØŸäÿ©<br>
                    ‚Ä¢ ÿßŸÑÿ™ÿ≤ÿßŸÖŸÜ ÿ®ŸäŸÜ ÿßŸÑÿµŸÅÿ≠ÿßÿ™<br>
                    ‚Ä¢ ÿ•ÿØÿßÿ±ÿ© ÿ¥ÿπÿßÿ±ÿßÿ™ ÿßŸÑÿ£ŸÜÿØŸäÿ© (ŸÜŸÇÿ± ŸÖÿ≤ÿØŸàÿ¨ ÿπŸÑŸâ ÿßŸÑÿ¥ÿπÿßÿ±)<br>
                </div>
                `,
                'info',
                [
                    { text: 'ŸÅŸáŸÖÿ™', onClick: 'closeNotification(this.closest("[id^=advanced-notification]").id)', primary: true }
                ]
            );
        }

        // ÿπÿ±ÿ∂ ÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™ ÿßŸÑÿ¥ÿπÿßÿ±ÿßÿ™ ÿßŸÑŸÖÿ≠ÿ≥ŸÜÿ©
        function showLogoStats() {
            const stats = ClubLogoManager.getDetailedStats();
            const leagueStats = {};

            // ÿ≠ÿ≥ÿßÿ® ÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™ ÿßŸÑÿØŸàÿ±Ÿäÿßÿ™ ŸÖŸÜ ŸÉŸÑÿß ÿßŸÑŸÖÿµÿØÿ±ŸäŸÜ
            [...Object.values(ClubLogoManager.localLogoDatabase), ...Object.values(ClubLogoManager.externalLogoDatabase)].forEach(club => {
                if (club.league) {
                    leagueStats[club.league] = (leagueStats[club.league] || 0) + 1;
                }
            });

            const currentClubs = currentData.length;
            const matchedClubs = currentData.filter(club => ClubLogoManager.findClub(club.name)).length;

            let leagueStatsHtml = '';
            Object.entries(leagueStats).forEach(([league, count]) => {
                leagueStatsHtml += `<div style="display: flex; justify-content: space-between; margin: 0.5rem 0;"><span>${league}:</span><span>${count} ŸÜÿßÿØŸä</span></div>`;
            });

            // ÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™ ŸÖÿµÿßÿØÿ± ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™
            const sourceStats = currentData.map(club => {
                const logoData = ClubLogoManager.getClubLogo(club.name);
                return logoData.source;
            }).reduce((acc, source) => {
                acc[source] = (acc[source] || 0) + 1;
                return acc;
            }, {});

            let sourceStatsHtml = '';
            Object.entries(sourceStats).forEach(([source, count]) => {
                const sourceName = {
                    'club-logo-manager': 'ŸÖÿØŸäÿ± ÿßŸÑÿ¥ÿπÿßÿ±ÿßÿ™',
                    'local': 'ŸÇÿßÿπÿØÿ© ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖÿ≠ŸÑŸäÿ©',
                    'generated': 'ÿ¥ÿπÿßÿ±ÿßÿ™ ŸÖŸàŸÑÿØÿ©'
                }[source] || source;
                sourceStatsHtml += `<div style="display: flex; justify-content: space-between; margin: 0.5rem 0;"><span>${sourceName}:</span><span>${count} ŸÜÿßÿØŸä</span></div>`;
            });

            showAdvancedNotification(
                'üìä ÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™ ŸÜÿ∏ÿßŸÖ ÿßŸÑÿ¥ÿπÿßÿ±ÿßÿ™ ÿßŸÑŸÖÿ™ÿ∑Ÿàÿ±',
                `
                <div style="text-align: right; line-height: 1.6;">
                    <div style="background: rgba(16, 185, 129, 0.1); padding: 1rem; border-radius: 8px; margin-bottom: 1rem;">
                        <strong>üìà ÿßŸÑÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™ ÿßŸÑÿπÿßŸÖÿ©:</strong><br>
                        <div style="margin: 0.5rem 0;">ŸÇÿßÿπÿØÿ© ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖÿ≠ŸÑŸäÿ©: <strong>${stats.local}</strong> ŸÜÿßÿØŸä</div>
                        <div style="margin: 0.5rem 0;">ŸÖŸÜ club-logo-manager: <strong>${stats.external}</strong> ŸÜÿßÿØŸä</div>
                        <div style="margin: 0.5rem 0;">ÿ•ÿ¨ŸÖÿßŸÑŸä ŸÅÿ±ŸäÿØ: <strong>${stats.total}</strong> ŸÜÿßÿØŸä</div>
                        <div style="margin: 0.5rem 0;">ÿßŸÑÿ£ŸÜÿØŸäÿ© ÿßŸÑŸÖÿπÿ±Ÿàÿ∂ÿ©: <strong>${currentClubs}</strong></div>
                        <div style="margin: 0.5rem 0;">ŸÜÿ≥ÿ®ÿ© ÿßŸÑÿ™ÿ∫ÿ∑Ÿäÿ©: <strong>${stats.coverage}%</strong></div>
                    </div>

                    <div style="background: rgba(59, 130, 246, 0.1); padding: 1rem; border-radius: 8px; margin-bottom: 1rem;">
                        <strong>üéØ ŸÖÿµÿßÿØÿ± ÿßŸÑÿ¥ÿπÿßÿ±ÿßÿ™ ÿßŸÑÿ≠ÿßŸÑŸäÿ©:</strong><br>
                        ${sourceStatsHtml}
                    </div>

                    <div style="background: rgba(255, 193, 7, 0.1); padding: 1rem; border-radius: 8px; margin-bottom: 1rem;">
                        <strong>üèÜ ÿ™Ÿàÿ≤Ÿäÿπ ÿßŸÑÿØŸàÿ±Ÿäÿßÿ™:</strong><br>
                        ${leagueStatsHtml}
                    </div>

                    <div style="background: rgba(139, 92, 246, 0.1); padding: 1rem; border-radius: 8px;">
                        <strong>üí° ŸÜÿµÿßÿ¶ÿ≠:</strong><br>
                        ‚Ä¢ ÿßŸÑŸÜÿ∏ÿßŸÖ ŸäŸÇÿ±ÿ£ ÿ™ŸÑŸÇÿßÿ¶ŸäÿßŸã ŸÖŸÜ club-logo-manager<br>
                        ‚Ä¢ ÿßŸÜŸÇÿ± ŸÜŸÇÿ±ÿßŸã ŸÖÿ≤ÿØŸàÿ¨ÿßŸã ÿπŸÑŸâ ÿ£Ÿä ÿ¥ÿπÿßÿ± ŸÑÿ™ÿ≠ÿØŸäÿ´Ÿá<br>
                        ‚Ä¢ Ÿäÿ™ŸÖ ÿ≠ŸÅÿ∏ ÿßŸÑÿ¥ÿπÿßÿ±ÿßÿ™ ÿßŸÑŸÖÿÆÿµÿµÿ© ÿ™ŸÑŸÇÿßÿ¶ŸäÿßŸã<br>
                        ‚Ä¢ ÿßŸÑŸÖÿ≤ÿßŸÖŸÜÿ© ÿ™ÿ™ŸÖ ŸÉŸÑ 30 ÿ´ÿßŸÜŸäÿ©<br>
                    </div>
                </div>
                `,
                'info',
                [
                    { text: 'ÿ•ÿπÿßÿØÿ© ÿ™ÿ≠ŸÖŸäŸÑ ŸÖŸÜ club-logo-manager', onClick: 'reloadExternalLogos(); closeNotification(this.closest("[id^=advanced-notification]").id)', primary: true },
                    { text: 'ÿ•ÿ∂ÿßŸÅÿ© ŸÜÿßÿØŸä ÿ¨ÿØŸäÿØ', onClick: 'showAddClubModal(); closeNotification(this.closest("[id^=advanced-notification]").id)' },
                    { text: 'ÿ•ÿ∫ŸÑÿßŸÇ', onClick: 'closeNotification(this.closest("[id^=advanced-notification]").id)' }
                ]
            );
        }

        // ÿ•ÿπÿßÿØÿ© ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿÆÿßÿ±ÿ¨Ÿäÿ©
        async function reloadExternalLogos() {
            const success = await ClubLogoManager.loadExternalLogos();
            if (success) {
                showNotification('ÿ™ŸÖ ÿ•ÿπÿßÿØÿ© ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ŸÖŸÜ club-logo-manager ÿ®ŸÜÿ¨ÿßÿ≠!', 'success');
                // ÿ•ÿπÿßÿØÿ© ÿπÿ±ÿ∂ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿ≠ÿßŸÑŸäÿ©
                if (currentData && currentData.length > 0) {
                    displayClubs(currentData);
                }
            } else {
                showNotification('ŸÑŸÖ Ÿäÿ™ŸÖ ÿßŸÑÿπÿ´Ÿàÿ± ÿπŸÑŸâ ÿ®ŸäÿßŸÜÿßÿ™ ŸÅŸä club-logo-manager', 'warning');
            }
        }

        // ÿ™ÿ¥ÿÆŸäÿµ ŸÖÿ¥ÿßŸÉŸÑ ÿßŸÑÿ±ÿ®ÿ∑ (ŸÖÿ≠ÿ≥ŸÜ ŸàŸÖÿ∑Ÿàÿ±)
        function diagnoseLinkingIssues() {
            const diagnostics = [];

            // ŸÅÿ≠ÿµ ÿ¨ŸÖŸäÿπ ŸÖÿµÿßÿØÿ± ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™
            const dataSources = [
                { key: 'clubManagerData', name: 'ŸÖÿØŸäÿ± ÿßŸÑÿ¥ÿπÿßÿ±ÿßÿ™ ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿä' },
                { key: 'clubsData', name: 'ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿ£ŸÜÿØŸäÿ©' },
                { key: 'verifiedClubs', name: 'ÿßŸÑÿ£ŸÜÿØŸäÿ© ÿßŸÑŸÖÿ™ÿ≠ŸÇŸÇÿ©' }
            ];

            let foundAnyData = false;
            let totalClubs = 0;
            let totalLogos = 0;

            dataSources.forEach(source => {
                const data = localStorage.getItem(source.key);
                if (data) {
                    try {
                        const clubs = JSON.parse(data);
                        const clubsWithLogos = clubs.filter(club => {
                            const logoUrl = club.logo || club.logoUrl;
                            return logoUrl && logoUrl !== 'N/A' && logoUrl.startsWith('http');
                        });

                        diagnostics.push({
                            type: 'success',
                            message: `${source.name}: ${clubs.length} ŸÜÿßÿØŸä (${clubsWithLogos.length} ŸÑÿØŸäŸá ÿ¥ÿπÿßÿ±)`
                        });

                        totalClubs += clubs.length;
                        totalLogos += clubsWithLogos.length;
                        foundAnyData = true;
                    } catch (error) {
                        diagnostics.push({
                            type: 'error',
                            message: `ÿÆÿ∑ÿ£ ŸÅŸä ŸÇÿ±ÿßÿ°ÿ© ${source.name}`,
                            solution: 'ÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿµÿ≠ÿ© ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖÿ≠ŸÅŸàÿ∏ÿ©'
                        });
                    }
                } else {
                    diagnostics.push({
                        type: 'warning',
                        message: `${source.name}: ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ®ŸäÿßŸÜÿßÿ™`
                    });
                }
            });

            if (!foundAnyData) {
                diagnostics.push({
                    type: 'error',
                    message: 'ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ®ŸäÿßŸÜÿßÿ™ ŸÅŸä ÿ£Ÿä ŸÖŸÜ ÿßŸÑŸÖÿµÿßÿØÿ±',
                    solution: 'ÿßŸÅÿ™ÿ≠ club-logo-manager Ÿàÿ£ÿ∂ŸÅ ÿ®ÿπÿ∂ ÿßŸÑÿ£ŸÜÿØŸäÿ©'
                });
            } else {
                diagnostics.push({
                    type: 'info',
                    message: `ÿ•ÿ¨ŸÖÿßŸÑŸä: ${totalClubs} ŸÜÿßÿØŸäÿå ${totalLogos} ÿ¥ÿπÿßÿ± ŸÖÿ™ÿßÿ≠`
                });
            }

            // ŸÅÿ≠ÿµ ÿßŸÑÿ£ŸÜÿØŸäÿ© ÿßŸÑÿ≠ÿßŸÑŸäÿ©
            if (currentData && currentData.length > 0) {
                const matchResults = currentData.map(club => {
                    const found = ClubLogoManager.findClub(club.name);
                    return {
                        name: club.name,
                        found: !!found,
                        source: found ? ClubLogoManager.getClubLogo(club.name).source : 'none'
                    };
                });

                const matchedCount = matchResults.filter(r => r.found).length;
                diagnostics.push({
                    type: matchedCount > 0 ? 'success' : 'warning',
                    message: `ÿ™ŸÖ ÿ±ÿ®ÿ∑ ${matchedCount} ŸÖŸÜ ${currentData.length} ÿ£ŸÜÿØŸäÿ©`
                });

                // ÿ™ŸÅÿßÿµŸäŸÑ ÿßŸÑÿ£ŸÜÿØŸäÿ© ÿ∫Ÿäÿ± ÿßŸÑŸÖÿ±ÿ®Ÿàÿ∑ÿ©
                const unmatchedClubs = matchResults.filter(r => !r.found);
                if (unmatchedClubs.length > 0) {
                    diagnostics.push({
                        type: 'info',
                        message: `ÿßŸÑÿ£ŸÜÿØŸäÿ© ÿ∫Ÿäÿ± ÿßŸÑŸÖÿ±ÿ®Ÿàÿ∑ÿ©: ${unmatchedClubs.map(c => c.name).join(', ')}`
                    });
                }
            }

            // ÿπÿ±ÿ∂ ÿßŸÑÿ™ÿ¥ÿÆŸäÿµ
            let diagnosticsHtml = '';
            diagnostics.forEach(diag => {
                const icon = {
                    'success': '‚úÖ',
                    'warning': '‚ö†Ô∏è',
                    'error': '‚ùå',
                    'info': '‚ÑπÔ∏è'
                }[diag.type];

                const color = {
                    'success': '#10b981',
                    'warning': '#f59e0b',
                    'error': '#ef4444',
                    'info': '#3b82f6'
                }[diag.type];

                diagnosticsHtml += `
                    <div style="margin: 0.75rem 0; padding: 0.75rem; background: rgba(${color === '#10b981' ? '16, 185, 129' : color === '#f59e0b' ? '245, 158, 11' : color === '#ef4444' ? '239, 68, 68' : '59, 130, 246'}, 0.1); border-radius: 8px; border-left: 4px solid ${color};">
                        <div style="display: flex; align-items: flex-start; gap: 0.5rem;">
                            <span style="font-size: 1.2rem;">${icon}</span>
                            <div>
                                <div style="font-weight: 600; color: ${color};">${diag.message}</div>
                                ${diag.solution ? `<div style="font-size: 0.9rem; color: rgba(255, 255, 255, 0.8); margin-top: 0.25rem;">üí° ${diag.solution}</div>` : ''}
                            </div>
                        </div>
                    </div>
                `;
            });

            showAdvancedNotification(
                'üîç ÿ™ÿ¥ÿÆŸäÿµ ŸÖÿ¥ÿßŸÉŸÑ ÿßŸÑÿ±ÿ®ÿ∑',
                `
                <div style="text-align: right; line-height: 1.6;">
                    ${diagnosticsHtml}

                    <div style="margin-top: 1.5rem; padding: 1rem; background: rgba(59, 130, 246, 0.1); border-radius: 8px;">
                        <strong>üõ†Ô∏è ÿÆÿ∑Ÿàÿßÿ™ ÿßŸÑÿ•ÿµŸÑÿßÿ≠:</strong><br>
                        1. ÿ™ÿ£ŸÉÿØ ŸÖŸÜ ŸÅÿ™ÿ≠ club-logo-manager Ÿàÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑÿ£ŸÜÿØŸäÿ©<br>
                        2. ÿ™ÿ£ŸÉÿØ ŸÖŸÜ ÿ£ŸÜ ÿ£ÿ≥ŸÖÿßÿ° ÿßŸÑÿ£ŸÜÿØŸäÿ© ŸÖÿ™ÿ∑ÿßÿ®ŸÇÿ© ÿ£Ÿà ŸÖÿ™ÿ¥ÿßÿ®Ÿáÿ©<br>
                        3. ÿßÿ≥ÿ™ÿÆÿØŸÖ ÿ≤ÿ± "ÿ•ÿπÿßÿØÿ© ÿ™ÿ≠ŸÖŸäŸÑ ŸÖŸÜ club-logo-manager"<br>
                        4. ŸÅŸä ÿ≠ÿßŸÑÿ© ÿπÿØŸÖ ÿßŸÑÿ™ÿ∑ÿßÿ®ŸÇÿå ÿ£ÿ∂ŸÅ ÿßŸÑÿ£ÿ≥ŸÖÿßÿ° ÿßŸÑÿ®ÿØŸäŸÑÿ©<br>
                    </div>
                </div>
                `,
                'info',
                [
                    { text: 'ÿ•ÿπÿßÿØÿ© ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™', onClick: 'reloadExternalLogos(); closeNotification(this.closest("[id^=advanced-notification]").id)', primary: true },
                    { text: 'ŸÅÿ™ÿ≠ club-logo-manager', onClick: 'window.open("club-logo-manager.html", "_blank"); closeNotification(this.closest("[id^=advanced-notification]").id)' },
                    { text: 'ÿ•ÿ∫ŸÑÿßŸÇ', onClick: 'closeNotification(this.closest("[id^=advanced-notification]").id)' }
                ]
            );
        }

        // ÿπÿ±ÿ∂ ŸÜÿßŸÅÿ∞ÿ© ÿ•ÿ∂ÿßŸÅÿ© ŸÜÿßÿØŸä ÿ¨ÿØŸäÿØ
        function showAddClubModal() {
            showAdvancedNotification(
                '‚ûï ÿ•ÿ∂ÿßŸÅÿ© ŸÜÿßÿØŸä ÿ¨ÿØŸäÿØ',
                `
                <div style="text-align: right; margin: 1rem 0;">
                    <div style="margin-bottom: 1rem;">
                        <label style="display: block; margin-bottom: 0.5rem; font-weight: 600;">ÿßÿ≥ŸÖ ÿßŸÑŸÜÿßÿØŸä:</label>
                        <input type="text" id="newClubName" placeholder="ŸÖÿ´ÿßŸÑ: FC Barcelona" style="width: 100%; padding: 0.5rem; border: 1px solid #ccc; border-radius: 4px; background: rgba(26, 26, 46, 0.8); color: white;">
                    </div>
                    <div style="margin-bottom: 1rem;">
                        <label style="display: block; margin-bottom: 0.5rem; font-weight: 600;">ÿ±ÿßÿ®ÿ∑ ÿßŸÑÿ¥ÿπÿßÿ±:</label>
                        <input type="url" id="newClubLogo" placeholder="https://example.com/logo.png" style="width: 100%; padding: 0.5rem; border: 1px solid #ccc; border-radius: 4px; background: rgba(26, 26, 46, 0.8); color: white;">
                    </div>
                    <div style="margin-bottom: 1rem;">
                        <label style="display: block; margin-bottom: 0.5rem; font-weight: 600;">ÿßŸÑÿØŸàÿ±Ÿä:</label>
                        <select id="newClubLeague" style="width: 100%; padding: 0.5rem; border: 1px solid #ccc; border-radius: 4px; background: rgba(26, 26, 46, 0.8); color: white;">
                            <option value="Premier League">Premier League</option>
                            <option value="LaLiga">LaLiga</option>
                            <option value="Serie A">Serie A</option>
                            <option value="Bundesliga">Bundesliga</option>
                            <option value="Ligue 1">Ligue 1</option>
                            <option value="ÿ∫Ÿäÿ± ŸÖÿ≠ÿØÿØ">ÿ∫Ÿäÿ± ŸÖÿ≠ÿØÿØ</option>
                        </select>
                    </div>
                </div>
                `,
                'info',
                [
                    { text: 'ÿ•ÿ∂ÿßŸÅÿ©', onClick: 'addNewClub(); closeNotification(this.closest("[id^=advanced-notification]").id)', primary: true },
                    { text: 'ÿ•ŸÑÿ∫ÿßÿ°', onClick: 'closeNotification(this.closest("[id^=advanced-notification]").id)' }
                ]
            );
        }

        // ÿ•ÿ∂ÿßŸÅÿ© ŸÜÿßÿØŸä ÿ¨ÿØŸäÿØ
        function addNewClub() {
            const clubName = document.getElementById('newClubName').value;
            const clubLogo = document.getElementById('newClubLogo').value;
            const clubLeague = document.getElementById('newClubLeague').value;

            if (clubName && clubLogo) {
                ClubLogoManager.addClub(clubName, {
                    logo: clubLogo,
                    fallback: clubLogo,
                    league: clubLeague,
                    aliases: []
                });

                showNotification(`ÿ™ŸÖ ÿ•ÿ∂ÿßŸÅÿ© ${clubName} ÿ®ŸÜÿ¨ÿßÿ≠!`, 'success');
            } else {
                showNotification('Ÿäÿ±ÿ¨Ÿâ ŸÖŸÑÿ° ÿ¨ŸÖŸäÿπ ÿßŸÑÿ≠ŸÇŸàŸÑ ÿßŸÑŸÖÿ∑ŸÑŸàÿ®ÿ©', 'error');
            }
        }

        // ŸÖÿ≤ÿßŸÖŸÜÿ© ŸÖÿπ club-logo-manager (ŸÖÿ≠ÿ≥ŸÜ ŸàŸÖÿ∑Ÿàÿ±)
        function syncToClubLogoManager(clubName, logoUrl) {
            try {
                // ÿ™ÿ≠ÿØŸäÿØ ÿ£ŸÅÿ∂ŸÑ ŸÖŸÅÿ™ÿßÿ≠ ŸÑŸÑÿ≠ŸÅÿ∏ (ÿ£ŸàŸÑŸàŸäÿ© ŸÑŸÑŸÖŸÅÿ™ÿßÿ≠ ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿä)
                const primaryKey = 'clubManagerData';
                const fallbackKey = 'clubsData';

                let targetKey = primaryKey;
                let clubsData = JSON.parse(localStorage.getItem(primaryKey) || '[]');

                // ÿ•ÿ∞ÿß ŸÑŸÖ ÿ™Ÿàÿ¨ÿØ ÿ®ŸäÿßŸÜÿßÿ™ ŸÅŸä ÿßŸÑŸÖŸÅÿ™ÿßÿ≠ ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿå ÿßÿ≥ÿ™ÿÆÿØŸÖ ÿßŸÑŸÖŸÅÿ™ÿßÿ≠ ÿßŸÑÿßÿ≠ÿ™Ÿäÿßÿ∑Ÿä
                if (clubsData.length === 0) {
                    const fallbackData = localStorage.getItem(fallbackKey);
                    if (fallbackData) {
                        clubsData = JSON.parse(fallbackData);
                        targetKey = fallbackKey;
                    }
                }

                // ÿßŸÑÿ®ÿ≠ÿ´ ÿπŸÜ ÿßŸÑŸÜÿßÿØŸä ÿßŸÑŸÖŸàÿ¨ŸàÿØ
                const existingClubIndex = clubsData.findIndex(club =>
                    club.arabicName === clubName ||
                    club.englishName === clubName ||
                    ClubLogoManager.isMatch(club.arabicName, clubName) ||
                    ClubLogoManager.isMatch(club.englishName, clubName)
                );

                if (existingClubIndex !== -1) {
                    // ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑŸÜÿßÿØŸä ÿßŸÑŸÖŸàÿ¨ŸàÿØ
                    clubsData[existingClubIndex].logo = logoUrl;
                    clubsData[existingClubIndex].logoUrl = logoUrl; // ÿØÿπŸÖ ŸÉŸÑÿß ÿßŸÑÿ¥ŸÉŸÑŸäŸÜ
                    showNotification(`ÿ™ŸÖ ÿ™ÿ≠ÿØŸäÿ´ ÿ¥ÿπÿßÿ± ${clubName} ŸÅŸä ${targetKey}`, 'success');
                } else {
                    // ÿ•ÿ∂ÿßŸÅÿ© ŸÜÿßÿØŸä ÿ¨ÿØŸäÿØ
                    clubsData.push({
                        id: Date.now(),
                        arabicName: clubName,
                        englishName: clubName,
                        logo: logoUrl,
                        logoUrl: logoUrl, // ÿØÿπŸÖ ŸÉŸÑÿß ÿßŸÑÿ¥ŸÉŸÑŸäŸÜ
                        league: 'ÿ∫Ÿäÿ± ŸÖÿ≠ÿØÿØ',
                        country: 'ÿ∫Ÿäÿ± ŸÖÿ≠ÿØÿØ',
                        createdAt: new Date().toISOString(),
                        source: 'transfermarkt-sync'
                    });
                    showNotification(`ÿ™ŸÖ ÿ•ÿ∂ÿßŸÅÿ© ${clubName} ÿ•ŸÑŸâ ${targetKey}`, 'success');
                }

                // ÿ≠ŸÅÿ∏ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖÿ≠ÿØÿ´ÿ© ŸÅŸä ŸÉŸÑÿß ÿßŸÑŸÖŸÅÿ™ÿßÿ≠ŸäŸÜ ŸÑŸÑÿ™ŸàÿßŸÅŸÇ
                localStorage.setItem(targetKey, JSON.stringify(clubsData));
                localStorage.setItem(primaryKey, JSON.stringify(clubsData));
                localStorage.setItem(fallbackKey, JSON.stringify(clubsData));

                // ÿ•ÿπÿßÿØÿ© ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿÆÿßÿ±ÿ¨Ÿäÿ©
                ClubLogoManager.loadExternalLogos();

                console.log(`‚úÖ ÿ™ŸÖ ÿ≠ŸÅÿ∏ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ŸÅŸä ${targetKey} ŸÖÿπ ŸÜÿ≥ÿÆ ÿßÿ≠ÿ™Ÿäÿßÿ∑Ÿäÿ©`);

            } catch (error) {
                console.error('ÿÆÿ∑ÿ£ ŸÅŸä ÿßŸÑŸÖÿ≤ÿßŸÖŸÜÿ© ŸÖÿπ club-logo-manager:', error);
                showNotification('ŸÅÿ¥ŸÑ ŸÅŸä ÿßŸÑŸÖÿ≤ÿßŸÖŸÜÿ© ŸÖÿπ club-logo-manager', 'error');
            }
        }
    </script>
</body>
</html>
