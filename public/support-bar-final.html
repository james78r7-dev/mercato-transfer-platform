<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ø´Ø±ÙŠØ· Ø§Ù„Ø¯Ø§Ø¹Ù…ÙŠÙ† - Ø§Ù„Ø¥ØµØ¯Ø§Ø± Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Inter', 'Poppins', Arial, sans-serif;
      background: transparent;
      overflow: hidden;
      width: 380px;
      height: 100vh;
    }

    /* Ø§Ù„Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© */
    .support-bar {
      position: fixed;
      top: 0;
      right: 0;
      width: 380px;
      height: 100vh;
      background: linear-gradient(135deg,
        rgba(15, 15, 25, 0.95) 0%,
        rgba(25, 25, 45, 0.98) 50%,
        rgba(35, 35, 65, 0.95) 100%);
      backdrop-filter: blur(25px) saturate(180%);
      -webkit-backdrop-filter: blur(25px) saturate(180%);
      border-left: 1px solid rgba(255, 255, 255, 0.1);
      box-shadow:
        -15px 0 40px rgba(0, 0, 0, 0.4),
        inset 0 0 0 1px rgba(255, 255, 255, 0.08);
      display: flex;
      flex-direction: column;
      z-index: 9999;
      overflow: hidden;
      animation: slideInRight 1s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    }

    @keyframes slideInRight {
      from {
        transform: translateX(100%);
        opacity: 0;
      }
      to {
        transform: translateX(0);
        opacity: 1;
      }
    }

    /* Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¹Ù„ÙˆÙŠ */
    .support-bar-header {
      padding: 25px 30px;
      background: linear-gradient(135deg,
        rgba(255, 215, 0, 0.2) 0%,
        rgba(255, 193, 7, 0.15) 50%,
        rgba(255, 160, 0, 0.1) 100%);
      border-bottom: 2px solid rgba(255, 215, 0, 0.3);
      position: relative;
      overflow: hidden;
      backdrop-filter: blur(10px);
    }

    .support-bar-header::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg,
        transparent 0%,
        rgba(255, 215, 0, 0.2) 50%,
        transparent 100%);
      animation: shimmer 4s infinite;
    }

    @keyframes shimmer {
      0% { left: -100%; }
      100% { left: 100%; }
    }

    .header-content {
      display: flex;
      align-items: center;
      gap: 15px;
      position: relative;
      z-index: 2;
    }

    .youtube-logo {
      width: 35px;
      height: 35px;
      background: linear-gradient(135deg, #ff0000, #cc0000);
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 6px 20px rgba(255, 0, 0, 0.4);
      animation: youtubePulse 4s infinite;
      border: 2px solid rgba(255, 255, 255, 0.3);
    }

    @keyframes youtubePulse {
      0%, 100% {
        transform: scale(1);
        box-shadow: 0 6px 20px rgba(255, 0, 0, 0.4);
      }
      50% {
        transform: scale(1.05);
        box-shadow: 0 8px 25px rgba(255, 0, 0, 0.6);
      }
    }

    .youtube-logo i {
      font-size: 18px;
      color: white;
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
    }

    .header-icon {
      width: 50px;
      height: 50px;
      background: linear-gradient(135deg, #FFD700, #FFA000);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 8px 20px rgba(255, 215, 0, 0.4);
      animation: pulse 2s infinite;
    }

    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.05); }
    }

    .header-icon i {
      font-size: 24px;
      color: #000;
    }

    .header-text {
      flex: 1;
    }

    .header-title {
      font-size: 20px;
      font-weight: 700;
      color: #FFD700;
      margin-bottom: 4px;
      text-shadow: 0 2px 8px rgba(255, 215, 0, 0.3);
    }

    .header-subtitle {
      font-size: 13px;
      color: rgba(255, 255, 255, 0.8);
      font-weight: 400;
    }

    /* Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¯Ø§Ø¹Ù…ÙŠÙ† */
    .supporters-container {
      flex: 1;
      overflow-y: auto;
      padding: 20px 25px;
      scroll-behavior: smooth;
    }

    .supporters-container::-webkit-scrollbar {
      width: 6px;
    }

    .supporters-container::-webkit-scrollbar-track {
      background: rgba(255, 255, 255, 0.05);
      border-radius: 3px;
    }

    .supporters-container::-webkit-scrollbar-thumb {
      background: linear-gradient(135deg, #FFD700, #FFA000);
      border-radius: 3px;
    }

    .supporter-item {
      background: linear-gradient(135deg,
        rgba(255, 255, 255, 0.08) 0%,
        rgba(255, 255, 255, 0.05) 100%);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 16px;
      padding: 18px 20px;
      margin-bottom: 15px;
      backdrop-filter: blur(10px);
      transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
      position: relative;
      overflow: hidden;
      opacity: 0;
      transform: translateY(20px);
      animation: fadeInUp 0.6s ease forwards;
    }

    .supporter-item:nth-child(1) { animation-delay: 0.1s; }
    .supporter-item:nth-child(2) { animation-delay: 0.2s; }
    .supporter-item:nth-child(3) { animation-delay: 0.3s; }
    .supporter-item:nth-child(n+4) { animation-delay: 0.4s; }

    @keyframes fadeInUp {
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .supporter-item:hover {
      transform: translateY(-3px) scale(1.02);
      box-shadow: 0 12px 30px rgba(0, 0, 0, 0.3);
    }

    /* Ø£Ù„ÙˆØ§Ù† Ø§Ù„Ù…Ø±Ø§ÙƒØ² Ø§Ù„Ù…Ø­Ø³Ù†Ø© - Ø¨Ø¯ÙˆÙ† ØªØºØ·ÙŠØ© Ø¹Ù„Ù‰ Ø§Ù„Ù†Øµ */
    .supporter-item.rank-1 {
      background: linear-gradient(135deg,
        rgba(255, 215, 0, 0.12) 0%,
        rgba(255, 193, 7, 0.08) 50%,
        rgba(255, 160, 0, 0.06) 100%);
      border: 3px solid #FFD700;
      box-shadow:
        0 15px 45px rgba(255, 215, 0, 0.3),
        inset 0 1px 0 rgba(255, 255, 255, 0.3);
      position: relative;
      transform: scale(1.08);
    }

    .supporter-item.rank-1::before {
      content: '';
      position: absolute;
      top: -2px;
      left: -2px;
      right: -2px;
      bottom: -2px;
      background: linear-gradient(45deg, #FFD700, #FFA000, #FFD700);
      border-radius: 18px;
      z-index: -1;
      animation: goldGlow 3s infinite;
    }

    @keyframes goldGlow {
      0%, 100% { opacity: 0.7; }
      50% { opacity: 1; }
    }

    .supporter-item.rank-2 {
      background: linear-gradient(135deg,
        rgba(192, 192, 192, 0.12) 0%,
        rgba(169, 169, 169, 0.08) 50%,
        rgba(128, 128, 128, 0.06) 100%);
      border: 3px solid #C0C0C0;
      box-shadow:
        0 12px 35px rgba(192, 192, 192, 0.25),
        inset 0 1px 0 rgba(255, 255, 255, 0.25);
      transform: scale(1.05);
    }

    .supporter-item.rank-3 {
      background: linear-gradient(135deg,
        rgba(205, 127, 50, 0.12) 0%,
        rgba(184, 115, 51, 0.08) 50%,
        rgba(160, 82, 45, 0.06) 100%);
      border: 3px solid #CD7F32;
      box-shadow:
        0 10px 30px rgba(205, 127, 50, 0.25),
        inset 0 1px 0 rgba(255, 255, 255, 0.2);
      transform: scale(1.03);
    }

    .rank-badge {
      position: absolute;
      top: -10px;
      right: -10px;
      width: 36px;
      height: 36px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 15px;
      font-weight: bold;
      color: #000;
      box-shadow: 0 6px 15px rgba(0, 0, 0, 0.4);
      border: 2px solid rgba(255, 255, 255, 0.3);
      z-index: 10;
    }

    .rank-1 .rank-badge {
      background: linear-gradient(135deg, #FFD700, #FFA000);
      color: #000;
      animation: goldPulse 3s infinite;
      font-size: 22px;
      width: 50px;
      height: 50px;
      top: -15px;
      right: -15px;
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.4);
      border: 4px solid rgba(255, 255, 255, 0.5);
    }

    @keyframes goldPulse {
      0%, 100% {
        transform: scale(1);
        box-shadow: 0 10px 25px rgba(255, 215, 0, 0.5);
      }
      50% {
        transform: scale(1.15);
        box-shadow: 0 15px 35px rgba(255, 215, 0, 0.8);
      }
    }

    .rank-2 .rank-badge {
      background: linear-gradient(135deg, #C0C0C0, #A9A9A9);
      color: #000;
      animation: silverShine 4s infinite;
      font-size: 20px;
      width: 46px;
      height: 46px;
      top: -13px;
      right: -13px;
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.4);
      border: 3px solid rgba(255, 255, 255, 0.4);
    }

    @keyframes silverShine {
      0%, 100% { filter: brightness(1); }
      50% { filter: brightness(1.3); }
    }

    .rank-3 .rank-badge {
      background: linear-gradient(135deg, #CD7F32, #B87333);
      color: #fff;
      animation: bronzeGlow 5s infinite;
      font-size: 18px;
      width: 42px;
      height: 42px;
      top: -11px;
      right: -11px;
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.6);
      border: 3px solid rgba(255, 255, 255, 0.3);
    }

    @keyframes bronzeGlow {
      0%, 100% { filter: brightness(1); }
      50% { filter: brightness(1.2); }
    }

    .supporter-item:not(.rank-1):not(.rank-2):not(.rank-3) .rank-badge {
      background: linear-gradient(135deg, #667eea, #764ba2);
      color: #fff;
      width: 40px;
      height: 40px;
      font-size: 16px;
      font-weight: 800;
      top: -12px;
      right: -12px;
      border: 3px solid rgba(255, 255, 255, 0.3);
      text-shadow: 0 3px 6px rgba(0, 0, 0, 0.8);
      box-shadow: 0 6px 18px rgba(102, 126, 234, 0.4);
    }

    .supporter-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
    }

    .supporter-name {
      font-size: 17px;
      font-weight: 600;
      text-shadow: 0 3px 8px rgba(0, 0, 0, 0.8);
      letter-spacing: 0.3px;
    }

    .rank-1 .supporter-name {
      color: #FFFFFF;
      text-shadow:
        0 0 12px rgba(255, 215, 0, 0.9),
        0 3px 8px rgba(0, 0, 0, 0.9);
      font-weight: 700;
    }

    .rank-2 .supporter-name {
      color: #FFFFFF;
      text-shadow:
        0 0 10px rgba(192, 192, 192, 0.9),
        0 3px 8px rgba(0, 0, 0, 0.9);
      font-weight: 700;
    }

    .rank-3 .supporter-name {
      color: #FFFFFF;
      text-shadow:
        0 0 10px rgba(205, 127, 50, 0.9),
        0 3px 8px rgba(0, 0, 0, 0.9);
      font-weight: 700;
    }

    .supporter-item:not(.rank-1):not(.rank-2):not(.rank-3) .supporter-name {
      color: #FFFFFF;
      text-shadow: 0 3px 8px rgba(0, 0, 0, 0.8);
    }

    .supporter-amount {
      font-size: 15px;
      font-weight: bold;
      color: #00ff88;
      background: rgba(0, 255, 136, 0.15);
      padding: 6px 12px;
      border-radius: 20px;
      border: 1px solid rgba(0, 255, 136, 0.3);
    }

    .supporter-message {
      font-size: 13px;
      color: rgba(255, 255, 255, 0.85);
      line-height: 1.5;
      font-style: italic;
      margin-top: 8px;
    }

    /* Ø­Ø§Ù„Ø§Øª Ø§Ù„ØªØ­Ù…ÙŠÙ„ ÙˆØ§Ù„Ø®Ø·Ø£ */
    .loading, .error, .empty {
      text-align: center;
      padding: 60px 20px;
      color: rgba(255, 255, 255, 0.7);
    }

    .loading {
      color: #FFD700;
    }

    .error {
      color: #ff6b6b;
    }

    .loading-spinner {
      width: 40px;
      height: 40px;
      border: 3px solid rgba(255, 215, 0, 0.3);
      border-top: 3px solid #FFD700;
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin: 20px auto;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    /* Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø© */
    .settings-panel {
      position: fixed;
      top: 20px;
      left: 20px;
      width: 320px;
      max-height: calc(100vh - 40px);
      background: linear-gradient(135deg,
        rgba(15, 15, 25, 0.98) 0%,
        rgba(25, 25, 45, 0.99) 50%,
        rgba(35, 35, 65, 0.98) 100%);
      backdrop-filter: blur(25px) saturate(180%);
      -webkit-backdrop-filter: blur(25px) saturate(180%);
      border: 2px solid rgba(255, 215, 0, 0.3);
      border-radius: 20px;
      padding: 25px;
      z-index: 10000;
      overflow-y: auto;
      box-shadow:
        0 20px 60px rgba(0, 0, 0, 0.6),
        inset 0 1px 0 rgba(255, 255, 255, 0.1);
      transform: translateX(-100%);
      transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
      opacity: 0;
    }

    .settings-panel.show {
      transform: translateX(0);
      opacity: 1;
    }

    .settings-toggle {
      position: fixed;
      top: 20px;
      left: 20px;
      width: 50px;
      height: 50px;
      background: linear-gradient(135deg, rgba(255, 215, 0, 0.9), rgba(255, 160, 0, 0.8));
      border: 2px solid rgba(255, 215, 0, 0.6);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      z-index: 10001;
      transition: all 0.3s ease;
      backdrop-filter: blur(10px);
      box-shadow: 0 8px 25px rgba(255, 215, 0, 0.4);
    }

    .settings-toggle:hover {
      transform: scale(1.1);
      box-shadow: 0 12px 35px rgba(255, 215, 0, 0.6);
    }

    .settings-toggle i {
      font-size: 20px;
      color: #000;
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
    }

    .settings-header {
      text-align: center;
      margin-bottom: 25px;
      padding-bottom: 15px;
      border-bottom: 2px solid rgba(255, 215, 0, 0.3);
    }

    .settings-title {
      font-size: 20px;
      font-weight: 700;
      color: #FFD700;
      margin-bottom: 8px;
      text-shadow: 0 2px 8px rgba(255, 215, 0, 0.4);
    }

    .settings-subtitle {
      font-size: 13px;
      color: rgba(255, 255, 255, 0.8);
    }

    .setting-group {
      margin-bottom: 20px;
      padding: 15px;
      background: rgba(255, 255, 255, 0.05);
      border-radius: 12px;
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    .setting-label {
      display: block;
      font-size: 14px;
      font-weight: 600;
      color: #FFD700;
      margin-bottom: 8px;
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
    }

    .setting-input {
      width: 100%;
      padding: 12px 15px;
      border: 2px solid rgba(255, 215, 0, 0.3);
      border-radius: 10px;
      background: rgba(0, 0, 0, 0.4);
      color: white;
      font-size: 14px;
      font-weight: 500;
      transition: all 0.3s ease;
    }

    .setting-input:focus {
      border-color: #FFD700;
      outline: none;
      box-shadow: 0 0 15px rgba(255, 215, 0, 0.4);
      background: rgba(0, 0, 0, 0.6);
    }

    .setting-checkbox {
      display: flex;
      align-items: center;
      gap: 12px;
      cursor: pointer;
      padding: 10px;
      border-radius: 8px;
      transition: background 0.3s ease;
    }

    .setting-checkbox:hover {
      background: rgba(255, 215, 0, 0.1);
    }

    .setting-checkbox input[type="checkbox"] {
      width: 20px;
      height: 20px;
      accent-color: #FFD700;
      cursor: pointer;
    }

    .setting-checkbox label {
      font-size: 14px;
      color: white;
      cursor: pointer;
      font-weight: 500;
    }

    .setting-range {
      margin-top: 8px;
    }

    .range-input {
      width: 100%;
      height: 6px;
      border-radius: 3px;
      background: rgba(255, 255, 255, 0.2);
      outline: none;
      -webkit-appearance: none;
    }

    .range-input::-webkit-slider-thumb {
      -webkit-appearance: none;
      width: 20px;
      height: 20px;
      border-radius: 50%;
      background: linear-gradient(135deg, #FFD700, #FFA000);
      cursor: pointer;
      box-shadow: 0 4px 12px rgba(255, 215, 0, 0.4);
    }

    .range-value {
      display: inline-block;
      background: rgba(255, 215, 0, 0.2);
      color: #FFD700;
      padding: 4px 8px;
      border-radius: 6px;
      font-size: 12px;
      font-weight: bold;
      margin-top: 5px;
    }

    .settings-actions {
      display: flex;
      gap: 10px;
      margin-top: 25px;
      padding-top: 20px;
      border-top: 2px solid rgba(255, 215, 0, 0.3);
    }

    .btn {
      flex: 1;
      padding: 12px 16px;
      border: none;
      border-radius: 10px;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .btn-primary {
      background: linear-gradient(135deg, #FFD700, #FFA000);
      color: #000;
    }

    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(255, 215, 0, 0.4);
    }

    .btn-secondary {
      background: linear-gradient(135deg, #666, #444);
      color: white;
    }

    .btn-secondary:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.4);
    }

    /* Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª ÙÙŠ ÙˆØ¶Ø¹ Ø§Ù„Ø¥Ù†ØªØ§Ø¬ */
    .production-mode .settings-panel,
    .production-mode .settings-toggle {
      display: none !important;
    }

    /* Ø¥Ø®ÙØ§Ø¡ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø­Ø§Ù„Ø© ÙÙŠ ÙˆØ¶Ø¹ Ø§Ù„Ø¥Ù†ØªØ§Ø¬ */
    .production-mode .status-info {
      display: none !important;
    }

    /* Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø­Ø§Ù„Ø© - Ù…Ù†Ù‚ÙˆÙ„Ø© Ù„Ù„ÙŠØ³Ø§Ø± */
    .status-info {
      position: fixed;
      bottom: 15px;
      left: 15px;
      background: rgba(0, 0, 0, 0.9);
      padding: 10px 15px;
      border-radius: 10px;
      font-size: 12px;
      color: #00ff88;
      border: 2px solid rgba(0, 255, 136, 0.4);
      z-index: 1000;
      backdrop-filter: blur(15px);
      transition: opacity 0.3s ease;
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.6);
      max-width: 250px;
    }

    /* ØªØ­Ø³ÙŠÙ†Ø§Øª Ø§Ù„Ø£Ø¯Ø§Ø¡ ÙˆØ§Ù„Ø¬ÙˆØ¯Ø© */
    .support-bar {
      will-change: transform;
      contain: layout style paint;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      text-rendering: optimizeLegibility;
    }

    .supporters-container {
      contain: layout style paint;
      transform: translateZ(0); /* ØªÙØ¹ÙŠÙ„ ØªØ³Ø±ÙŠØ¹ Ø§Ù„Ø£Ø¬Ù‡Ø²Ø© */
      -webkit-overflow-scrolling: touch; /* ØªØ­Ø³ÙŠÙ† Ø§Ù„ØªÙ…Ø±ÙŠØ± Ø¹Ù„Ù‰ Ø§Ù„Ø£Ø¬Ù‡Ø²Ø© Ø§Ù„Ù…Ø­Ù…ÙˆÙ„Ø© */
    }

    .supporter-item {
      will-change: transform, opacity;
      contain: layout style paint;
    }

    /* ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø±Ø³ÙˆÙ… Ø§Ù„Ù…ØªØ­Ø±ÙƒØ© Ù„Ù„Ø£Ø¯Ø§Ø¡ */
    @media (prefers-reduced-motion: reduce) {
      * {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
      }
    }

    /* ØªØ­Ø³ÙŠÙ† Ù„Ù„Ø´Ø§Ø´Ø§Øª Ø¹Ø§Ù„ÙŠØ© Ø§Ù„Ø¯Ù‚Ø© */
    @media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
      .support-bar {
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
      }

      .supporter-name,
      .supporter-amount {
        text-rendering: optimizeLegibility;
      }
    }

    /* ØªØ­Ø³ÙŠÙ†Ø§Øª Ù„Ù„Ø£Ø¯Ø§Ø¡ ÙÙŠ OBS */
    @media screen and (max-width: 400px) {
      .support-bar {
        transform: translateZ(0);
        backface-visibility: hidden;
        perspective: 1000px;
      }

      .supporter-item {
        transform: translateZ(0);
        backface-visibility: hidden;
      }
    }

    /* ØªØ£Ø«ÙŠØ±Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© Ù„Ù„Ù…Ø±Ø§ÙƒØ² Ø§Ù„Ø£ÙˆÙ„Ù‰ */
    .rank-1::after {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 120%;
      height: 120%;
      background: radial-gradient(circle, rgba(255, 215, 0, 0.1) 0%, transparent 70%);
      transform: translate(-50%, -50%);
      z-index: -2;
      animation: goldAura 6s infinite;
    }

    @keyframes goldAura {
      0%, 100% {
        transform: translate(-50%, -50%) scale(1);
        opacity: 0.3;
      }
      50% {
        transform: translate(-50%, -50%) scale(1.1);
        opacity: 0.6;
      }
    }

    .rank-2::after {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 110%;
      height: 110%;
      background: radial-gradient(circle, rgba(192, 192, 192, 0.08) 0%, transparent 70%);
      transform: translate(-50%, -50%);
      z-index: -2;
      animation: silverAura 8s infinite;
    }

    @keyframes silverAura {
      0%, 100% {
        transform: translate(-50%, -50%) scale(1);
        opacity: 0.2;
      }
      50% {
        transform: translate(-50%, -50%) scale(1.05);
        opacity: 0.4;
      }
    }

    .rank-3::after {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 105%;
      height: 105%;
      background: radial-gradient(circle, rgba(205, 127, 50, 0.06) 0%, transparent 70%);
      transform: translate(-50%, -50%);
      z-index: -2;
      animation: bronzeAura 10s infinite;
    }

    @keyframes bronzeAura {
      0%, 100% {
        transform: translate(-50%, -50%) scale(1);
        opacity: 0.15;
      }
      50% {
        transform: translate(-50%, -50%) scale(1.03);
        opacity: 0.3;
      }
    }

    /* ØªØ£Ø«ÙŠØ±Ø§Øª Ø¹ØµØ±ÙŠØ© Ù…ØªÙ‚Ø¯Ù…Ø© */
    .support-bar::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background:
        radial-gradient(circle at 20% 80%, rgba(120, 119, 198, 0.1) 0%, transparent 50%),
        radial-gradient(circle at 80% 20%, rgba(255, 119, 198, 0.1) 0%, transparent 50%),
        radial-gradient(circle at 40% 40%, rgba(120, 219, 255, 0.1) 0%, transparent 50%);
      z-index: -1;
      animation: backgroundFlow 20s infinite;
    }

    @keyframes backgroundFlow {
      0%, 100% { opacity: 0.3; }
      33% { opacity: 0.5; }
      66% { opacity: 0.4; }
    }

    /* ØªØ£Ø«ÙŠØ± Ø§Ù„Ø¬Ø³ÙŠÙ…Ø§Øª Ø§Ù„Ù…ØªØ­Ø±ÙƒØ© */
    .support-bar::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-image:
        radial-gradient(2px 2px at 20px 30px, rgba(255, 215, 0, 0.3), transparent),
        radial-gradient(2px 2px at 40px 70px, rgba(255, 255, 255, 0.2), transparent),
        radial-gradient(1px 1px at 90px 40px, rgba(255, 215, 0, 0.4), transparent),
        radial-gradient(1px 1px at 130px 80px, rgba(255, 255, 255, 0.3), transparent);
      background-repeat: repeat;
      background-size: 150px 100px;
      z-index: -1;
      animation: particles 30s linear infinite;
    }

    @keyframes particles {
      0% { transform: translateY(0px); }
      100% { transform: translateY(-100px); }
    }

    /* ØªØ­Ø³ÙŠÙ†Ø§Øª Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¹Ù„ÙˆÙŠ */
    .support-bar-header {
      position: relative;
      overflow: hidden;
    }

    .support-bar-header::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(
        45deg,
        transparent 30%,
        rgba(255, 215, 0, 0.1) 50%,
        transparent 70%
      );
      animation: headerSweep 8s infinite;
    }

    @keyframes headerSweep {
      0% { transform: translateX(-100%); }
      50% { transform: translateX(100%); }
      100% { transform: translateX(-100%); }
    }

    /* ØªØ­Ø³ÙŠÙ† Ø´Ø¹Ø§Ø± YouTube */
    .youtube-logo {
      position: relative;
      overflow: hidden;
    }

    .youtube-logo::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: linear-gradient(
        45deg,
        transparent 30%,
        rgba(255, 255, 255, 0.3) 50%,
        transparent 70%
      );
      animation: logoShine 6s infinite;
    }

    @keyframes logoShine {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    /* ØªØ£Ø«ÙŠØ±Ø§Øª Ø§Ù„ØªÙ…Ø±ÙŠØ± Ø§Ù„Ù…Ø­Ø³Ù†Ø© */
    .supporters-container {
      position: relative;
    }

    .supporters-container::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 30px;
      background: linear-gradient(
        to bottom,
        rgba(35, 35, 65, 0.8) 0%,
        transparent 100%
      );
      z-index: 10;
      pointer-events: none;
    }

    .supporters-container::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      height: 30px;
      background: linear-gradient(
        to top,
        rgba(35, 35, 65, 0.8) 0%,
        transparent 100%
      );
      z-index: 10;
      pointer-events: none;
    }

    /* ØªØ­Ø³ÙŠÙ† ØªØ£Ø«ÙŠØ±Ø§Øª Ø§Ù„Ø¯Ø§Ø¹Ù…ÙŠÙ† */
    .supporter-item {
      position: relative;
      overflow: hidden;
    }

    .supporter-item::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(
        90deg,
        transparent 0%,
        rgba(255, 255, 255, 0.1) 50%,
        transparent 100%
      );
      transition: left 0.6s ease;
    }

    .supporter-item:hover::before {
      left: 100%;
    }

    /* ØªØ­Ø³ÙŠÙ†Ø§Øª Ø§Ù„Ø£Ø¯Ø§Ø¡ */
    .supporter-item {
      will-change: transform;
      contain: layout style paint;
    }

    .supporters-container {
      contain: layout style paint;
      transform: translateZ(0); /* ØªÙØ¹ÙŠÙ„ ØªØ³Ø±ÙŠØ¹ Ø§Ù„Ø£Ø¬Ù‡Ø²Ø© */
    }

    /* ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø±Ø³ÙˆÙ… Ø§Ù„Ù…ØªØ­Ø±ÙƒØ© */
    @media (prefers-reduced-motion: reduce) {
      * {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
      }
    }

    /* ØªØ­Ø³ÙŠÙ† Ù„Ù„Ø´Ø§Ø´Ø§Øª Ø¹Ø§Ù„ÙŠØ© Ø§Ù„Ø¯Ù‚Ø© */
    @media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
      .support-bar {
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
      }
    }
  </style>
</head>
<body>
  <!-- Ø²Ø± Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª -->
  <div class="settings-toggle" id="settingsToggle" onclick="toggleSettings()">
    <i class="fas fa-cog"></i>
  </div>

  <!-- Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª -->
  <div class="settings-panel" id="settingsPanel">
    <div class="settings-header">
      <div class="settings-title">âš™ï¸ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ØªÙ…Ø±ÙŠØ±</div>
      <div class="settings-subtitle">ØªØ­ÙƒÙ… ÙƒØ§Ù…Ù„ ÙÙŠ Ø³Ù„ÙˆÙƒ Ø§Ù„Ø´Ø±ÙŠØ·</div>
    </div>

    <div class="setting-group">
      <div class="setting-checkbox">
        <input type="checkbox" id="autoScroll" checked>
        <label for="autoScroll">ØªÙØ¹ÙŠÙ„ Ø§Ù„ØªÙ…Ø±ÙŠØ± Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ</label>
      </div>
    </div>

    <div class="setting-group">
      <label class="setting-label">â¸ï¸ Ø§Ù†ØªØ¸Ø§Ø± ÙÙŠ Ø§Ù„Ø£Ø¹Ù„Ù‰ (Ø«Ø§Ù†ÙŠØ©)</label>
      <input type="range" id="waitTop" class="range-input" min="5" max="60" value="15">
      <div class="range-value" id="waitTopValue">15 Ø«Ø§Ù†ÙŠØ©</div>
    </div>

    <div class="setting-group">
      <label class="setting-label">â¬‡ï¸ Ù…Ø¯Ø© Ø§Ù„Ù†Ø²ÙˆÙ„ (Ø«Ø§Ù†ÙŠØ©)</label>
      <input type="range" id="scrollDown" class="range-input" min="5" max="60" value="15">
      <div class="range-value" id="scrollDownValue">15 Ø«Ø§Ù†ÙŠØ©</div>
    </div>

    <div class="setting-group">
      <label class="setting-label">â¸ï¸ Ø§Ù†ØªØ¸Ø§Ø± ÙÙŠ Ø§Ù„Ø£Ø³ÙÙ„ (Ø«Ø§Ù†ÙŠØ©)</label>
      <input type="range" id="waitBottom" class="range-input" min="5" max="60" value="15">
      <div class="range-value" id="waitBottomValue">15 Ø«Ø§Ù†ÙŠØ©</div>
    </div>

    <div class="setting-group">
      <label class="setting-label">â¬†ï¸ Ù…Ø¯Ø© Ø§Ù„ØµØ¹ÙˆØ¯ (Ø«Ø§Ù†ÙŠØ©)</label>
      <input type="range" id="scrollUp" class="range-input" min="5" max="60" value="15">
      <div class="range-value" id="scrollUpValue">15 Ø«Ø§Ù†ÙŠØ©</div>
    </div>

    <div class="setting-group">
      <label class="setting-label">ğŸ¯ Ø³Ù„Ø§Ø³Ø© Ø§Ù„ØªÙ…Ø±ÙŠØ±</label>
      <input type="range" id="smoothness" class="range-input" min="1" max="10" value="5">
      <div class="range-value" id="smoothnessValue">Ù…ØªÙˆØ³Ø·</div>
    </div>

    <div class="setting-group">
      <label class="setting-label">ğŸ“ Ø£Ø­Ø¬Ø§Ù… Ø§Ù„Ù†ØµÙˆØµ</label>

      <div style="margin-bottom: 10px;">
        <label style="font-size: 12px; color: rgba(255, 215, 0, 0.8);">Ø¹Ù†ÙˆØ§Ù† "Ø§Ù„Ø¯Ø§Ø¹Ù…ÙŠÙ†":</label>
        <input type="range" id="headerTitleSize" class="range-input" min="16" max="32" value="22">
        <div class="range-value" id="headerTitleSizeValue">22px</div>
      </div>

      <div style="margin-bottom: 10px;">
        <label style="font-size: 12px; color: rgba(255, 215, 0, 0.8);">"Ø´ÙƒØ±Ø§Ù‹ Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¯Ø§Ø¹Ù…ÙŠÙ†":</label>
        <input type="range" id="headerSubtitleSize" class="range-input" min="10" max="20" value="14">
        <div class="range-value" id="headerSubtitleSizeValue">14px</div>
      </div>

      <div style="margin-bottom: 10px;">
        <label style="font-size: 12px; color: rgba(255, 215, 0, 0.8);">Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ø¯Ø§Ø¹Ù…ÙŠÙ†:</label>
        <input type="range" id="supporterNameSize" class="range-input" min="12" max="24" value="17">
        <div class="range-value" id="supporterNameSizeValue">17px</div>
      </div>

      <div style="margin-bottom: 10px;">
        <label style="font-size: 12px; color: rgba(255, 215, 0, 0.8);">Ù…Ø¨Ø§Ù„Øº Ø§Ù„Ø¯Ø¹Ù…:</label>
        <input type="range" id="supporterAmountSize" class="range-input" min="12" max="22" value="16">
        <div class="range-value" id="supporterAmountSizeValue">16px</div>
      </div>

      <div style="margin-bottom: 10px;">
        <label style="font-size: 12px; color: rgba(255, 215, 0, 0.8);">Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø´ÙƒØ±:</label>
        <input type="range" id="supporterMessageSize" class="range-input" min="10" max="18" value="14">
        <div class="range-value" id="supporterMessageSizeValue">14px</div>
      </div>
    </div>

    <div class="settings-actions">
      <button class="btn btn-secondary" onclick="resetSettings()">ğŸ”„ Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ†</button>
      <button class="btn btn-primary" onclick="generateOBSUrl()">ğŸ“‹ Ù†Ø³Ø® Ø±Ø§Ø¨Ø· OBS</button>
    </div>
  </div>

  <div class="support-bar">
    <!-- Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¹Ù„ÙˆÙŠ -->
    <div class="support-bar-header">
      <div class="header-content">
        <div class="header-icon">
          <i class="fas fa-heart"></i>
        </div>
        <div class="header-text">
          <div class="header-title" id="headerTitle">Ø§Ù„Ø¯Ø§Ø¹Ù…ÙŠÙ†</div>
          <div class="header-subtitle" id="headerSubtitle">Ø´ÙƒØ±Ø§Ù‹ Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¯Ø§Ø¹Ù…ÙŠÙ†</div>
        </div>
        <div class="youtube-logo">
          <i class="fab fa-youtube"></i>
        </div>
      </div>
    </div>

    <!-- Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¯Ø§Ø¹Ù…ÙŠÙ† -->
    <div class="supporters-container" id="supportersContainer">
      <div class="loading">
        <div>Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¯Ø§Ø¹Ù…ÙŠÙ†...</div>
        <div class="loading-spinner"></div>
      </div>
    </div>

    <!-- Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø­Ø§Ù„Ø© -->
    <div class="status-info" id="statusInfo">
      Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...
    </div>
  </div>

  <script>
    // Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§ÙØªØ±Ø§Ø¶ÙŠØ© Ù…Ø­Ø³Ù†Ø© Ù…Ø¹ ØªØ­ÙƒÙ… ÙÙŠ Ø§Ù„Ø£Ø­Ø¬Ø§Ù…
    let settings = {
      autoScroll: true,
      waitTop: 15,
      scrollDown: 15,
      waitBottom: 15,
      scrollUp: 15,
      smoothness: 5,
      headerTitleSize: 22,
      headerSubtitleSize: 14,
      supporterNameSize: 17,
      supporterAmountSize: 16,
      supporterMessageSize: 14
    };

    // Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„ØªÙ…Ø±ÙŠØ±
    let scrollTimer = null;
    let currentPhase = 'waitTop';
    let cycleCount = 0;
    let isScrolling = false;

    // Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯Ø§Ø¹Ù…ÙŠÙ†
    let supporters = [];

    // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ù…Ù† URL Ù…Ø¹ Ø¯Ø¹Ù… Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©
    function loadSettingsFromURL() {
      const params = new URLSearchParams(window.location.search);

      if (params.get('autoScroll') !== null) settings.autoScroll = params.get('autoScroll') === 'true';
      if (params.get('waitTop')) settings.waitTop = parseInt(params.get('waitTop'));
      if (params.get('scrollDown')) settings.scrollDown = parseInt(params.get('scrollDown'));
      if (params.get('waitBottom')) settings.waitBottom = parseInt(params.get('waitBottom'));
      if (params.get('scrollUp')) settings.scrollUp = parseInt(params.get('scrollUp'));
      if (params.get('smoothness')) settings.smoothness = parseInt(params.get('smoothness'));

      // ØªØ­Ù…ÙŠÙ„ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø£Ø­Ø¬Ø§Ù… Ø§Ù„Ù†ØµÙˆØµ Ù…Ù† URL
      if (params.get('headerTitleSize')) settings.headerTitleSize = parseInt(params.get('headerTitleSize'));
      if (params.get('headerSubtitleSize')) settings.headerSubtitleSize = parseInt(params.get('headerSubtitleSize'));
      if (params.get('supporterNameSize')) settings.supporterNameSize = parseInt(params.get('supporterNameSize'));
      if (params.get('supporterAmountSize')) settings.supporterAmountSize = parseInt(params.get('supporterAmountSize'));
      if (params.get('supporterMessageSize')) settings.supporterMessageSize = parseInt(params.get('supporterMessageSize'));

      // Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª ÙÙŠ ÙˆØ¶Ø¹ Ø§Ù„Ø¥Ù†ØªØ§Ø¬
      if (params.get('production') === 'true') {
        document.body.classList.add('production-mode');
      }

      console.log('Settings loaded from URL:', settings);
      updateSettingsUI();
    }

    // ØªØ­Ø¯ÙŠØ« ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
    function updateSettingsUI() {
      document.getElementById('autoScroll').checked = settings.autoScroll;
      document.getElementById('waitTop').value = settings.waitTop;
      document.getElementById('scrollDown').value = settings.scrollDown;
      document.getElementById('waitBottom').value = settings.waitBottom;
      document.getElementById('scrollUp').value = settings.scrollUp;
      document.getElementById('smoothness').value = settings.smoothness;

      // ØªØ­Ø¯ÙŠØ« Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø£Ø­Ø¬Ø§Ù… Ø§Ù„Ù†ØµÙˆØµ
      document.getElementById('headerTitleSize').value = settings.headerTitleSize;
      document.getElementById('headerSubtitleSize').value = settings.headerSubtitleSize;
      document.getElementById('supporterNameSize').value = settings.supporterNameSize;
      document.getElementById('supporterAmountSize').value = settings.supporterAmountSize;
      document.getElementById('supporterMessageSize').value = settings.supporterMessageSize;

      // ØªØ­Ø¯ÙŠØ« Ù‚ÙŠÙ… Ø§Ù„Ø¹Ø±Ø¶
      updateRangeValues();

      // ØªØ·Ø¨ÙŠÙ‚ Ø£Ø­Ø¬Ø§Ù… Ø§Ù„Ù†ØµÙˆØµ
      applyTextSizes();
    }

    // ØªØ­Ø¯ÙŠØ« Ù‚ÙŠÙ… Ø§Ù„Ù…Ù†Ø²Ù„Ù‚Ø§Øª
    function updateRangeValues() {
      document.getElementById('waitTopValue').textContent = `${settings.waitTop} Ø«Ø§Ù†ÙŠØ©`;
      document.getElementById('scrollDownValue').textContent = `${settings.scrollDown} Ø«Ø§Ù†ÙŠØ©`;
      document.getElementById('waitBottomValue').textContent = `${settings.waitBottom} Ø«Ø§Ù†ÙŠØ©`;
      document.getElementById('scrollUpValue').textContent = `${settings.scrollUp} Ø«Ø§Ù†ÙŠØ©`;

      const smoothnessLabels = ['Ø¨Ø·ÙŠØ¡ Ø¬Ø¯Ø§Ù‹', 'Ø¨Ø·ÙŠØ¡', 'Ø¨Ø·ÙŠØ¡ Ù‚Ù„ÙŠÙ„Ø§Ù‹', 'Ø¹Ø§Ø¯ÙŠ', 'Ù…ØªÙˆØ³Ø·', 'Ø³Ø±ÙŠØ¹ Ù‚Ù„ÙŠÙ„Ø§Ù‹', 'Ø³Ø±ÙŠØ¹', 'Ø³Ø±ÙŠØ¹ Ø¬Ø¯Ø§Ù‹', 'ÙØ§Ø¦Ù‚ Ø§Ù„Ø³Ø±Ø¹Ø©', 'Ø£Ù‚ØµÙ‰ Ø³Ø±Ø¹Ø©'];
      document.getElementById('smoothnessValue').textContent = smoothnessLabels[settings.smoothness - 1] || 'Ù…ØªÙˆØ³Ø·';

      // ØªØ­Ø¯ÙŠØ« Ù‚ÙŠÙ… Ø£Ø­Ø¬Ø§Ù… Ø§Ù„Ù†ØµÙˆØµ
      document.getElementById('headerTitleSizeValue').textContent = `${settings.headerTitleSize}px`;
      document.getElementById('headerSubtitleSizeValue').textContent = `${settings.headerSubtitleSize}px`;
      document.getElementById('supporterNameSizeValue').textContent = `${settings.supporterNameSize}px`;
      document.getElementById('supporterAmountSizeValue').textContent = `${settings.supporterAmountSize}px`;
      document.getElementById('supporterMessageSizeValue').textContent = `${settings.supporterMessageSize}px`;
    }

    // ØªØ·Ø¨ÙŠÙ‚ Ø£Ø­Ø¬Ø§Ù… Ø§Ù„Ù†ØµÙˆØµ
    function applyTextSizes() {
      // ØªØ·Ø¨ÙŠÙ‚ Ø£Ø­Ø¬Ø§Ù… Ø§Ù„Ø¹Ù†Ø§ÙˆÙŠÙ†
      const headerTitle = document.getElementById('headerTitle');
      const headerSubtitle = document.getElementById('headerSubtitle');

      if (headerTitle) {
        headerTitle.style.fontSize = `${settings.headerTitleSize}px`;
      }
      if (headerSubtitle) {
        headerSubtitle.style.fontSize = `${settings.headerSubtitleSize}px`;
      }

      // ØªØ·Ø¨ÙŠÙ‚ Ø£Ø­Ø¬Ø§Ù… Ù†ØµÙˆØµ Ø§Ù„Ø¯Ø§Ø¹Ù…ÙŠÙ†
      const supporterNames = document.querySelectorAll('.supporter-name');
      const supporterAmounts = document.querySelectorAll('.supporter-amount');
      const supporterMessages = document.querySelectorAll('.supporter-message');

      supporterNames.forEach(element => {
        element.style.fontSize = `${settings.supporterNameSize}px`;
      });

      supporterAmounts.forEach(element => {
        element.style.fontSize = `${settings.supporterAmountSize}px`;
      });

      supporterMessages.forEach(element => {
        element.style.fontSize = `${settings.supporterMessageSize}px`;
      });

      log(`ØªÙ… ØªØ·Ø¨ÙŠÙ‚ Ø£Ø­Ø¬Ø§Ù… Ø§Ù„Ù†ØµÙˆØµ: Ø§Ù„Ø¹Ù†ÙˆØ§Ù†=${settings.headerTitleSize}pxØŒ Ø§Ù„Ø£Ø³Ù…Ø§Ø¡=${settings.supporterNameSize}px`, 'success');
    }

    // ØªØ¨Ø¯ÙŠÙ„ Ø¹Ø±Ø¶ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
    function toggleSettings() {
      const panel = document.getElementById('settingsPanel');
      panel.classList.toggle('show');
    }

    // Ù†Ø¸Ø§Ù… Ø­ÙØ¸ Ù…ØªÙ‚Ø¯Ù… ÙŠØ¹Ù…Ù„ ÙÙŠ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ¦Ø§Øª
    function saveSettingsAuto() {
      // Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ù‚ÙŠÙ… Ù…Ù† Ø§Ù„Ù†Ù…ÙˆØ°Ø¬
      settings.autoScroll = document.getElementById('autoScroll').checked;
      settings.waitTop = parseInt(document.getElementById('waitTop').value);
      settings.scrollDown = parseInt(document.getElementById('scrollDown').value);
      settings.waitBottom = parseInt(document.getElementById('waitBottom').value);
      settings.scrollUp = parseInt(document.getElementById('scrollUp').value);
      settings.smoothness = parseInt(document.getElementById('smoothness').value);

      // Ù‚Ø±Ø§Ø¡Ø© Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø£Ø­Ø¬Ø§Ù… Ø§Ù„Ù†ØµÙˆØµ
      settings.headerTitleSize = parseInt(document.getElementById('headerTitleSize').value);
      settings.headerSubtitleSize = parseInt(document.getElementById('headerSubtitleSize').value);
      settings.supporterNameSize = parseInt(document.getElementById('supporterNameSize').value);
      settings.supporterAmountSize = parseInt(document.getElementById('supporterAmountSize').value);
      settings.supporterMessageSize = parseInt(document.getElementById('supporterMessageSize').value);

      // ØªØ­Ø¯ÙŠØ« Ù‚ÙŠÙ… Ø§Ù„Ø¹Ø±Ø¶
      updateRangeValues();

      // ØªØ·Ø¨ÙŠÙ‚ Ø£Ø­Ø¬Ø§Ù… Ø§Ù„Ù†ØµÙˆØµ
      applyTextSizes();

      // Ù†Ø¸Ø§Ù… Ø­ÙØ¸ Ù…ØªØ¹Ø¯Ø¯ Ø§Ù„Ù…Ø³ØªÙˆÙŠØ§Øª
      saveSettingsMultiLevel();

      // Ø¥Ø¹Ø§Ø¯Ø© ØªØ´ØºÙŠÙ„ Ø§Ù„ØªÙ…Ø±ÙŠØ± Ø¨Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©
      if (settings.autoScroll) {
        restartScrolling();
      } else {
        stopScrolling();
      }
    }

    // Ù†Ø¸Ø§Ù… Ø­ÙØ¸ Ù…ØªØ¹Ø¯Ø¯ Ø§Ù„Ù…Ø³ØªÙˆÙŠØ§Øª Ù…Ø­Ø³Ù†
    function saveSettingsMultiLevel() {
      const settingsData = JSON.stringify(settings);
      let saveSuccess = false;

      // Ø§Ù„Ù…Ø³ØªÙˆÙ‰ 1: localStorage (Ø§Ù„Ø£ÙØ¶Ù„)
      try {
        localStorage.setItem('supportBarSettings', settingsData);
        localStorage.setItem('supportBarSettingsBackup', settingsData);
        localStorage.setItem('supportBarSettingsTimestamp', Date.now().toString());
        saveSuccess = true;
        log('ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª ÙÙŠ localStorage', 'success');
      } catch (error) {
        log('ÙØ´Ù„ Ø­ÙØ¸ localStorage: ' + error.message, 'warning');
      }

      // Ø§Ù„Ù…Ø³ØªÙˆÙ‰ 2: sessionStorage (Ø§Ø­ØªÙŠØ§Ø·ÙŠ)
      try {
        sessionStorage.setItem('supportBarSettings', settingsData);
        sessionStorage.setItem('supportBarSettingsTimestamp', Date.now().toString());
        if (!saveSuccess) {
          saveSuccess = true;
          log('ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª ÙÙŠ sessionStorage', 'success');
        }
      } catch (error) {
        log('ÙØ´Ù„ Ø­ÙØ¸ sessionStorage: ' + error.message, 'warning');
      }

      // Ø§Ù„Ù…Ø³ØªÙˆÙ‰ 3: Ù…ØªØºÙŠØ± Ø¹Ø§Ù… (Ø§Ø­ØªÙŠØ§Ø·ÙŠ Ø«Ø§Ù†ÙŠ)
      try {
        window.supportBarSettingsGlobal = settings;
        window.supportBarSettingsGlobalTimestamp = Date.now();
        if (!saveSuccess) {
          saveSuccess = true;
          log('ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª ÙÙŠ Ù…ØªØºÙŠØ± Ø¹Ø§Ù…', 'success');
        }
      } catch (error) {
        log('ÙØ´Ù„ Ø­ÙØ¸ Ø§Ù„Ù…ØªØºÙŠØ± Ø§Ù„Ø¹Ø§Ù…: ' + error.message, 'warning');
      }

      // Ø§Ù„Ù…Ø³ØªÙˆÙ‰ 4: Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠ
      try {
        saveToGlobalStorage();
      } catch (error) {
        log('ÙØ´Ù„ Ø§Ù„Ø­ÙØ¸ Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠ: ' + error.message, 'warning');
      }

      // Ø§Ù„Ù…Ø³ØªÙˆÙ‰ 5: URL parameters (Ù„Ù„Ø§Ø³ØªÙ…Ø±Ø§Ø±ÙŠØ© ÙÙŠ OBS)
      try {
        updateURLWithSettings();
        if (!saveSuccess) {
          log('ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª ÙÙŠ URL', 'success');
        }
      } catch (error) {
        log('ÙØ´Ù„ ØªØ­Ø¯ÙŠØ« URL: ' + error.message, 'warning');
      }

      if (!saveSuccess) {
        log('ÙØ´Ù„ ÙÙŠ Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø¨Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø·Ø±Ù‚!', 'error');
      } else {
        log('ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø¨Ù†Ø¬Ø§Ø­ ÙÙŠ Ù…Ø³ØªÙˆÙŠØ§Øª Ù…ØªØ¹Ø¯Ø¯Ø©', 'success');
      }
    }

    // ØªØ­Ø¯ÙŠØ« URL Ø¨Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ÙƒØ§Ù…Ù„Ø©
    function updateURLWithSettings() {
      const params = new URLSearchParams(window.location.search);

      // Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ØªÙ…Ø±ÙŠØ±
      params.set('autoScroll', settings.autoScroll);
      params.set('waitTop', settings.waitTop);
      params.set('scrollDown', settings.scrollDown);
      params.set('waitBottom', settings.waitBottom);
      params.set('scrollUp', settings.scrollUp);
      params.set('smoothness', settings.smoothness);

      // Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø£Ø­Ø¬Ø§Ù… Ø§Ù„Ù†ØµÙˆØµ
      params.set('headerTitleSize', settings.headerTitleSize);
      params.set('headerSubtitleSize', settings.headerSubtitleSize);
      params.set('supporterNameSize', settings.supporterNameSize);
      params.set('supporterAmountSize', settings.supporterAmountSize);
      params.set('supporterMessageSize', settings.supporterMessageSize);

      const newURL = window.location.pathname + '?' + params.toString();

      try {
        window.history.replaceState({}, '', newURL);
        log('ØªÙ… ØªØ­Ø¯ÙŠØ« URL Ø¨Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª', 'success');
      } catch (error) {
        // ÙÙŠ Ø¨Ø¹Ø¶ Ø§Ù„Ø¨ÙŠØ¦Ø§Øª Ù‚Ø¯ Ù„Ø§ ÙŠØ¹Ù…Ù„ history API
        log('Ù„Ø§ ÙŠÙ…ÙƒÙ† ØªØ­Ø¯ÙŠØ« URL: ' + error.message, 'warning');
      }
    }

    // Ù†Ø¸Ø§Ù… Ø­ÙØ¸ Ø¹Ø§Ù„Ù…ÙŠ ÙŠØ¹Ù…Ù„ Ø¹Ø¨Ø± Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù†ÙˆØ§ÙØ° ÙˆØ§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª
    function saveToGlobalStorage() {
      try {
        // Ø­ÙØ¸ ÙÙŠ window.name (ÙŠØ¨Ù‚Ù‰ Ø¹Ø¨Ø± Ø§Ù„ØªÙ†Ù‚Ù„)
        window.name = JSON.stringify(settings);

        // Ø­ÙØ¸ ÙÙŠ document.title Ù…Ø¤Ù‚ØªØ§Ù‹ (Ù„Ù„Ø·ÙˆØ§Ø±Ø¦)
        const originalTitle = document.title;
        document.title = `SupportBar:${JSON.stringify(settings)}`;

        // Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø¨Ø¹Ø¯ Ø«Ø§Ù†ÙŠØ©
        setTimeout(() => {
          document.title = originalTitle;
        }, 1000);

        log('ØªÙ… Ø§Ù„Ø­ÙØ¸ ÙÙŠ Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠ', 'success');
      } catch (error) {
        log('ÙØ´Ù„ Ø§Ù„Ø­ÙØ¸ Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠ: ' + error.message, 'warning');
      }
    }

    // ØªØ­Ù…ÙŠÙ„ Ù…Ù† Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠ
    function loadFromGlobalStorage() {
      try {
        // Ù…Ø­Ø§ÙˆÙ„Ø© ØªØ­Ù…ÙŠÙ„ Ù…Ù† window.name
        if (window.name && window.name.startsWith('{')) {
          const savedSettings = JSON.parse(window.name);
          Object.assign(settings, savedSettings);
          log('ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ù…Ù† Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠ', 'success');
          return true;
        }
      } catch (error) {
        log('ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠ: ' + error.message, 'warning');
      }
      return false;
    }

    // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø© Ù…Ù† Ù…ØµØ§Ø¯Ø± Ù…ØªØ¹Ø¯Ø¯Ø© Ù…Ø¹ Ø£ÙˆÙ„ÙˆÙŠØ© Ø°ÙƒÙŠØ©
    function loadSavedSettings() {
      let loadSuccess = false;
      let bestSource = null;
      let bestTimestamp = 0;

      // ÙØ­Øµ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…ØµØ§Ø¯Ø± ÙˆØ¥ÙŠØ¬Ø§Ø¯ Ø§Ù„Ø£Ø­Ø¯Ø«
      const sources = [
        {
          name: 'localStorage',
          getData: () => localStorage.getItem('supportBarSettings'),
          getTimestamp: () => parseInt(localStorage.getItem('supportBarSettingsTimestamp') || '0')
        },
        {
          name: 'sessionStorage',
          getData: () => sessionStorage.getItem('supportBarSettings'),
          getTimestamp: () => parseInt(sessionStorage.getItem('supportBarSettingsTimestamp') || '0')
        },
        {
          name: 'globalVariable',
          getData: () => window.supportBarSettingsGlobal ? JSON.stringify(window.supportBarSettingsGlobal) : null,
          getTimestamp: () => window.supportBarSettingsGlobalTimestamp || 0
        },
        {
          name: 'globalStorage',
          getData: () => {
            try {
              return loadFromGlobalStorage() ? JSON.stringify(settings) : null;
            } catch {
              return null;
            }
          },
          getTimestamp: () => Date.now() - 1000 // Ø£ÙˆÙ„ÙˆÙŠØ© Ø£Ù‚Ù„
        }
      ];

      // Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø£Ø­Ø¯Ø« Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
      sources.forEach(source => {
        try {
          const data = source.getData();
          const timestamp = source.getTimestamp();

          if (data && timestamp > bestTimestamp) {
            bestSource = source;
            bestTimestamp = timestamp;
          }
        } catch (error) {
          log(`ÙØ´Ù„ ÙØ­Øµ ${source.name}: ${error.message}`, 'warning');
        }
      });

      // ØªØ­Ù…ÙŠÙ„ Ø£ÙØ¶Ù„ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ù…ØªØ§Ø­Ø©
      if (bestSource) {
        try {
          const data = bestSource.getData();
          if (data) {
            const savedSettings = JSON.parse(data);
            Object.assign(settings, savedSettings);
            loadSuccess = true;
            log(`ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ù…Ù† ${bestSource.name} (${new Date(bestTimestamp).toLocaleString()})`, 'success');
          }
        } catch (error) {
          log(`ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ Ù…Ù† ${bestSource.name}: ${error.message}`, 'error');
        }
      }

      // Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© ÙƒÙ…Ù„Ø§Ø° Ø£Ø®ÙŠØ±
      if (!loadSuccess) {
        try {
          const saved = localStorage.getItem('supportBarSettingsBackup');
          if (saved) {
            const savedSettings = JSON.parse(saved);
            Object.assign(settings, savedSettings);
            loadSuccess = true;
            log('ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ù…Ù† Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©', 'success');
          }
        } catch (error) {
          log('ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©: ' + error.message, 'warning');
        }
      }

      if (!loadSuccess) {
        log('Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ù…Ø­ÙÙˆØ¸Ø©ØŒ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©', 'info');
      }

      return loadSuccess;
    }

    // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
    function resetSettings() {
      settings = {
        autoScroll: true,
        waitTop: 15,
        scrollDown: 15,
        waitBottom: 15,
        scrollUp: 15,
        smoothness: 5,
        headerTitleSize: 22,
        headerSubtitleSize: 14,
        supporterNameSize: 17,
        supporterAmountSize: 16,
        supporterMessageSize: 14
      };

      updateSettingsUI();
      saveSettingsAuto();
      log('ØªÙ… Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª', 'success');
    }

    // Ø¥Ù†Ø´Ø§Ø¡ Ø±Ø§Ø¨Ø· OBS
    function generateOBSUrl() {
      const params = new URLSearchParams();
      params.set('autoScroll', settings.autoScroll);
      params.set('waitTop', settings.waitTop);
      params.set('scrollDown', settings.scrollDown);
      params.set('waitBottom', settings.waitBottom);
      params.set('scrollUp', settings.scrollUp);
      params.set('smoothness', settings.smoothness);

      // Ø¥Ø¶Ø§ÙØ© Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø£Ø­Ø¬Ø§Ù… Ø§Ù„Ù†ØµÙˆØµ
      params.set('headerTitleSize', settings.headerTitleSize);
      params.set('headerSubtitleSize', settings.headerSubtitleSize);
      params.set('supporterNameSize', settings.supporterNameSize);
      params.set('supporterAmountSize', settings.supporterAmountSize);
      params.set('supporterMessageSize', settings.supporterMessageSize);

      params.set('production', 'true');

      const url = `${window.location.origin}${window.location.pathname}?${params.toString()}`;

      navigator.clipboard.writeText(url).then(() => {
        alert('ØªÙ… Ù†Ø³Ø® Ø±Ø§Ø¨Ø· OBS Ù„Ù„Ø­Ø§ÙØ¸Ø©!\n\nØ§Ø³ØªØ®Ø¯Ù… Ù‡Ø°Ø§ Ø§Ù„Ø±Ø§Ø¨Ø· ÙÙŠ OBS Browser Source\n\nØ¬Ù…ÙŠØ¹ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ù…Ø­ÙÙˆØ¸Ø© ÙÙŠ Ø§Ù„Ø±Ø§Ø¨Ø·!');
        log('ØªÙ… Ù†Ø³Ø® Ø±Ø§Ø¨Ø· OBS Ù…Ø¹ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª', 'success');
      }).catch(() => {
        prompt('Ø§Ù†Ø³Ø® Ù‡Ø°Ø§ Ø§Ù„Ø±Ø§Ø¨Ø· Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…Ù‡ ÙÙŠ OBS:', url);
      });
    }

    // Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ´Ø®ÙŠØµ ÙˆØ§Ù„ØªØªØ¨Ø¹
    function log(message, type = 'info') {
      const timestamp = new Date().toLocaleTimeString('ar-SA');
      const prefix = `[${timestamp}]`;
      
      switch (type) {
        case 'error':
          console.error(`${prefix} âŒ ${message}`);
          break;
        case 'warning':
          console.warn(`${prefix} âš ï¸ ${message}`);
          break;
        case 'success':
          console.log(`${prefix} âœ… ${message}`);
          break;
        case 'phase':
          console.log(`${prefix} ğŸ”„ ${message}`);
          break;
        default:
          console.log(`${prefix} â„¹ï¸ ${message}`);
      }
    }

    // ØªØ­Ø¯ÙŠØ« Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø­Ø§Ù„Ø©
    function updateStatus(message, type = 'info') {
      const statusElement = document.getElementById('statusInfo');
      if (statusElement) {
        statusElement.textContent = message;
        
        switch (type) {
          case 'error':
            statusElement.style.color = '#ff6b6b';
            statusElement.style.borderColor = 'rgba(255, 107, 107, 0.3)';
            break;
          case 'warning':
            statusElement.style.color = '#ffaa00';
            statusElement.style.borderColor = 'rgba(255, 170, 0, 0.3)';
            break;
          case 'success':
            statusElement.style.color = '#00ff88';
            statusElement.style.borderColor = 'rgba(0, 255, 136, 0.3)';
            break;
          default:
            statusElement.style.color = '#00ff88';
            statusElement.style.borderColor = 'rgba(0, 255, 136, 0.3)';
        }
      }
      
      log(message, type);
    }

    // ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯Ø§Ø¹Ù…ÙŠÙ† Ù…Ø¹ Ø§Ù„ØªØ²Ø§Ù…Ù†
    async function loadSupporters(showLoading = true) {
      try {
        if (showLoading) {
          log('Ø¨Ø¯Ø¡ ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯Ø§Ø¹Ù…ÙŠÙ†');
          updateStatus('Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...');
        }

        // Ù…Ø­Ø§ÙˆÙ„Ø© ØªØ­Ù…ÙŠÙ„ Ù…Ù† Ø§Ù„Ø®Ø§Ø¯Ù…
        try {
          log('Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…...');
          const response = await fetch('/api/supporters?' + new Date().getTime()); // Ù…Ù†Ø¹ Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø¤Ù‚Øª
          if (response.ok) {
            const data = await response.json();
            const newSupporters = data.supporters || [];

            // ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ¬ÙˆØ¯ ØªØºÙŠÙŠØ±Ø§Øª
            const hasChanges = JSON.stringify(supporters) !== JSON.stringify(newSupporters);

            if (hasChanges || supporters.length === 0) {
              supporters = newSupporters;
              log(`ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª: ${supporters.length} Ø¯Ø§Ø¹Ù…`, 'success');
              renderSupporters();

              if (showLoading) {
                updateStatus(`ØªÙ… ØªØ­Ù…ÙŠÙ„ ${supporters.length} Ø¯Ø§Ø¹Ù…`, 'success');
              }
            } else {
              log('Ù„Ø§ ØªÙˆØ¬Ø¯ ØªØºÙŠÙŠØ±Ø§Øª ÙÙŠ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª');
            }
            return;
          } else {
            log(`ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…: ${response.status}`, 'warning');
          }
        } catch (error) {
          log(`Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…: ${error.message}`, 'warning');
        }

        // Ø¨ÙŠØ§Ù†Ø§Øª ØªØ¬Ø±ÙŠØ¨ÙŠØ©
        supporters = [
          { id: 1, name: "Saiftrips", amount: 136, thankMessage: "Ø´ÙƒØ±Ø§Ù‹ Ù„Ùƒ Ø¹Ù„Ù‰ Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„Ù…Ø³ØªÙ…Ø±" },
          { id: 2, name: "Naser", amount: 50, thankMessage: "Ø£ØªÙ…Ù†Ù‰ Ù„Ùƒ Ø§Ù„ØªÙˆÙÙŠÙ‚" },
          { id: 3, name: "Ahmed Washington", amount: 25, thankMessage: "" },
          { id: 4, name: "Ghost", amount: 15, thankMessage: "Ø§Ø³ØªÙ…Ø± ÙÙŠ Ø§Ù„Ø¹Ù…Ù„ Ø§Ù„Ø±Ø§Ø¦Ø¹" },
          { id: 5, name: "Om3ralwan", amount: 10, thankMessage: "" },
          { id: 6, name: "Syrian", amount: 8, thankMessage: "Ø¨Ø§Ù„ØªÙˆÙÙŠÙ‚" },
          { id: 7, name: "Messi Cruyff", amount: 6, thankMessage: "" },
          { id: 8, name: "layth lion", amount: 5, thankMessage: "Ø´ÙƒØ±Ø§Ù‹ Ù„Ùƒ" },
          { id: 9, name: "Florentino Perez", amount: 3, thankMessage: "" },
          { id: 10, name: "Mustafa Ahmed", amount: 2, thankMessage: "" }
        ];

        log(`ØªÙ… ØªØ­Ù…ÙŠÙ„ ${supporters.length} Ø¯Ø§Ø¹Ù… (Ø¨ÙŠØ§Ù†Ø§Øª ØªØ¬Ø±ÙŠØ¨ÙŠØ©)`, 'success');
        renderSupporters();
        updateStatus(`ØªÙ… ØªØ­Ù…ÙŠÙ„ ${supporters.length} Ø¯Ø§Ø¹Ù… (Ø¨ÙŠØ§Ù†Ø§Øª ØªØ¬Ø±ÙŠØ¨ÙŠØ©)`, 'success');

      } catch (error) {
        log(`Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª: ${error.message}`, 'error');
        document.getElementById('supportersContainer').innerHTML = '<div class="error">Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</div>';
        updateStatus('Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„', 'error');
      }
    }

    // Ø¹Ø±Ø¶ Ø§Ù„Ø¯Ø§Ø¹Ù…ÙŠÙ† Ù…Ø¹ Ø£Ù„ÙˆØ§Ù† Ø§Ù„Ù…Ø±Ø§ÙƒØ²
    function renderSupporters() {
      const container = document.getElementById('supportersContainer');

      // ØªØ±ØªÙŠØ¨ Ø§Ù„Ø¯Ø§Ø¹Ù…ÙŠÙ† Ø­Ø³Ø¨ Ø§Ù„Ù…Ø¨Ù„Øº
      const sortedSupporters = supporters
        .filter(s => s.amount > 0)
        .sort((a, b) => b.amount - a.amount);

      if (sortedSupporters.length === 0) {
        container.innerHTML = '<div class="empty">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ø¯Ø§Ø¹Ù…ÙŠÙ†</div>';
        return;
      }

      container.innerHTML = '';

      sortedSupporters.forEach((supporter, index) => {
        const rank = index + 1;
        const div = document.createElement('div');

        // ØªØ­Ø¯ÙŠØ¯ ÙØ¦Ø© Ø§Ù„Ù…Ø±ØªØ¨Ø©
        let rankClass = '';
        if (rank === 1) rankClass = 'rank-1';
        else if (rank === 2) rankClass = 'rank-2';
        else if (rank === 3) rankClass = 'rank-3';

        div.className = `supporter-item ${rankClass}`;

        // Ø¥Ø¶Ø§ÙØ© Ø´Ø¹Ø§Ø±Ø§Øª Ù…Ù…ÙŠØ²Ø© Ù„Ù„Ù…Ø±Ø§ÙƒØ²
        let rankContent = rank;
        if (rank === 1) rankContent = 'ğŸ‘‘'; // Ø´Ø¹Ø§Ø± Ø§Ù„Ù…Ù„Ùƒ
        else if (rank === 2) rankContent = 'ğŸ¥ˆ'; // Ø¨Ø·ÙˆÙ„Ø© ÙØ¶ÙŠØ©
        else if (rank === 3) rankContent = 'ğŸ¥‰'; // Ø¨Ø·ÙˆÙ„Ø© Ø¨Ø±ÙˆÙ†Ø²ÙŠØ©

        div.innerHTML = `
          <div class="rank-badge">${rankContent}</div>
          <div class="supporter-header">
            <div class="supporter-name" style="font-size: ${settings.supporterNameSize}px">${supporter.name}</div>
            <div class="supporter-amount" style="font-size: ${settings.supporterAmountSize}px">$${supporter.amount}</div>
          </div>
          ${supporter.thankMessage ? `<div class="supporter-message" style="font-size: ${settings.supporterMessageSize}px">${supporter.thankMessage}</div>` : ''}
        `;

        container.appendChild(div);
      });

      log(`ØªÙ… Ø¹Ø±Ø¶ ${sortedSupporters.length} Ø¯Ø§Ø¹Ù… Ø¨Ù†Ø¬Ø§Ø­`, 'success');
    }

    // Ù†Ø¸Ø§Ù… Ø§Ù„ØªÙ…Ø±ÙŠØ± Ø§Ù„Ø¨Ø³ÙŠØ· Ù…Ø¹ ØªØ´Ø®ÙŠØµ Ù…ÙØµÙ„
    function startScrolling() {
      if (!settings.autoScroll) {
        log('Ø§Ù„ØªÙ…Ø±ÙŠØ± Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ Ù…Ø¹Ø·Ù„', 'warning');
        return;
      }

      if (isScrolling) {
        log('Ø§Ù„ØªÙ…Ø±ÙŠØ± ÙŠØ¹Ù…Ù„ Ø¨Ø§Ù„ÙØ¹Ù„ØŒ ØªØ¬Ø§Ù‡Ù„ Ø·Ù„Ø¨ Ø§Ù„Ø¨Ø¯Ø¡', 'warning');
        return;
      }

      isScrolling = true;
      currentPhase = 'waitTop';
      cycleCount = 0;

      log('=== Ø¨Ø¯Ø¡ Ù†Ø¸Ø§Ù… Ø§Ù„ØªÙ…Ø±ÙŠØ± ===', 'phase');
      log(`Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª: Ø§Ù†ØªØ¸Ø§Ø± Ø£Ø¹Ù„Ù‰=${settings.waitTop}Ø«ØŒ Ù†Ø²ÙˆÙ„=${settings.scrollDown}Ø«ØŒ Ø§Ù†ØªØ¸Ø§Ø± Ø£Ø³ÙÙ„=${settings.waitBottom}Ø«ØŒ ØµØ¹ÙˆØ¯=${settings.scrollUp}Ø«`);

      executePhase();
    }

    function stopScrolling() {
      if (!isScrolling) {
        log('Ø§Ù„ØªÙ…Ø±ÙŠØ± Ù…ØªÙˆÙ‚Ù Ø¨Ø§Ù„ÙØ¹Ù„', 'warning');
        return;
      }

      isScrolling = false;
      if (scrollTimer) {
        clearTimeout(scrollTimer);
        scrollTimer = null;
        log('ØªÙ… Ø¥Ù„ØºØ§Ø¡ Ù…Ø¤Ù‚Øª Ø§Ù„ØªÙ…Ø±ÙŠØ±');
      }

      // Ø¥ÙŠÙ‚Ø§Ù Ø£ÙŠ ØªÙ…Ø±ÙŠØ± Ø¬Ø§Ø±ÙŠ
      const container = document.getElementById('supportersContainer');
      if (container && container._scrollAnimation) {
        cancelAnimationFrame(container._scrollAnimation);
        container._scrollAnimation = null;
        log('ØªÙ… Ø¥Ù„ØºØ§Ø¡ ØªÙ…Ø±ÙŠØ± Ø§Ù„Ø­Ø±ÙƒØ©');
      }

      updateStatus('ØªÙ… Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„ØªÙ…Ø±ÙŠØ±', 'warning');
      log('=== Ø¥ÙŠÙ‚Ø§Ù Ù†Ø¸Ø§Ù… Ø§Ù„ØªÙ…Ø±ÙŠØ± ===', 'phase');
    }

    function executePhase() {
      if (!isScrolling || !settings.autoScroll) {
        log('ØªÙ… Ø¥ÙŠÙ‚Ø§Ù ØªÙ†ÙÙŠØ° Ø§Ù„Ù…Ø±Ø­Ù„Ø©: Ø§Ù„ØªÙ…Ø±ÙŠØ± Ù…Ø¹Ø·Ù„', 'warning');
        return;
      }

      const container = document.getElementById('supportersContainer');
      if (!container) {
        log('Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ø¯Ø§Ø¹Ù…ÙŠÙ†', 'error');
        return;
      }

      const maxScroll = container.scrollHeight - container.clientHeight;
      if (maxScroll <= 0) {
        log('Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ø­ØªÙˆÙ‰ Ù‚Ø§Ø¨Ù„ Ù„Ù„ØªÙ…Ø±ÙŠØ±ØŒ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ø®Ù„Ø§Ù„ 5 Ø«ÙˆØ§Ù†', 'warning');
        setTimeout(executePhase, 5000);
        return;
      }

      log(`ØªÙ†ÙÙŠØ° Ø§Ù„Ù…Ø±Ø­Ù„Ø©: ${currentPhase} | Ø§Ù„Ø¯ÙˆØ±Ø©: ${cycleCount + 1} | Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù‚Ø§Ø¨Ù„ Ù„Ù„ØªÙ…Ø±ÙŠØ±: ${maxScroll}px`, 'phase');

      switch (currentPhase) {
        case 'waitTop':
          container.scrollTop = 0;
          log(`â¸ï¸ Ø¨Ø¯Ø¡ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± ÙÙŠ Ø§Ù„Ø£Ø¹Ù„Ù‰ Ù„Ù…Ø¯Ø© ${settings.waitTop} Ø«Ø§Ù†ÙŠØ©`);
          updateStatus(`â¸ï¸ Ø§Ù†ØªØ¸Ø§Ø± ÙÙŠ Ø§Ù„Ø£Ø¹Ù„Ù‰ (${settings.waitTop}Ø«) - Ø¯ÙˆØ±Ø© ${cycleCount + 1}`);

          scrollTimer = setTimeout(() => {
            if (isScrolling && settings.autoScroll) {
              currentPhase = 'scrollDown';
              executePhase();
            }
          }, settings.waitTop * 1000);
          break;

        case 'scrollDown':
          log(`â¬‡ï¸ Ø¨Ø¯Ø¡ Ø§Ù„ØªÙ…Ø±ÙŠØ± Ù„Ù„Ø£Ø³ÙÙ„ Ù„Ù…Ø¯Ø© ${settings.scrollDown} Ø«Ø§Ù†ÙŠØ©`);
          updateStatus(`â¬‡ï¸ Ø§Ù„ØªÙ…Ø±ÙŠØ± Ù„Ù„Ø£Ø³ÙÙ„ (${settings.scrollDown}Ø«) - Ø¯ÙˆØ±Ø© ${cycleCount + 1}`);
          smoothScroll(container, maxScroll, settings.scrollDown * 1000);

          scrollTimer = setTimeout(() => {
            if (isScrolling && settings.autoScroll) {
              currentPhase = 'waitBottom';
              executePhase();
            }
          }, settings.scrollDown * 1000);
          break;

        case 'waitBottom':
          container.scrollTop = maxScroll;
          log(`â¸ï¸ Ø¨Ø¯Ø¡ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± ÙÙŠ Ø§Ù„Ø£Ø³ÙÙ„ Ù„Ù…Ø¯Ø© ${settings.waitBottom} Ø«Ø§Ù†ÙŠØ©`);
          updateStatus(`â¸ï¸ Ø§Ù†ØªØ¸Ø§Ø± ÙÙŠ Ø§Ù„Ø£Ø³ÙÙ„ (${settings.waitBottom}Ø«) - Ø¯ÙˆØ±Ø© ${cycleCount + 1}`);

          scrollTimer = setTimeout(() => {
            if (isScrolling && settings.autoScroll) {
              currentPhase = 'scrollUp';
              executePhase();
            }
          }, settings.waitBottom * 1000);
          break;

        case 'scrollUp':
          log(`â¬†ï¸ Ø¨Ø¯Ø¡ Ø§Ù„ØªÙ…Ø±ÙŠØ± Ù„Ù„Ø£Ø¹Ù„Ù‰ Ù„Ù…Ø¯Ø© ${settings.scrollUp} Ø«Ø§Ù†ÙŠØ©`);
          updateStatus(`â¬†ï¸ Ø§Ù„ØªÙ…Ø±ÙŠØ± Ù„Ù„Ø£Ø¹Ù„Ù‰ (${settings.scrollUp}Ø«) - Ø¯ÙˆØ±Ø© ${cycleCount + 1}`);
          smoothScroll(container, 0, settings.scrollUp * 1000);

          scrollTimer = setTimeout(() => {
            if (isScrolling && settings.autoScroll) {
              cycleCount++;
              currentPhase = 'waitTop';
              log(`âœ… Ø§ÙƒØªÙ…Ù„Øª Ø§Ù„Ø¯ÙˆØ±Ø© ${cycleCount}ØŒ Ø¨Ø¯Ø¡ Ø¯ÙˆØ±Ø© Ø¬Ø¯ÙŠØ¯Ø©`, 'success');
              executePhase();
            }
          }, settings.scrollUp * 1000);
          break;
      }
    }

    // ØªÙ…Ø±ÙŠØ± Ø³Ù„Ø³ Ù…Ø­Ø³Ù† Ù…Ø¹ ØªØ­ÙƒÙ… ÙÙŠ Ø§Ù„Ø³Ù„Ø§Ø³Ø©
    function smoothScroll(element, targetPosition, duration) {
      const startPosition = element.scrollTop;
      const distance = targetPosition - startPosition;
      const startTime = performance.now();

      // Ø¥ÙŠÙ‚Ø§Ù Ø£ÙŠ ØªÙ…Ø±ÙŠØ± Ø³Ø§Ø¨Ù‚
      if (element._scrollAnimation) {
        cancelAnimationFrame(element._scrollAnimation);
      }

      // Ø­Ø³Ø§Ø¨ Ù…Ù†Ø­Ù†Ù‰ Ø§Ù„Ø³Ù„Ø§Ø³Ø© Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
      function getEasingFunction(smoothness) {
        const easingFunctions = [
          // 1: Ø¨Ø·ÙŠØ¡ Ø¬Ø¯Ø§Ù‹ - Linear
          (t) => t,
          // 2: Ø¨Ø·ÙŠØ¡ - Ease In
          (t) => t * t,
          // 3: Ø¨Ø·ÙŠØ¡ Ù‚Ù„ÙŠÙ„Ø§Ù‹ - Ease In Quad
          (t) => t * t * t,
          // 4: Ø¹Ø§Ø¯ÙŠ - Ease In Out
          (t) => t < 0.5 ? 2 * t * t : -1 + (4 - 2 * t) * t,
          // 5: Ù…ØªÙˆØ³Ø· - Ease Out Cubic
          (t) => (--t) * t * t + 1,
          // 6: Ø³Ø±ÙŠØ¹ Ù‚Ù„ÙŠÙ„Ø§Ù‹ - Ease In Out Cubic
          (t) => t < 0.5 ? 4 * t * t * t : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1,
          // 7: Ø³Ø±ÙŠØ¹ - Ease Out Quart
          (t) => 1 - (--t) * t * t * t,
          // 8: Ø³Ø±ÙŠØ¹ Ø¬Ø¯Ø§Ù‹ - Ease In Out Quart
          (t) => t < 0.5 ? 8 * t * t * t * t : 1 - 8 * (--t) * t * t * t,
          // 9: ÙØ§Ø¦Ù‚ Ø§Ù„Ø³Ø±Ø¹Ø© - Ease Out Quint
          (t) => 1 + (--t) * t * t * t * t,
          // 10: Ø£Ù‚ØµÙ‰ Ø³Ø±Ø¹Ø© - Ease In Out Back
          (t) => t < 0.5 ? 2 * t * t * ((1.7 + 1) * 2 * t - 1.7) : 2 * ((t -= 1) * t * ((1.7 + 1) * t + 1.7) + 1)
        ];

        return easingFunctions[Math.max(0, Math.min(9, smoothness - 1))] || easingFunctions[4];
      }

      const easingFunction = getEasingFunction(settings.smoothness);

      function animation(currentTime) {
        const timeElapsed = currentTime - startTime;
        const rawProgress = Math.min(timeElapsed / duration, 1);

        // ØªØ­Ù‚Ù‚ Ù…Ù† Ø£Ù† Ø§Ù„Ø¹Ù†ØµØ± Ù…Ø§ Ø²Ø§Ù„ Ù…ÙˆØ¬ÙˆØ¯Ø§Ù‹
        if (!element || !element.parentNode) {
          return;
        }

        // ØªØ·Ø¨ÙŠÙ‚ Ù…Ù†Ø­Ù†Ù‰ Ø§Ù„Ø³Ù„Ø§Ø³Ø©
        const easedProgress = easingFunction(rawProgress);
        element.scrollTop = startPosition + distance * easedProgress;

        if (rawProgress < 1 && isScrolling) {
          element._scrollAnimation = requestAnimationFrame(animation);
        } else {
          element._scrollAnimation = null;
          // ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù„Ù…ÙˆØ¶Ø¹ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ
          if (element && element.parentNode) {
            element.scrollTop = targetPosition;
          }
          log(`ØªÙ… Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡ Ù…Ù† Ø§Ù„ØªÙ…Ø±ÙŠØ± Ø¥Ù„Ù‰ Ø§Ù„Ù…ÙˆØ¶Ø¹ ${targetPosition}`, 'success');
        }
      }

      log(`Ø¨Ø¯Ø¡ Ø§Ù„ØªÙ…Ø±ÙŠØ± Ø§Ù„Ø³Ù„Ø³ Ù…Ù† ${startPosition} Ø¥Ù„Ù‰ ${targetPosition} Ø®Ù„Ø§Ù„ ${duration}ms Ø¨Ø³Ù„Ø§Ø³Ø© ${settings.smoothness}`);
      element._scrollAnimation = requestAnimationFrame(animation);
    }

    // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ Ø§Ù„Ø¹Ø§Ù…Ø©
    window.addEventListener('error', (event) => {
      log(`Ø®Ø·Ø£ JavaScript: ${event.error?.message || event.message}`, 'error');
      console.error('Error details:', event.error);
    });

    window.addEventListener('unhandledrejection', (event) => {
      log(`Ø®Ø·Ø£ Promise ØºÙŠØ± Ù…Ø¹Ø§Ù„Ø¬: ${event.reason}`, 'error');
      console.error('Promise rejection details:', event.reason);
    });

    // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø£Ø¯Ø§Ø© Ù…Ø¹ Ù…Ø¹Ø§Ù„Ø¬Ø© Ø£Ø®Ø·Ø§Ø¡ Ø´Ø§Ù…Ù„Ø©
    document.addEventListener('DOMContentLoaded', async () => {
      try {
        log('=== ØªÙ‡ÙŠØ¦Ø© Ø´Ø±ÙŠØ· Ø§Ù„Ø¯Ø§Ø¹Ù…ÙŠÙ† Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ ===', 'phase');

        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ù…Ù† URL
        loadSettingsFromURL();

        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
        await loadSupporters();

        // Ø¨Ø¯Ø¡ Ø§Ù„ØªÙ…Ø±ÙŠØ± Ø¥Ø°Ø§ ÙƒØ§Ù† Ù…ÙØ¹Ù„Ø§Ù‹
        if (settings.autoScroll) {
          setTimeout(() => {
            try {
              startScrolling();
            } catch (error) {
              log(`Ø®Ø·Ø£ ÙÙŠ Ø¨Ø¯Ø¡ Ø§Ù„ØªÙ…Ø±ÙŠØ±: ${error.message}`, 'error');
            }
          }, 3000); // Ø§Ù†ØªØ¸Ø§Ø± 3 Ø«ÙˆØ§Ù† Ù‚Ø¨Ù„ Ø§Ù„Ø¨Ø¯Ø¡
        }

        log('=== ØªÙ… ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø£Ø¯Ø§Ø© Ø¨Ù†Ø¬Ø§Ø­ ===', 'phase');

        // Ø¨Ø¯Ø¡ Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ Ù„Ù„Ø¨ÙŠØ§Ù†Ø§Øª
        startDataSync();

        // Ø¥Ø¹Ø¯Ø§Ø¯ Ù…Ø³ØªÙ…Ø¹ÙŠ Ø§Ù„Ø£Ø­Ø¯Ø§Ø« Ù„Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
        setupSettingsListeners();

      } catch (error) {
        log(`Ø®Ø·Ø£ ÙÙŠ ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø£Ø¯Ø§Ø©: ${error.message}`, 'error');
        updateStatus('Ø®Ø·Ø£ ÙÙŠ ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø£Ø¯Ø§Ø©', 'error');
      }
    });

    // Ø¥Ø¹Ø¯Ø§Ø¯ Ù…Ø³ØªÙ…Ø¹ÙŠ Ø§Ù„Ø£Ø­Ø¯Ø§Ø« Ù„Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
    function setupSettingsListeners() {
      // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø© Ø£ÙˆÙ„Ø§Ù‹
      loadSavedSettings();

      // Ù…Ø³ØªÙ…Ø¹ÙŠ Ø§Ù„Ø£Ø­Ø¯Ø§Ø« Ù„Ù„ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ - Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
      const settingsElements = [
        'autoScroll', 'waitTop', 'scrollDown', 'waitBottom', 'scrollUp', 'smoothness',
        'headerTitleSize', 'headerSubtitleSize', 'supporterNameSize', 'supporterAmountSize', 'supporterMessageSize'
      ];

      settingsElements.forEach(id => {
        const element = document.getElementById(id);
        if (element) {
          element.addEventListener('change', saveSettingsAuto);
          element.addEventListener('input', saveSettingsAuto);
        }
      });

      // Ø¥ØºÙ„Ø§Ù‚ Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø± Ø®Ø§Ø±Ø¬Ù‡Ø§
      document.addEventListener('click', (e) => {
        const panel = document.getElementById('settingsPanel');
        const toggle = document.getElementById('settingsToggle');

        if (!panel.contains(e.target) && !toggle.contains(e.target)) {
          panel.classList.remove('show');
        }
      });

      log('ØªÙ… Ø¥Ø¹Ø¯Ø§Ø¯ Ù†Ø¸Ø§Ù… Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…ØªÙ‚Ø¯Ù… Ù…Ø¹ ØªØ­ÙƒÙ… Ø§Ù„Ø£Ø­Ø¬Ø§Ù…', 'success');
    }

    // ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ù…ÙˆØ§Ø±Ø¯ Ø¹Ù†Ø¯ Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„ØµÙØ­Ø©
    window.addEventListener('beforeunload', () => {
      log('ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ù…ÙˆØ§Ø±Ø¯ Ù‚Ø¨Ù„ Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„ØµÙØ­Ø©');

      // Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„ØªÙ…Ø±ÙŠØ±
      stopScrolling();

      // Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ
      if (dataUpdateInterval) {
        clearInterval(dataUpdateInterval);
      }

      // Ø¥ÙŠÙ‚Ø§Ù Ø£ÙŠ Ø±Ø³ÙˆÙ… Ù…ØªØ­Ø±ÙƒØ©
      const container = document.getElementById('supportersContainer');
      if (container && container._scrollAnimation) {
        cancelAnimationFrame(container._scrollAnimation);
      }
    });

    // Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ²Ø§Ù…Ù† Ù…Ø¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø¹ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø°Ø§ÙƒØ±Ø©
    let dataUpdateInterval = null;

    function startDataSync() {
      // Ø¥ÙŠÙ‚Ø§Ù Ø£ÙŠ ØªØ­Ø¯ÙŠØ« Ø³Ø§Ø¨Ù‚
      if (dataUpdateInterval) {
        clearInterval(dataUpdateInterval);
      }

      // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙƒÙ„ 30 Ø«Ø§Ù†ÙŠØ©
      dataUpdateInterval = setInterval(async () => {
        try {
          // ØªØ­Ù‚Ù‚ Ù…Ù† Ø£Ù† Ø§Ù„ØµÙØ­Ø© Ù…Ø§ Ø²Ø§Ù„Øª Ù†Ø´Ø·Ø©
          if (document.hidden) {
            log('Ø§Ù„ØµÙØ­Ø© ØºÙŠØ± Ù†Ø´Ø·Ø©ØŒ ØªØ®Ø·ÙŠ Ø§Ù„ØªØ­Ø¯ÙŠØ«');
            return;
          }

          await loadSupporters(false); // ØªØ­Ø¯ÙŠØ« ØµØ§Ù…Øª Ø¨Ø¯ÙˆÙ† Ø±Ø³Ø§Ø¦Ù„ ØªØ­Ù…ÙŠÙ„
        } catch (error) {
          log(`Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ: ${error.message}`, 'error');
        }
      }, 30000);

      log('ØªÙ… ØªÙØ¹ÙŠÙ„ Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ (ÙƒÙ„ 30 Ø«Ø§Ù†ÙŠØ©)', 'success');
    }

    // Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„ØªØ­Ø¯ÙŠØ« Ø¹Ù†Ø¯ Ø¥Ø®ÙØ§Ø¡ Ø§Ù„ØµÙØ­Ø©
    document.addEventListener('visibilitychange', () => {
      if (document.hidden) {
        log('Ø§Ù„ØµÙØ­Ø© Ù…Ø®ÙÙŠØ©ØŒ Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª');
        if (dataUpdateInterval) {
          clearInterval(dataUpdateInterval);
          dataUpdateInterval = null;
        }
      } else {
        log('Ø§Ù„ØµÙØ­Ø© Ù†Ø´Ø·Ø©ØŒ Ø§Ø³ØªØ¦Ù†Ø§Ù Ø§Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª');
        startDataSync();
      }
    });

    // Ø¥Ø¶Ø§ÙØ© Ù…Ø³ØªÙ…Ø¹ Ù„Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª Ø§Ù„ÙÙˆØ±ÙŠØ© (WebSocket Ø£Ùˆ Server-Sent Events)
    function setupRealTimeUpdates() {
      // Ù…Ø­Ø§ÙˆÙ„Ø© Ø¥Ù†Ø´Ø§Ø¡ Ø§ØªØµØ§Ù„ WebSocket Ù„Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª Ø§Ù„ÙÙˆØ±ÙŠØ©
      try {
        const protocol = window.location.protocol === 'https:' ? 'wss:' : 'ws:';
        const wsUrl = `${protocol}//${window.location.host}/ws/supporters`;

        const ws = new WebSocket(wsUrl);

        ws.onopen = () => {
          log('ØªÙ… ØªÙØ¹ÙŠÙ„ Ø§Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª Ø§Ù„ÙÙˆØ±ÙŠØ©', 'success');
        };

        ws.onmessage = (event) => {
          try {
            const data = JSON.parse(event.data);
            if (data.type === 'supporters_update') {
              log('ØªÙ… Ø§Ø³ØªÙ„Ø§Ù… ØªØ­Ø¯ÙŠØ« ÙÙˆØ±ÙŠ Ù„Ù„Ø¯Ø§Ø¹Ù…ÙŠÙ†', 'success');
              supporters = data.supporters || [];
              renderSupporters();
            }
          } catch (error) {
            log(`Ø®Ø·Ø£ ÙÙŠ Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙÙˆØ±ÙŠ: ${error.message}`, 'error');
          }
        };

        ws.onerror = () => {
          log('ÙØ´Ù„ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ù„Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª Ø§Ù„ÙÙˆØ±ÙŠØ©ØŒ Ø³ÙŠØªÙ… Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¯ÙˆØ±ÙŠ', 'warning');
        };

        ws.onclose = () => {
          log('ØªÙ… Ù‚Ø·Ø¹ Ø§Ù„Ø§ØªØµØ§Ù„ Ù„Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª Ø§Ù„ÙÙˆØ±ÙŠØ©', 'warning');
          // Ù…Ø­Ø§ÙˆÙ„Ø© Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø¹Ø¯ 5 Ø«ÙˆØ§Ù†
          setTimeout(setupRealTimeUpdates, 5000);
        };

      } catch (error) {
        log(`Ø®Ø·Ø£ ÙÙŠ Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª Ø§Ù„ÙÙˆØ±ÙŠØ©: ${error.message}`, 'warning');
      }
    }

    // ØªØ­Ø³ÙŠÙ† Ø¹Ø±Ø¶ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø¹ Ø­ÙØ¸ Ù…ÙˆØ¶Ø¹ Ø§Ù„ØªÙ…Ø±ÙŠØ±
    function renderSupporters() {
      const container = document.getElementById('supportersContainer');

      // Ø­ÙØ¸ Ù…ÙˆØ¶Ø¹ Ø§Ù„ØªÙ…Ø±ÙŠØ± Ø§Ù„Ø­Ø§Ù„ÙŠ
      const currentScrollTop = container.scrollTop;
      const wasAtTop = currentScrollTop === 0;
      const wasAtBottom = currentScrollTop >= container.scrollHeight - container.clientHeight - 10;

      // ØªØ±ØªÙŠØ¨ Ø§Ù„Ø¯Ø§Ø¹Ù…ÙŠÙ† Ø­Ø³Ø¨ Ø§Ù„Ù…Ø¨Ù„Øº
      const sortedSupporters = supporters
        .filter(s => s.amount > 0)
        .sort((a, b) => b.amount - a.amount);

      if (sortedSupporters.length === 0) {
        container.innerHTML = '<div class="empty">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ø¯Ø§Ø¹Ù…ÙŠÙ†</div>';
        return;
      }

      container.innerHTML = '';

      sortedSupporters.forEach((supporter, index) => {
        const rank = index + 1;
        const div = document.createElement('div');

        // ØªØ­Ø¯ÙŠØ¯ ÙØ¦Ø© Ø§Ù„Ù…Ø±ØªØ¨Ø©
        let rankClass = '';
        if (rank === 1) rankClass = 'rank-1';
        else if (rank === 2) rankClass = 'rank-2';
        else if (rank === 3) rankClass = 'rank-3';

        div.className = `supporter-item ${rankClass}`;

        // Ø¥Ø¶Ø§ÙØ© Ø´Ø¹Ø§Ø±Ø§Øª Ù…Ù…ÙŠØ²Ø© Ù„Ù„Ù…Ø±Ø§ÙƒØ²
        let rankContent = rank;
        if (rank === 1) rankContent = 'ğŸ‘‘'; // Ø´Ø¹Ø§Ø± Ø§Ù„Ù…Ù„Ùƒ
        else if (rank === 2) rankContent = 'ğŸ¥ˆ'; // Ø¨Ø·ÙˆÙ„Ø© ÙØ¶ÙŠØ©
        else if (rank === 3) rankContent = 'ğŸ¥‰'; // Ø¨Ø·ÙˆÙ„Ø© Ø¨Ø±ÙˆÙ†Ø²ÙŠØ©

        div.innerHTML = `
          <div class="rank-badge">${rankContent}</div>
          <div class="supporter-header">
            <div class="supporter-name" style="font-size: ${settings.supporterNameSize}px">${supporter.name}</div>
            <div class="supporter-amount" style="font-size: ${settings.supporterAmountSize}px">$${supporter.amount}</div>
          </div>
          ${supporter.thankMessage ? `<div class="supporter-message" style="font-size: ${settings.supporterMessageSize}px">${supporter.thankMessage}</div>` : ''}
        `;

        container.appendChild(div);
      });

      // Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ù…ÙˆØ¶Ø¹ Ø§Ù„ØªÙ…Ø±ÙŠØ± Ø¨Ø°ÙƒØ§Ø¡
      setTimeout(() => {
        if (wasAtTop) {
          container.scrollTop = 0;
        } else if (wasAtBottom) {
          container.scrollTop = container.scrollHeight - container.clientHeight;
        } else if (!isScrolling) {
          // Ø¥Ø°Ø§ Ù„Ù… ÙŠÙƒÙ† Ø§Ù„ØªÙ…Ø±ÙŠØ± Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ ÙŠØ¹Ù…Ù„ØŒ Ø§Ø­ØªÙØ¸ Ø¨Ø§Ù„Ù…ÙˆØ¶Ø¹
          container.scrollTop = currentScrollTop;
        }
        // Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„ØªÙ…Ø±ÙŠØ± Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ ÙŠØ¹Ù…Ù„ØŒ Ø¯Ø¹ Ø§Ù„Ù†Ø¸Ø§Ù… ÙŠØªØ­ÙƒÙ… ÙÙŠ Ø§Ù„Ù…ÙˆØ¶Ø¹
      }, 50);

      log(`ØªÙ… Ø¹Ø±Ø¶ ${sortedSupporters.length} Ø¯Ø§Ø¹Ù… Ø¨Ù†Ø¬Ø§Ø­`, 'success');
    }
  </script>
</body>
</html>
