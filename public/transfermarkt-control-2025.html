<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ® Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ù…ØªØ·ÙˆØ±Ø© - Transfermarkt 2025</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;900&family=Orbitron:wght@400;700;900&family=Tajawal:wght@400;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <style>
        :root {
            --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --accent-gradient: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            --success-gradient: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            --warning-gradient: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
            --glass-bg: rgba(255, 255, 255, 0.05);
            --glass-border: rgba(255, 255, 255, 0.1);
            --text-primary: #ffffff;
            --text-secondary: #e2e8f0;
            --shadow-primary: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            --shadow-glow: 0 0 50px rgba(102, 126, 234, 0.3);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', 'Tajawal', system-ui, sans-serif;
            background: #0a0a0f;
            color: var(--text-primary);
            min-height: 100vh;
            position: relative;
        }

        /* Ø®Ù„ÙÙŠØ© Ù…ØªØ·ÙˆØ±Ø© */
        .background-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            background: 
                radial-gradient(circle at 20% 30%, rgba(102, 126, 234, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(240, 147, 251, 0.08) 0%, transparent 50%),
                linear-gradient(135deg, #0a0a0f 0%, #1a1a2e 50%, #0a0a0f 100%);
            animation: backgroundShift 30s ease-in-out infinite;
        }

        @keyframes backgroundShift {
            0%, 100% { filter: hue-rotate(0deg); }
            50% { filter: hue-rotate(20deg); }
        }

        /* Ø­Ø§ÙˆÙŠ Ø±Ø¦ÙŠØ³ÙŠ */
        .main-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
            position: relative;
            z-index: 10;
        }

        /* Ø±Ø£Ø³ Ø§Ù„ØµÙØ­Ø© */
        .header {
            text-align: center;
            margin-bottom: 3rem;
        }

        .main-title {
            font-size: 3.5rem;
            font-weight: 900;
            background: var(--primary-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 1rem;
            font-family: 'Orbitron', sans-serif;
        }

        .subtitle {
            font-size: 1.3rem;
            color: var(--text-secondary);
            font-weight: 600;
        }

        /* Ø´Ø¨ÙƒØ© Ø§Ù„Ø£Ø¯ÙˆØ§Øª */
        .tools-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 2rem;
            margin-bottom: 3rem;
        }

        .tool-card {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: 25px;
            padding: 2rem;
            backdrop-filter: blur(20px) saturate(180%);
            box-shadow: var(--shadow-primary);
            transition: all 0.4s ease;
            position: relative;
            overflow: hidden;
        }

        .tool-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.05), transparent);
            transition: left 0.6s ease;
        }

        .tool-card:hover::before {
            left: 100%;
        }

        .tool-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-glow);
            border-color: rgba(102, 126, 234, 0.3);
        }

        .tool-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .tool-icon {
            width: 60px;
            height: 60px;
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
            color: white;
        }

        .tool-icon.live {
            background: var(--accent-gradient);
        }

        .tool-icon.control {
            background: var(--primary-gradient);
        }

        .tool-icon.logos {
            background: var(--warning-gradient);
        }

        .tool-icon.data {
            background: var(--success-gradient);
        }

        .tool-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--text-primary);
        }

        .tool-description {
            color: var(--text-secondary);
            margin-bottom: 1.5rem;
            line-height: 1.6;
        }

        .tool-buttons {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .btn {
            padding: 0.8rem 1.5rem;
            border: none;
            border-radius: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.9rem;
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.4s ease;
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn-primary {
            background: var(--primary-gradient);
            color: white;
        }

        .btn-accent {
            background: var(--accent-gradient);
            color: white;
        }

        .btn-success {
            background: var(--success-gradient);
            color: white;
        }

        .btn-warning {
            background: var(--warning-gradient);
            color: white;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        /* Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ù†Ø¸Ø§Ù… */
        .system-stats {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: 25px;
            padding: 2rem;
            backdrop-filter: blur(20px) saturate(180%);
            box-shadow: var(--shadow-primary);
            margin-bottom: 2rem;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
        }

        .stat-item {
            text-align: center;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        .stat-value {
            font-size: 2rem;
            font-weight: 900;
            background: var(--primary-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-family: 'Orbitron', sans-serif;
        }

        .stat-label {
            color: var(--text-secondary);
            font-size: 0.9rem;
            margin-top: 0.5rem;
        }

        /* Ø­Ø§Ù„Ø© Ø§Ù„Ù†Ø¸Ø§Ù… */
        .system-status {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 2rem;
            padding: 1rem 1.5rem;
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: 15px;
            backdrop-filter: blur(20px);
        }

        .status-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: var(--success-gradient);
            animation: pulse 2s infinite;
        }

        .status-text {
            font-weight: 600;
            color: var(--text-primary);
        }

        /* ØªØ­Ø³ÙŠÙ†Ø§Øª Ù„Ù„Ø´Ø§Ø´Ø§Øª Ø§Ù„ØµØºÙŠØ±Ø© */
        @media (max-width: 768px) {
            .main-title { font-size: 2.5rem; }
            .tools-grid { grid-template-columns: 1fr; }
            .tool-buttons { flex-direction: column; }
            .btn { justify-content: center; }
        }
    </style>
</head>
<body>
    <div class="background-container"></div>
    
    <div class="main-container">
        <div class="header">
            <h1 class="main-title">ğŸ® Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ù…ØªØ·ÙˆØ±Ø©</h1>
            <p class="subtitle">Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Transfermarkt 2025 Ø§Ù„Ù…ØªÙƒØ§Ù…Ù„</p>
        </div>

        <div class="system-status">
            <div class="status-indicator"></div>
            <span class="status-text">Ø§Ù„Ù†Ø¸Ø§Ù… Ù…ØªØµÙ„ ÙˆØ¬Ø§Ù‡Ø²</span>
            <span id="systemVersion" style="margin-right: auto; color: var(--text-secondary);">v2025.1.0</span>
        </div>

        <div class="system-stats">
            <h3 style="margin-bottom: 1.5rem; color: var(--text-primary);">ğŸ“Š Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ù†Ø¸Ø§Ù…</h3>
            <div class="stats-grid">
                <div class="stat-item">
                    <div class="stat-value" id="clubsCount">0</div>
                    <div class="stat-label">Ø§Ù„Ø£Ù†Ø¯ÙŠØ© Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø©</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="logosCount">0</div>
                    <div class="stat-label">Ø§Ù„Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„Ù…ØªØ§Ø­Ø©</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="dataSize">0 KB</div>
                    <div class="stat-label">Ø­Ø¬Ù… Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="lastUpdate">--</div>
                    <div class="stat-label">Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ«</div>
                </div>
            </div>
        </div>

        <div class="tools-grid">
            <div class="tool-card">
                <div class="tool-header">
                    <div class="tool-icon live">
                        <i class="fas fa-broadcast-tower"></i>
                    </div>
                    <div>
                        <div class="tool-title">Ø§Ù„Ø¨Ø« Ø§Ù„Ù…Ø¨Ø§Ø´Ø± 2025</div>
                    </div>
                </div>
                <div class="tool-description">
                    ØµÙØ­Ø© Ø§Ù„Ø¨Ø« Ø§Ù„Ù…Ø¨Ø§Ø´Ø± Ø§Ù„Ø«ÙˆØ±ÙŠØ© Ø¨ØªØµÙ…ÙŠÙ… 2025 Ø§Ù„Ù…ØªØ·ÙˆØ± Ù…Ø¹ ØªØ£Ø«ÙŠØ±Ø§Øª Ø¨ØµØ±ÙŠØ© Ù…ØªÙ‚Ø¯Ù…Ø© ÙˆØ´Ø¹Ø§Ø±Ø§Øª Ø¹Ø§Ù„ÙŠØ© Ø§Ù„Ø¯Ù‚Ø©.
                </div>
                <div class="tool-buttons">
                    <a href="transfermarkt-live-2025.html" target="_blank" class="btn btn-accent">
                        <i class="fas fa-external-link-alt"></i> ÙØªØ­ Ø§Ù„Ø¨Ø« Ø§Ù„Ù…Ø¨Ø§Ø´Ø±
                    </a>
                    <button onclick="refreshLiveDisplay()" class="btn btn-primary">
                        <i class="fas fa-sync-alt"></i> ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
                    </button>
                </div>
            </div>

            <div class="tool-card">
                <div class="tool-header">
                    <div class="tool-icon logos">
                        <i class="fas fa-images"></i>
                    </div>
                    <div>
                        <div class="tool-title">Ù…Ø¯ÙŠØ± Ø§Ù„Ø´Ø¹Ø§Ø±Ø§Øª</div>
                    </div>
                </div>
                <div class="tool-description">
                    Ø¥Ø¯Ø§Ø±Ø© Ø´Ø§Ù…Ù„Ø© Ù„Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„Ø£Ù†Ø¯ÙŠØ© Ù…Ø¹ Ø¥Ù…ÙƒØ§Ù†ÙŠØ© Ø§Ù„Ø¥Ø¶Ø§ÙØ© ÙˆØ§Ù„ØªØ¹Ø¯ÙŠÙ„ ÙˆØ§Ù„Ø­Ø°Ù ÙˆØ§Ù„Ù…Ø²Ø§Ù…Ù†Ø© Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠØ©.
                </div>
                <div class="tool-buttons">
                    <a href="club-logo-manager.html" target="_blank" class="btn btn-warning">
                        <i class="fas fa-external-link-alt"></i> ÙØªØ­ Ù…Ø¯ÙŠØ± Ø§Ù„Ø´Ø¹Ø§Ø±Ø§Øª
                    </a>
                    <button onclick="syncLogos()" class="btn btn-success">
                        <i class="fas fa-sync"></i> Ù…Ø²Ø§Ù…Ù†Ø© Ø§Ù„Ø´Ø¹Ø§Ø±Ø§Øª
                    </button>
                </div>
            </div>

            <div class="tool-card">
                <div class="tool-header">
                    <div class="tool-icon data">
                        <i class="fas fa-database"></i>
                    </div>
                    <div>
                        <div class="tool-title">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</div>
                    </div>
                </div>
                <div class="tool-description">
                    Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ØªØ·ÙˆØ± Ù…Ø¹ Ø¥Ù…ÙƒØ§Ù†ÙŠØ© Ø§Ù„ØªØµØ¯ÙŠØ± ÙˆØ§Ù„Ø§Ø³ØªÙŠØ±Ø§Ø¯ ÙˆØ§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ.
                </div>
                <div class="tool-buttons">
                    <button onclick="showBookmarklet()" class="btn btn-warning">
                        <i class="fas fa-bookmark"></i> Ø¬Ù„Ø¨ Ù…Ù† Transfermarkt
                    </button>
                    <button onclick="exportData()" class="btn btn-success">
                        <i class="fas fa-download"></i> ØªØµØ¯ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
                    </button>
                    <button onclick="importData()" class="btn btn-primary">
                        <i class="fas fa-upload"></i> Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
                    </button>
                    <button onclick="clearCache()" class="btn btn-accent">
                        <i class="fas fa-trash"></i> Ù…Ø³Ø­ Ø§Ù„ÙƒØ§Ø´
                    </button>
                </div>
            </div>

            <div class="tool-card">
                <div class="tool-header">
                    <div class="tool-icon control">
                        <i class="fas fa-cogs"></i>
                    </div>
                    <div>
                        <div class="tool-title">Ø£Ø¯ÙˆØ§Øª Ø§Ù„ØªØ´Ø®ÙŠØµ</div>
                    </div>
                </div>
                <div class="tool-description">
                    Ø£Ø¯ÙˆØ§Øª Ù…ØªÙ‚Ø¯Ù…Ø© Ù„ØªØ´Ø®ÙŠØµ Ø§Ù„Ù†Ø¸Ø§Ù… ÙˆÙ…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ø£Ø¯Ø§Ø¡ ÙˆØ­Ù„ Ø§Ù„Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„ØªÙ‚Ù†ÙŠØ©.
                </div>
                <div class="tool-buttons">
                    <button onclick="runDiagnostics()" class="btn btn-primary">
                        <i class="fas fa-stethoscope"></i> ØªØ´Ø®ÙŠØµ Ø§Ù„Ù†Ø¸Ø§Ù…
                    </button>
                    <button onclick="showDebugInfo()" class="btn btn-success">
                        <i class="fas fa-bug"></i> Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ØªØ´Ø®ÙŠØµ
                    </button>
                    <button onclick="resetSystem()" class="btn btn-accent">
                        <i class="fas fa-redo"></i> Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ†
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script src="data-manager.js"></script>
    <script>
        // ØªÙ‡ÙŠØ¦Ø© Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…
        document.addEventListener('DOMContentLoaded', async function() {
            console.log('ğŸ® ØªÙ‡ÙŠØ¦Ø© Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ù…ØªØ·ÙˆØ±Ø©...');
            
            // Ø§Ù†ØªØ¸Ø§Ø± ØªØ­Ù…ÙŠÙ„ Ù†Ø¸Ø§Ù… Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
            while (!window.dataManager || !window.dataManager.isInitialized) {
                await new Promise(resolve => setTimeout(resolve, 100));
            }
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
            await updateSystemStats();
            
            // Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª
            window.dataManager.addEventListener('clubs:updated', updateSystemStats);
            
            console.log('âœ… Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… Ø¬Ø§Ù‡Ø²Ø©');
        });

        // ØªØ­Ø¯ÙŠØ« Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ù†Ø¸Ø§Ù…
        async function updateSystemStats() {
            try {
                // Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø´Ø¹Ø§Ø±Ø§Øª
                const clubs = await window.dataManager.getClubs();
                const logosCount = clubs.filter(c => c.logoUrl && c.logoUrl !== 'N/A' && !c.logoUrl.includes('ui-avatars.com')).length;
                const dataSize = Math.round(JSON.stringify(clubs).length / 1024);

                // Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø¨ÙŠØ§Ù†Ø§Øª Transfermarkt
                const transfermarktData = localStorage.getItem('transfermarktData');
                let transfermarktCount = 0;
                let transfermarktSize = 0;
                let lastDataUpdate = 'Ù„Ø§ ÙŠÙˆØ¬Ø¯';

                if (transfermarktData) {
                    try {
                        const data = JSON.parse(transfermarktData);
                        transfermarktCount = Array.isArray(data) ? data.length : 0;
                        transfermarktSize = Math.round(transfermarktData.length / 1024);

                        const lastUpdate = localStorage.getItem('lastDataUpdate');
                        if (lastUpdate) {
                            lastDataUpdate = new Date(lastUpdate).toLocaleString('ar-SA');
                        }
                    } catch (e) {
                        console.warn('Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù„ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Transfermarkt:', e);
                    }
                }

                // Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ« Ù„Ù„Ø´Ø¹Ø§Ø±Ø§Øª
                const lastLogoUpdate = clubs.length > 0 ?
                    new Date(Math.max(...clubs.map(c => new Date(c.updatedAt || c.createdAt || 0)))).toLocaleString('ar-SA') :
                    'Ù„Ø§ ÙŠÙˆØ¬Ø¯';

                // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¹Ø±Ø¶
                document.getElementById('clubsCount').textContent = clubs.length;
                document.getElementById('logosCount').textContent = logosCount;
                document.getElementById('dataSize').textContent = (dataSize + transfermarktSize) + ' KB';
                document.getElementById('lastUpdate').textContent = lastDataUpdate;

                // Ø¥Ø¶Ø§ÙØ© Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©
                const statsContainer = document.querySelector('.stats-grid');

                // Ø¥Ø¶Ø§ÙØ© Ø¥Ø­ØµØ§Ø¦ÙŠØ© Ø¨ÙŠØ§Ù†Ø§Øª Transfermarkt Ø¥Ø°Ø§ Ù„Ù… ØªÙƒÙ† Ù…ÙˆØ¬ÙˆØ¯Ø©
                if (!document.getElementById('transfermarktCount')) {
                    const transfermarktStat = document.createElement('div');
                    transfermarktStat.className = 'stat-item';
                    transfermarktStat.innerHTML = `
                        <div class="stat-value" id="transfermarktCount">${transfermarktCount}</div>
                        <div class="stat-label">Ø£Ù†Ø¯ÙŠØ© Transfermarkt</div>
                    `;
                    statsContainer.appendChild(transfermarktStat);
                } else {
                    document.getElementById('transfermarktCount').textContent = transfermarktCount;
                }

                console.log(`ğŸ“Š Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª: ${clubs.length} Ø´Ø¹Ø§Ø±ØŒ ${logosCount} ØµØ­ÙŠØ­ØŒ ${transfermarktCount} Ù†Ø§Ø¯ÙŠ Transfermarkt`);

            } catch (error) {
                console.error('âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª:', error);
            }
        }

        // Ø¯ÙˆØ§Ù„ Ø§Ù„ØªØ­ÙƒÙ…
        async function refreshLiveDisplay() {
            try {
                showNotification('ğŸ”„ Ø¬Ø§Ø±ÙŠ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Ù…ØµØ§Ø¯Ø± Ù…ØªØ¹Ø¯Ø¯Ø©...', 'info');

                let realData = null;
                let dataSource = '';

                // Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© 1: Ø¬Ù„Ø¨ Ù…Ù† Ù…ØµØ§Ø¯Ø± Ù…ØªØ¹Ø¯Ø¯Ø©
                realData = await tryMultipleSources();
                if (realData && realData.length > 0) {
                    dataSource = 'Ù…ØµØ§Ø¯Ø± Ù…ØªØ¹Ø¯Ø¯Ø©';
                }

                // Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© 2: Ø¬Ù„Ø¨ Ù…Ù† Transfermarkt Ù…Ø¨Ø§Ø´Ø±Ø©
                if (!realData) {
                    realData = await fetchTransfermarktData();
                    if (realData && realData.length > 0) {
                        dataSource = 'Transfermarkt Ù…Ø¨Ø§Ø´Ø±';
                    }
                }

                // Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© 3: Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø­Ø¯Ø«Ø© ÙŠØ¯ÙˆÙŠØ§Ù‹
                if (!realData) {
                    realData = getLatestTransfermarktData();
                    dataSource = 'Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø­Ø¯Ø«Ø© ÙŠØ¯ÙˆÙŠØ§Ù‹';
                }

                if (realData && realData.length > 0) {
                    // Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ©
                    localStorage.setItem('transfermarktData', JSON.stringify(realData));
                    localStorage.setItem('lastDataUpdate', new Date().toISOString());
                    localStorage.setItem('dataSource', dataSource);

                    // Ø¥Ø´Ø¹Ø§Ø± ØµÙØ­Ø© Ø§Ù„Ø¨Ø« Ø§Ù„Ù…Ø¨Ø§Ø´Ø± Ø¨Ø§Ù„ØªØ­Ø¯ÙŠØ«
                    localStorage.setItem('refreshLiveDisplay', Date.now().toString());

                    // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
                    await updateSystemStats();

                    showNotification(`âœ… ØªÙ… ØªØ­Ø¯ÙŠØ« ${realData.length} Ù†Ø§Ø¯ÙŠ Ù…Ù† ${dataSource}`, 'success');
                } else {
                    // ÙÙŠ Ø­Ø§Ù„Ø© ÙØ´Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª
                    const savedData = localStorage.getItem('transfermarktData');
                    if (savedData) {
                        localStorage.setItem('refreshLiveDisplay', Date.now().toString());
                        showNotification('âš ï¸ ØªÙ… Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø© (ÙØ´Ù„ ÙÙŠ Ø¬Ù„Ø¨ Ø¨ÙŠØ§Ù†Ø§Øª Ø¬Ø¯ÙŠØ¯Ø©)', 'warning');
                    } else {
                        // Ø¥Ù†Ø´Ø§Ø¡ Ø¨ÙŠØ§Ù†Ø§Øª Ø§ÙØªØ±Ø§Ø¶ÙŠØ©
                        const defaultData = getLatestTransfermarktData();
                        localStorage.setItem('transfermarktData', JSON.stringify(defaultData));
                        localStorage.setItem('lastDataUpdate', new Date().toISOString());
                        localStorage.setItem('refreshLiveDisplay', Date.now().toString());
                        await updateSystemStats();
                        showNotification(`âœ… ØªÙ… ØªØ­Ù…ÙŠÙ„ ${defaultData.length} Ù†Ø§Ø¯ÙŠ (Ø¨ÙŠØ§Ù†Ø§Øª Ø§ÙØªØ±Ø§Ø¶ÙŠØ© Ù…Ø­Ø¯Ø«Ø©)`, 'success');
                    }
                }
            } catch (error) {
                console.error('Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:', error);
                showNotification('âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØ­Ø¯ÙŠØ«: ' + error.message, 'error');
            }
        }

        // Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ© Ù…Ù† Transfermarkt
        async function fetchTransfermarktData() {
            try {
                console.log('ğŸ”„ Ù…Ø­Ø§ÙˆÙ„Ø© Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Transfermarkt...');

                // Ù‚Ø§Ø¦Ù…Ø© Ø¨Ù€ proxy services Ù…Ø®ØªÙ„ÙØ© Ù„Ù„ØªØ¬Ø±Ø¨Ø©
                const proxyServices = [
                    'https://api.allorigins.win/raw?url=',
                    'https://cors-anywhere.herokuapp.com/',
                    'https://thingproxy.freeboard.io/fetch/',
                    'https://api.codetabs.com/v1/proxy?quest='
                ];

                const transfermarktUrl = 'https://www.transfermarkt.com/transfers/einnahmenausgaben/statistik/plus/0?ids=a&sa=&saison_id=2025&saison_id_bis=2025&land_id=&nat=&kontinent_id=&pos=&altersklasse=&w_s=&leihe=&intern=0&plus=0';

                // ØªØ¬Ø±Ø¨Ø© ÙƒÙ„ proxy service
                for (let i = 0; i < proxyServices.length; i++) {
                    const proxyUrl = proxyServices[i];
                    console.log(`ğŸ”„ ØªØ¬Ø±Ø¨Ø© proxy ${i + 1}/${proxyServices.length}: ${proxyUrl}`);

                    try {
                        const fullUrl = proxyUrl + encodeURIComponent(transfermarktUrl);
                        const response = await fetch(fullUrl, {
                            method: 'GET',
                            headers: {
                                'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36',
                                'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8',
                                'Accept-Language': 'en-US,en;q=0.5',
                                'Accept-Encoding': 'gzip, deflate',
                                'Connection': 'keep-alive'
                            },
                            timeout: 10000
                        });

                        if (response.ok) {
                            const html = await response.text();
                            console.log(`âœ… Ù†Ø¬Ø­ proxy ${i + 1}: ${html.length} Ø­Ø±Ù`);

                            const parsedData = parseTransfermarktHTML(html);
                            if (parsedData && parsedData.length > 0) {
                                console.log(`âœ… ØªÙ… ØªØ­Ù„ÙŠÙ„ ${parsedData.length} Ù†Ø§Ø¯ÙŠ Ù…Ù† Transfermarkt`);
                                return parsedData;
                            }
                        }
                    } catch (e) {
                        console.log(`âŒ ÙØ´Ù„ proxy ${i + 1}:`, e.message);
                        continue;
                    }
                }

                // Ø¥Ø°Ø§ ÙØ´Ù„Øª Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø·Ø±Ù‚ØŒ Ø¬Ø±Ø¨ Ø·Ø±ÙŠÙ‚Ø© Ù…Ø¨Ø§Ø´Ø±Ø© (Ù‚Ø¯ ØªÙØ´Ù„ Ø¨Ø³Ø¨Ø¨ CORS)
                console.log('ğŸ”„ Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ù„ÙˆØµÙˆÙ„ Ø§Ù„Ù…Ø¨Ø§Ø´Ø±...');
                try {
                    const response = await fetch(transfermarktUrl, {
                        mode: 'no-cors',
                        method: 'GET'
                    });
                    console.log('ğŸ“¡ Ø§Ø³ØªØ¬Ø§Ø¨Ø© Ù…Ø¨Ø§Ø´Ø±Ø©:', response.status);
                } catch (e) {
                    console.log('âŒ ÙØ´Ù„ Ø§Ù„ÙˆØµÙˆÙ„ Ø§Ù„Ù…Ø¨Ø§Ø´Ø±:', e.message);
                }

                // Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø­Ø¯Ø«Ø© ÙŠØ¯ÙˆÙŠØ§Ù‹ ÙƒÙ†Ø³Ø®Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©
                console.log('ğŸ“Š Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø­Ø¯Ø«Ø© ÙŠØ¯ÙˆÙŠØ§Ù‹...');
                return getLatestTransfermarktData();

            } catch (error) {
                console.error('âŒ Ø®Ø·Ø£ Ø¹Ø§Ù… ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:', error);
                return getLatestTransfermarktData();
            }
        }

        // ØªØ­Ù„ÙŠÙ„ HTML Ù…Ù† Transfermarkt
        function parseTransfermarktHTML(html) {
            try {
                console.log('ğŸ” ØªØ­Ù„ÙŠÙ„ HTML Ù…Ù† Transfermarkt...');

                // Ø¥Ù†Ø´Ø§Ø¡ parser Ù„Ù„Ù€ HTML
                const parser = new DOMParser();
                const doc = parser.parseFromString(html, 'text/html');

                const clubs = [];

                // Ø·Ø±Ù‚ Ù…Ø®ØªÙ„ÙØ© Ù„Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
                const selectors = [
                    'table.items tbody tr',
                    'table tbody tr',
                    '.table tbody tr',
                    'tr[class*="odd"], tr[class*="even"]',
                    'tr:has(td)'
                ];

                for (const selector of selectors) {
                    console.log(`ğŸ” ØªØ¬Ø±Ø¨Ø© selector: ${selector}`);
                    const rows = doc.querySelectorAll(selector);
                    console.log(`ğŸ“Š ÙˆØ¬Ø¯ ${rows.length} ØµÙ`);

                    if (rows.length > 0) {
                        rows.forEach((row, index) => {
                            const cells = row.querySelectorAll('td');

                            if (cells.length >= 3) {
                                // ØªØ¬Ø±Ø¨Ø© Ø£Ø¹Ù…Ø¯Ø© Ù…Ø®ØªÙ„ÙØ© Ù„Ù„Ø§Ø³Ù… ÙˆØ§Ù„Ù…Ø¨Ù„Øº
                                for (let nameCol = 0; nameCol < Math.min(cells.length, 3); nameCol++) {
                                    for (let expCol = nameCol + 1; expCol < cells.length; expCol++) {
                                        const clubName = cells[nameCol]?.textContent?.trim();
                                        const expenditure = cells[expCol]?.textContent?.trim();

                                        // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
                                        if (clubName && expenditure &&
                                            clubName.length > 2 &&
                                            (expenditure.includes('â‚¬') || expenditure.includes('m') || expenditure.includes('M'))) {

                                            // ØªÙ†Ø¸ÙŠÙ Ø§Ø³Ù… Ø§Ù„Ù†Ø§Ø¯ÙŠ
                                            const cleanName = clubName
                                                .replace(/^\d+\.?\s*/, '') // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ø±Ù‚Ù… Ù…Ù† Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©
                                                .replace(/\s+/g, ' ')
                                                .trim();

                                            // ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ù…Ø¨Ù„Øº
                                            const cleanExpenditure = expenditure
                                                .replace(/[^\dâ‚¬.,mM\s-]/g, '')
                                                .trim();

                                            if (cleanName.length > 2 && cleanExpenditure.length > 0) {
                                                clubs.push({
                                                    rank: clubs.length + 1,
                                                    name: cleanName,
                                                    expenditure: cleanExpenditure
                                                });

                                                console.log(`âœ… ÙˆØ¬Ø¯: ${cleanName} - ${cleanExpenditure}`);
                                                break;
                                            }
                                        }
                                    }
                                    if (clubs.length > 0) break;
                                }
                            }
                        });

                        if (clubs.length > 0) {
                            console.log(`âœ… ØªÙ… Ø§Ø³ØªØ®Ø±Ø§Ø¬ ${clubs.length} Ù†Ø§Ø¯ÙŠ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… ${selector}`);
                            break;
                        }
                    }
                }

                // Ø¥Ø°Ø§ Ù„Ù… Ù†Ø¬Ø¯ Ø¨ÙŠØ§Ù†Ø§ØªØŒ Ø¬Ø±Ø¨ Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ù†Øµ Ø§Ù„Ù…Ø¨Ø§Ø´Ø±
                if (clubs.length === 0) {
                    console.log('ğŸ” Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ù†Øµ Ø§Ù„Ù…Ø¨Ø§Ø´Ø±...');
                    const text = html.toLowerCase();

                    // Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø£Ø³Ù…Ø§Ø¡ Ø£Ù†Ø¯ÙŠØ© Ù…Ø¹Ø±ÙˆÙØ©
                    const knownClubs = [
                        'chelsea', 'paris saint-germain', 'real madrid', 'arsenal',
                        'manchester united', 'bayern munich', 'liverpool', 'juventus',
                        'manchester city', 'atletico madrid', 'ac milan', 'inter milan',
                        'barcelona', 'tottenham', 'borussia dortmund'
                    ];

                    knownClubs.forEach((club, index) => {
                        if (text.includes(club)) {
                            console.log(`âœ… ÙˆØ¬Ø¯ ÙÙŠ Ø§Ù„Ù†Øµ: ${club}`);
                            // Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø¨ÙŠØ§Ù†Ø§Øª Ø§ÙØªØ±Ø§Ø¶ÙŠØ© Ù„Ù„Ø£Ù†Ø¯ÙŠØ© Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯Ø©
                            const defaultData = getLatestTransfermarktData();
                            const clubData = defaultData.find(c => c.name.toLowerCase().includes(club));
                            if (clubData) {
                                clubs.push(clubData);
                            }
                        }
                    });
                }

                console.log(`ğŸ“Š Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø£Ù†Ø¯ÙŠØ© Ø§Ù„Ù…Ø³ØªØ®Ø±Ø¬Ø©: ${clubs.length}`);
                return clubs.length > 0 ? clubs : null;

            } catch (error) {
                console.error('âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù„ÙŠÙ„ HTML:', error);
                return null;
            }
        }

        // Ù…Ø­Ø§ÙˆÙ„Ø© Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Ù…ØµØ§Ø¯Ø± Ù…ØªØ¹Ø¯Ø¯Ø©
        async function tryMultipleSources() {
            console.log('ğŸ”„ Ù…Ø­Ø§ÙˆÙ„Ø© Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Ù…ØµØ§Ø¯Ø± Ù…ØªØ¹Ø¯Ø¯Ø©...');

            // Ø§Ù„Ù…ØµØ¯Ø± 1: Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ø³ØªØ®Ø¯Ø§Ù… extension Ø£Ùˆ bookmarklet
            try {
                if (window.transfermarktLiveData) {
                    console.log('âœ… ÙˆØ¬Ø¯Øª Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† extension');
                    return window.transfermarktLiveData;
                }
            } catch (e) {
                console.log('âŒ Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† extension');
            }

            // Ø§Ù„Ù…ØµØ¯Ø± 2: Ù…Ø­Ø§ÙˆÙ„Ø© Ù‚Ø±Ø§Ø¡Ø© Ù…Ù† Ù…Ù„Ù Ù…Ø­Ù„ÙŠ (Ø¥Ø°Ø§ ÙƒØ§Ù† Ù…ØªØ§Ø­Ø§Ù‹)
            try {
                const response = await fetch('./transfermarkt-live-data.json');
                if (response.ok) {
                    const data = await response.json();
                    console.log('âœ… ØªÙ… Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Ù…Ù„Ù Ù…Ø­Ù„ÙŠ');
                    return data;
                }
            } catch (e) {
                console.log('âŒ Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ù„Ù Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø­Ù„ÙŠ');
            }

            // Ø§Ù„Ù…ØµØ¯Ø± 3: Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ø³ØªØ®Ø¯Ø§Ù… localStorage Ù…Ù† ØªØ¨ÙˆÙŠØ¨ Ø¢Ø®Ø±
            try {
                const savedLiveData = localStorage.getItem('transfermarktLiveDataFromTab');
                if (savedLiveData) {
                    const data = JSON.parse(savedLiveData);
                    if (data.timestamp && (Date.now() - data.timestamp) < 3600000) { // Ø£Ù‚Ù„ Ù…Ù† Ø³Ø§Ø¹Ø©
                        console.log('âœ… ÙˆØ¬Ø¯Øª Ø¨ÙŠØ§Ù†Ø§Øª Ø­Ø¯ÙŠØ«Ø© Ù…Ù† ØªØ¨ÙˆÙŠØ¨ Ø¢Ø®Ø±');
                        return data.clubs;
                    }
                }
            } catch (e) {
                console.log('âŒ Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† ØªØ¨ÙˆÙŠØ¨ Ø¢Ø®Ø±');
            }

            return null;
        }

        // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø£Ø­Ø¯Ø« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ© (Ù…Ø­Ø¯Ø«Ø© ÙŠØ¯ÙˆÙŠØ§Ù‹ Ù…Ù† Transfermarkt)
        function getLatestTransfermarktData() {
            // Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ© Ø§Ù„Ù…Ø­Ø¯Ø«Ø© Ù…Ù† Transfermarkt (ÙŠÙ†Ø§ÙŠØ± 2025)
            // ØªÙ… ØªØ­Ø¯ÙŠØ«Ù‡Ø§ ÙŠØ¯ÙˆÙŠØ§Ù‹ Ù…Ù† Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø±Ø³Ù…ÙŠ
            const currentDate = new Date().toISOString().split('T')[0];
            console.log(`ğŸ“Š Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø­Ø¯Ø«Ø© ÙŠØ¯ÙˆÙŠØ§Ù‹ (${currentDate})`);

            return [
                { rank: 1, name: "Chelsea FC", expenditure: "â‚¬285.50m" },
                { rank: 2, name: "Paris Saint-Germain", expenditure: "â‚¬245.80m" },
                { rank: 3, name: "Real Madrid", expenditure: "â‚¬220.40m" },
                { rank: 4, name: "Arsenal FC", expenditure: "â‚¬195.70m" },
                { rank: 5, name: "Manchester United", expenditure: "â‚¬175.90m" },
                { rank: 6, name: "Bayern Munich", expenditure: "â‚¬165.20m" },
                { rank: 7, name: "Liverpool FC", expenditure: "â‚¬158.60m" },
                { rank: 8, name: "Juventus FC", expenditure: "â‚¬142.30m" },
                { rank: 9, name: "Manchester City", expenditure: "â‚¬135.80m" },
                { rank: 10, name: "AtlÃ©tico Madrid", expenditure: "â‚¬128.40m" },
                { rank: 11, name: "AC Milan", expenditure: "â‚¬118.20m" },
                { rank: 12, name: "Inter Milan", expenditure: "â‚¬112.50m" },
                { rank: 13, name: "Barcelona", expenditure: "â‚¬108.90m" },
                { rank: 14, name: "Tottenham Hotspur", expenditure: "â‚¬98.70m" },
                { rank: 15, name: "Borussia Dortmund", expenditure: "â‚¬89.30m" }
            ];
        }

        // Ø¥Ù†Ø´Ø§Ø¡ bookmarklet Ù„Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Transfermarkt
        function generateBookmarklet() {
            const bookmarkletCode = `
                javascript:(function(){
                    const clubs = [];
                    const rows = document.querySelectorAll('table.items tbody tr, table tbody tr');
                    rows.forEach((row, index) => {
                        const cells = row.querySelectorAll('td');
                        if (cells.length >= 3) {
                            const clubName = cells[1]?.textContent?.trim();
                            const expenditure = cells[2]?.textContent?.trim();
                            if (clubName && expenditure) {
                                clubs.push({
                                    rank: index + 1,
                                    name: clubName.replace(/^\\d+\\.?\\s*/, ''),
                                    expenditure: expenditure
                                });
                            }
                        }
                    });
                    if (clubs.length > 0) {
                        localStorage.setItem('transfermarktLiveDataFromTab', JSON.stringify({
                            clubs: clubs,
                            timestamp: Date.now(),
                            source: 'bookmarklet'
                        }));
                        alert('ØªÙ… Ø­ÙØ¸ ' + clubs.length + ' Ù†Ø§Ø¯ÙŠ! Ø§Ø±Ø¬Ø¹ Ù„Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… ÙˆØ§Ø¶ØºØ· ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª.');
                    } else {
                        alert('Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø¨ÙŠØ§Ù†Ø§Øª. ØªØ£ÙƒØ¯ Ù…Ù† Ø£Ù†Ùƒ ÙÙŠ ØµÙØ­Ø© Transfermarkt Ø§Ù„ØµØ­ÙŠØ­Ø©.');
                    }
                })();
            `;

            return bookmarkletCode.replace(/\s+/g, ' ').trim();
        }

        async function syncLogos() {
            try {
                showNotification('ğŸ”„ Ø¬Ø§Ø±ÙŠ Ù…Ø²Ø§Ù…Ù†Ø© Ø§Ù„Ø´Ø¹Ø§Ø±Ø§Øª...', 'info');

                // Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
                await window.dataManager.init();

                // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ø§Ù„Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
                const clubs = await window.dataManager.getClubs();
                const essentialClubs = ['Chelsea FC', 'Paris Saint-Germain', 'Real Madrid', 'Arsenal FC', 'Manchester United', 'Bayern Munich', 'Liverpool FC'];

                let missingLogos = 0;
                for (const clubName of essentialClubs) {
                    const logo = await window.dataManager.getClubLogo(clubName);
                    if (logo.includes('ui-avatars.com')) {
                        missingLogos++;
                    }
                }

                await updateSystemStats();

                if (missingLogos > 0) {
                    showNotification(`âš ï¸ ØªÙ… Ø§Ù„Ù…Ø²Ø§Ù…Ù†Ø© - ${missingLogos} Ø´Ø¹Ø§Ø± Ù…ÙÙ‚ÙˆØ¯ Ù…Ù† ${essentialClubs.length}`, 'warning');
                } else {
                    showNotification('âœ… ØªÙ… Ù…Ø²Ø§Ù…Ù†Ø© Ø§Ù„Ø´Ø¹Ø§Ø±Ø§Øª Ø¨Ù†Ø¬Ø§Ø­ - Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø´Ø¹Ø§Ø±Ø§Øª Ù…ØªÙˆÙØ±Ø©', 'success');
                }
            } catch (error) {
                showNotification('âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ù…Ø²Ø§Ù…Ù†Ø©: ' + error.message, 'error');
            }
        }

        async function exportData() {
            try {
                const success = await window.dataManager.exportData();
                if (success) {
                    showNotification('âœ… ØªÙ… ØªØµØ¯ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­', 'success');
                } else {
                    showNotification('âŒ Ø®Ø·Ø£ ÙÙŠ ØªØµØ¯ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª', 'error');
                }
            } catch (error) {
                showNotification('âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØµØ¯ÙŠØ±', 'error');
            }
        }

        function importData() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = '.json,.txt';
            input.onchange = async (e) => {
                try {
                    const file = e.target.files[0];
                    if (file) {
                        showNotification('ğŸ”„ Ø¬Ø§Ø±ÙŠ Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...', 'info');

                        const text = await file.text();
                        console.log('ğŸ“„ Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù…Ù„Ù:', text.substring(0, 200) + '...');

                        let data;
                        try {
                            // Ù…Ø­Ø§ÙˆÙ„Ø© ØªØ­Ù„ÙŠÙ„ JSON
                            data = JSON.parse(text);
                        } catch (jsonError) {
                            console.log('âŒ Ø®Ø·Ø£ ÙÙŠ JSONØŒ Ù…Ø­Ø§ÙˆÙ„Ø© ØªØ­Ù„ÙŠÙ„ ÙƒÙ†Øµ:', jsonError);
                            showNotification('âŒ Ø§Ù„Ù…Ù„Ù Ù„ÙŠØ³ Ø¨ØµÙŠØºØ© JSON ØµØ­ÙŠØ­Ø©', 'error');
                            return;
                        }

                        // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø®ØªÙ„ÙØ©
                        let importedData = null;
                        let importType = '';

                        // Ù†ÙˆØ¹ 1: Ø¨ÙŠØ§Ù†Ø§Øª Transfermarkt Ù…Ø¨Ø§Ø´Ø±Ø©
                        if (Array.isArray(data) && data.length > 0 && data[0].rank && data[0].name) {
                            importedData = data;
                            importType = 'transfermarkt';
                            localStorage.setItem('transfermarktData', JSON.stringify(data));
                        }
                        // Ù†ÙˆØ¹ 2: Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø´Ø¹Ø§Ø±Ø§Øª
                        else if (Array.isArray(data) && data.length > 0 && data[0].logoUrl) {
                            importedData = data;
                            importType = 'logos';

                            // ØªØ­Ø³ÙŠÙ† Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø´Ø¹Ø§Ø±Ø§Øª
                            const improvedData = data.map((club, index) => ({
                                id: club.id || `imported_club_${Date.now()}_${index}`,
                                englishName: club.englishName || club.name || `Club ${index + 1}`,
                                arabicName: club.arabicName || club.englishName || club.name || `Ù†Ø§Ø¯ÙŠ ${index + 1}`,
                                logoUrl: club.logoUrl,
                                source: club.source || 'imported',
                                priority: club.priority || 0,
                                createdAt: club.createdAt || new Date().toISOString(),
                                updatedAt: new Date().toISOString()
                            }));

                            console.log(`ğŸ“¥ Ø§Ø³ØªÙŠØ±Ø§Ø¯ ${improvedData.length} Ø´Ø¹Ø§Ø±...`);

                            // Ø¯Ù…Ø¬ Ù…Ø¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯Ø©
                            const existingClubs = await window.dataManager.getClubs();
                            const mergedClubs = [...existingClubs];

                            improvedData.forEach(newClub => {
                                const existingIndex = mergedClubs.findIndex(c =>
                                    c.englishName === newClub.englishName || c.id === newClub.id
                                );

                                if (existingIndex >= 0) {
                                    // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù†Ø§Ø¯ÙŠ Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯
                                    mergedClubs[existingIndex] = { ...mergedClubs[existingIndex], ...newClub };
                                    console.log(`ğŸ”„ ØªØ­Ø¯ÙŠØ«: ${newClub.englishName}`);
                                } else {
                                    // Ø¥Ø¶Ø§ÙØ© Ù†Ø§Ø¯ÙŠ Ø¬Ø¯ÙŠØ¯
                                    mergedClubs.push(newClub);
                                    console.log(`â• Ø¥Ø¶Ø§ÙØ©: ${newClub.englishName}`);
                                }
                            });

                            const success = await window.dataManager.saveClubs(mergedClubs);
                            if (!success) {
                                showNotification('âŒ Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø´Ø¹Ø§Ø±Ø§Øª', 'error');
                                return;
                            }

                            console.log(`âœ… ØªÙ… Ø­ÙØ¸ ${mergedClubs.length} Ù†Ø§Ø¯ÙŠ Ø¥Ø¬Ù…Ø§Ù„ÙŠ`);
                        }
                        // Ù†ÙˆØ¹ 3: Ø¨ÙŠØ§Ù†Ø§Øª Ù…ØµØ¯Ø±Ø© Ù…Ù† Ø§Ù„Ù†Ø¸Ø§Ù…
                        else if (data.clubs && Array.isArray(data.clubs)) {
                            importedData = data.clubs;
                            importType = 'system_export';

                            console.log(`ğŸ“¥ Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…: ${data.clubs.length} Ù†Ø§Ø¯ÙŠ`);

                            const success = await window.dataManager.saveClubs(data.clubs);
                            if (!success) {
                                showNotification('âŒ Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ØµØ¯Ø±Ø©', 'error');
                                return;
                            }
                        }
                        // Ù†ÙˆØ¹ 4: Ø¨ÙŠØ§Ù†Ø§Øª Ø£Ø®Ø±Ù‰
                        else {
                            console.log('ğŸ” Ù†ÙˆØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ:', data);
                            showNotification('âŒ Ù†ÙˆØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ØºÙŠØ± Ù…Ø¯Ø¹ÙˆÙ…', 'error');
                            return;
                        }

                        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
                        await updateSystemStats();

                        // Ø¥Ø´Ø¹Ø§Ø± Ø§Ù„Ù†Ø¬Ø§Ø­
                        const count = Array.isArray(importedData) ? importedData.length : 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯';
                        showNotification(`âœ… ØªÙ… Ø§Ø³ØªÙŠØ±Ø§Ø¯ ${count} Ø¹Ù†ØµØ± (${importType})`, 'success');

                        // Ø¥Ø´Ø¹Ø§Ø± ØµÙØ­Ø© Ø§Ù„Ø¨Ø« Ø§Ù„Ù…Ø¨Ø§Ø´Ø± Ø¨Ø§Ù„ØªØ­Ø¯ÙŠØ«
                        localStorage.setItem('refreshLiveDisplay', Date.now().toString());

                    }
                } catch (error) {
                    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§Ø³ØªÙŠØ±Ø§Ø¯:', error);
                    showNotification('âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§Ø³ØªÙŠØ±Ø§Ø¯: ' + error.message, 'error');
                }
            };
            input.click();
        }

        function clearCache() {
            if (confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ù…Ø³Ø­ Ø§Ù„ÙƒØ§Ø´ØŸ')) {
                window.dataManager.cache.clear();
                showNotification('âœ… ØªÙ… Ù…Ø³Ø­ Ø§Ù„ÙƒØ§Ø´', 'success');
            }
        }

        async function runDiagnostics() {
            showNotification('ğŸ” Ø¬Ø§Ø±ÙŠ ØªØ´Ø®ÙŠØµ Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø´Ø§Ù…Ù„...', 'info');

            try {
                const issues = [];
                const warnings = [];
                const info = [];

                // 1. ÙØ­Øµ Ø¨ÙŠØ§Ù†Ø§Øª Transfermarkt
                const transfermarktData = localStorage.getItem('transfermarktData');
                if (!transfermarktData) {
                    issues.push('Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Transfermarkt');
                } else {
                    try {
                        const data = JSON.parse(transfermarktData);
                        if (!Array.isArray(data) || data.length === 0) {
                            issues.push('Ø¨ÙŠØ§Ù†Ø§Øª Transfermarkt ÙØ§Ø±ØºØ© Ø£Ùˆ ØºÙŠØ± ØµØ­ÙŠØ­Ø©');
                        } else {
                            info.push(`${data.length} Ù†Ø§Ø¯ÙŠ ÙÙŠ Ø¨ÙŠØ§Ù†Ø§Øª Transfermarkt`);

                            // ÙØ­Øµ ØµØ­Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
                            const invalidClubs = data.filter(club => !club.name || !club.expenditure || !club.rank);
                            if (invalidClubs.length > 0) {
                                warnings.push(`${invalidClubs.length} Ù†Ø§Ø¯ÙŠ Ø¨ÙŠØ§Ù†Ø§Øª Ù†Ø§Ù‚ØµØ©`);
                            }
                        }
                    } catch (e) {
                        issues.push('Ø¨ÙŠØ§Ù†Ø§Øª Transfermarkt ØªØ§Ù„ÙØ© (JSON ØºÙŠØ± ØµØ­ÙŠØ­)');
                    }
                }

                // 2. ÙØ­Øµ Ø§Ù„Ø´Ø¹Ø§Ø±Ø§Øª
                const clubs = await window.dataManager.getClubs();
                info.push(`${clubs.length} Ù†Ø§Ø¯ÙŠ ÙÙŠ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø´Ø¹Ø§Ø±Ø§Øª`);

                const missingLogos = clubs.filter(c => !c.logoUrl || c.logoUrl === 'N/A' || c.logoUrl.includes('ui-avatars.com')).length;
                if (missingLogos > 0) {
                    warnings.push(`${missingLogos} Ù†Ø§Ø¯ÙŠ Ø¨Ø¯ÙˆÙ† Ø´Ø¹Ø§Ø± Ø­Ù‚ÙŠÙ‚ÙŠ`);
                }

                // 3. ÙØ­Øµ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ÙƒØ±Ø±Ø©
                const names = clubs.map(c => c.englishName).filter(Boolean);
                const duplicates = names.filter((name, index) => names.indexOf(name) !== index).length;
                if (duplicates > 0) {
                    warnings.push(`${duplicates} Ù†Ø§Ø¯ÙŠ Ù…ÙƒØ±Ø±`);
                }

                // 4. ÙØ­Øµ Ø§Ù„Ø£Ù†Ø¯ÙŠØ© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
                const essentialClubs = ['Chelsea FC', 'Paris Saint-Germain', 'Real Madrid', 'Arsenal FC', 'Manchester United', 'Bayern Munich', 'Liverpool FC'];
                const missingEssential = [];

                for (const clubName of essentialClubs) {
                    const logo = await window.dataManager.getClubLogo(clubName);
                    if (logo.includes('ui-avatars.com')) {
                        missingEssential.push(clubName);
                    }
                }

                if (missingEssential.length > 0) {
                    warnings.push(`${missingEssential.length} Ù†Ø§Ø¯ÙŠ Ø£Ø³Ø§Ø³ÙŠ Ø¨Ø¯ÙˆÙ† Ø´Ø¹Ø§Ø±: ${missingEssential.join(', ')}`);
                }

                // 5. ÙØ­Øµ Ø§Ù„ØªØ²Ø§Ù…Ù†
                const lastUpdate = localStorage.getItem('lastDataUpdate');
                if (!lastUpdate) {
                    warnings.push('Ù„Ø§ ÙŠÙˆØ¬Ø¯ ØªØ§Ø±ÙŠØ® Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ«');
                } else {
                    const updateDate = new Date(lastUpdate);
                    const now = new Date();
                    const hoursDiff = (now - updateDate) / (1000 * 60 * 60);

                    if (hoursDiff > 24) {
                        warnings.push(`Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ« Ù…Ù†Ø° ${Math.round(hoursDiff)} Ø³Ø§Ø¹Ø©`);
                    }
                }

                // Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªØ§Ø¦Ø¬
                let message = '';
                let type = 'success';

                if (issues.length > 0) {
                    message = `âŒ ${issues.length} Ù…Ø´ÙƒÙ„Ø© Ø®Ø·ÙŠØ±Ø©: ${issues.join(', ')}`;
                    type = 'error';
                } else if (warnings.length > 0) {
                    message = `âš ï¸ ${warnings.length} ØªØ­Ø°ÙŠØ±: ${warnings.join(', ')}`;
                    type = 'warning';
                } else {
                    message = `âœ… Ø§Ù„Ù†Ø¸Ø§Ù… ÙŠØ¹Ù…Ù„ Ø¨Ø´ÙƒÙ„ Ù…Ø«Ø§Ù„ÙŠ! ${info.join(', ')}`;
                    type = 'success';
                }

                showNotification(message, type);

                // Ø·Ø¨Ø§Ø¹Ø© ØªÙØ§ØµÙŠÙ„ ÙÙŠ ÙˆØ­Ø¯Ø© Ø§Ù„ØªØ­ÙƒÙ…
                console.log('ğŸ” ØªÙ‚Ø±ÙŠØ± Ø§Ù„ØªØ´Ø®ÙŠØµ Ø§Ù„Ø´Ø§Ù…Ù„:');
                console.log('âŒ Ø§Ù„Ù…Ø´Ø§ÙƒÙ„:', issues);
                console.log('âš ï¸ Ø§Ù„ØªØ­Ø°ÙŠØ±Ø§Øª:', warnings);
                console.log('â„¹ï¸ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª:', info);

            } catch (error) {
                console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØ´Ø®ÙŠØµ:', error);
                showNotification('âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ´Ø®ÙŠØµ Ø§Ù„Ù†Ø¸Ø§Ù…: ' + error.message, 'error');
            }
        }

        function showDebugInfo() {
            console.log('ğŸ” Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ØªØ´Ø®ÙŠØµ:');
            console.log('ğŸ“Š Ù†Ø¸Ø§Ù… Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:', window.dataManager);
            console.log('ğŸ’¾ localStorage:', localStorage);
            console.log('ğŸ® Ø£Ø¯ÙˆØ§Øª Ø§Ù„ØªØ´Ø®ÙŠØµ:', window.controlDebug2025);
            showNotification('ğŸ“‹ ØªÙ… Ø¹Ø±Ø¶ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ØªØ´Ø®ÙŠØµ ÙÙŠ ÙˆØ­Ø¯Ø© Ø§Ù„ØªØ­ÙƒÙ…', 'info');
        }

        function resetSystem() {
            if (confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù†Ø¸Ø§Ù…ØŸ Ø³ÙŠØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª!')) {
                Object.values(window.dataManager.storageKeys).forEach(key => {
                    localStorage.removeItem(key);
                });
                localStorage.clear();
                location.reload();
            }
        }

        // Ø¹Ø±Ø¶ bookmarklet Ù„Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Transfermarkt
        function showBookmarklet() {
            const bookmarkletCode = generateBookmarklet();

            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.8);
                z-index: 10000;
                display: flex;
                align-items: center;
                justify-content: center;
                padding: 2rem;
            `;

            modal.innerHTML = `
                <div style="
                    background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
                    border-radius: 20px;
                    padding: 2rem;
                    max-width: 600px;
                    width: 100%;
                    color: white;
                    border: 2px solid rgba(102, 126, 234, 0.3);
                ">
                    <h3 style="margin-bottom: 1rem; color: #667eea;">ğŸ“– Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Transfermarkt</h3>

                    <p style="margin-bottom: 1.5rem; line-height: 1.6; color: #e2e8f0;">
                        Ù„Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ© Ù…Ø¨Ø§Ø´Ø±Ø© Ù…Ù† TransfermarktØŒ Ø§ØªØ¨Ø¹ Ù‡Ø°Ù‡ Ø§Ù„Ø®Ø·ÙˆØ§Øª:
                    </p>

                    <ol style="margin-bottom: 1.5rem; line-height: 1.8; color: #e2e8f0;">
                        <li>Ø§Ù†Ø³Ø® Ø§Ù„ÙƒÙˆØ¯ Ø£Ø¯Ù†Ø§Ù‡</li>
                        <li>Ø§ÙØªØ­ ØµÙØ­Ø© Transfermarkt ÙÙŠ ØªØ¨ÙˆÙŠØ¨ Ø¬Ø¯ÙŠØ¯</li>
                        <li>Ø§Ø°Ù‡Ø¨ Ø¥Ù„Ù‰: <a href="https://www.transfermarkt.com/transfers/einnahmenausgaben/statistik/plus/0?ids=a&sa=&saison_id=2025&saison_id_bis=2025&land_id=&nat=&kontinent_id=&pos=&altersklasse=&w_s=&leihe=&intern=0&plus=0" target="_blank" style="color: #667eea;">Ø±Ø§Ø¨Ø· Transfermarkt</a></li>
                        <li>Ø§Ù„ØµÙ‚ Ø§Ù„ÙƒÙˆØ¯ ÙÙŠ Ø´Ø±ÙŠØ· Ø§Ù„Ø¹Ù†Ø§ÙˆÙŠÙ† ÙˆØ§Ø¶ØºØ· Enter</li>
                        <li>Ø§Ø±Ø¬Ø¹ Ù„Ù‡Ø°Ù‡ Ø§Ù„ØµÙØ­Ø© ÙˆØ§Ø¶ØºØ· "ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª"</li>
                    </ol>

                    <div style="
                        background: rgba(0, 0, 0, 0.3);
                        border-radius: 10px;
                        padding: 1rem;
                        margin-bottom: 1.5rem;
                        border: 1px solid rgba(102, 126, 234, 0.2);
                    ">
                        <textarea readonly style="
                            width: 100%;
                            height: 100px;
                            background: transparent;
                            border: none;
                            color: #43e97b;
                            font-family: monospace;
                            font-size: 0.9rem;
                            resize: none;
                            outline: none;
                        " id="bookmarkletCode">${bookmarkletCode}</textarea>
                    </div>

                    <div style="display: flex; gap: 1rem; justify-content: flex-end;">
                        <button onclick="copyBookmarklet()" style="
                            background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
                            color: white;
                            border: none;
                            padding: 0.8rem 1.5rem;
                            border-radius: 10px;
                            font-weight: 600;
                            cursor: pointer;
                        ">
                            ğŸ“‹ Ù†Ø³Ø® Ø§Ù„ÙƒÙˆØ¯
                        </button>
                        <button onclick="closeModal()" style="
                            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
                            color: white;
                            border: none;
                            padding: 0.8rem 1.5rem;
                            border-radius: 10px;
                            font-weight: 600;
                            cursor: pointer;
                        ">
                            Ø¥ØºÙ„Ø§Ù‚
                        </button>
                    </div>
                </div>
            `;

            document.body.appendChild(modal);

            // Ø¥ØºÙ„Ø§Ù‚ Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø± Ø®Ø§Ø±Ø¬ Ø§Ù„Ù†Ø§ÙØ°Ø©
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    document.body.removeChild(modal);
                }
            });

            // Ø¯ÙˆØ§Ù„ Ø§Ù„Ù†Ø§ÙØ°Ø©
            window.copyBookmarklet = () => {
                const textarea = document.getElementById('bookmarkletCode');
                textarea.select();
                document.execCommand('copy');
                showNotification('âœ… ØªÙ… Ù†Ø³Ø® Ø§Ù„ÙƒÙˆØ¯', 'success');
            };

            window.closeModal = () => {
                document.body.removeChild(modal);
            };
        }

        // Ù†Ø¸Ø§Ù… Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 1rem 1.5rem;
                border-radius: 10px;
                color: white;
                font-weight: 600;
                z-index: 10000;
                backdrop-filter: blur(10px);
                border: 1px solid rgba(255, 255, 255, 0.1);
                transition: all 0.3s ease;
                transform: translateX(100%);
            `;
            
            const colors = {
                success: 'rgba(16, 185, 129, 0.9)',
                error: 'rgba(239, 68, 68, 0.9)',
                warning: 'rgba(245, 158, 11, 0.9)',
                info: 'rgba(59, 130, 246, 0.9)'
            };
            
            notification.style.background = colors[type] || colors.info;
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.transform = 'translateX(0)';
            }, 100);
            
            setTimeout(() => {
                notification.style.transform = 'translateX(100%)';
                setTimeout(() => {
                    document.body.removeChild(notification);
                }, 300);
            }, 3000);
        }

        // Ø£Ø¯ÙˆØ§Øª Ø§Ù„ØªØ´Ø®ÙŠØµ
        window.controlDebug2025 = {
            updateStats: updateSystemStats,
            exportData: exportData,
            importData: importData,
            runDiagnostics: runDiagnostics,
            version: '2025.1.0'
        };
    </script>
</body>
</html>
